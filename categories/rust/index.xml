<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Rust on Tech In Sight</title><link>https://techinsight.pages.dev/categories/rust/</link><description>Recent content in Rust on Tech In Sight</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sun, 02 Nov 2025 11:56:37 +0800</lastBuildDate><atom:link href="https://techinsight.pages.dev/categories/rust/index.xml" rel="self" type="application/rss+xml"/><item><title>å­—èŠ‚åºï¼šéšè—åœ¨CPUæ·±å¤„çš„â€œå­˜å‚¨å¯†ç â€ï¼Œä»åŸç†åˆ°Rustå®è·µ</title><link>https://techinsight.pages.dev/p/%E5%AD%97%E8%8A%82%E5%BA%8F%E9%9A%90%E8%97%8F%E5%9C%A8cpu%E6%B7%B1%E5%A4%84%E7%9A%84%E5%AD%98%E5%82%A8%E5%AF%86%E7%A0%81%E4%BB%8E%E5%8E%9F%E7%90%86%E5%88%B0rust%E5%AE%9E%E8%B7%B5/</link><pubDate>Sun, 02 Nov 2025 11:56:37 +0800</pubDate><guid>https://techinsight.pages.dev/p/%E5%AD%97%E8%8A%82%E5%BA%8F%E9%9A%90%E8%97%8F%E5%9C%A8cpu%E6%B7%B1%E5%A4%84%E7%9A%84%E5%AD%98%E5%82%A8%E5%AF%86%E7%A0%81%E4%BB%8E%E5%8E%9F%E7%90%86%E5%88%B0rust%E5%AE%9E%E8%B7%B5/</guid><description>&lt;p&gt;åœ¨è®¡ç®—æœºä¸–ç•Œé‡Œï¼Œâ€œ1+1=2â€æ˜¯æ‰€æœ‰äººå…¬è®¤çš„è§„åˆ™ï¼Œä½†å¤šå­—èŠ‚æ•°æ®è¯¥å¦‚ä½•å­˜è¿›å†…å­˜ï¼Œå´æ›¾è®©ä¸åŒå‚å•†â€œå„æ‰§ä¸€è¯â€ã€‚è¿™ä¸ªçœ‹ä¼¼å¾®å°çš„å·®å¼‚ï¼Œå°±æ˜¯å­—èŠ‚åºï¼ˆEndiannessï¼‰â€”â€”å®ƒåƒCPUçš„â€œæ–¹è¨€â€ï¼Œè™½ä¸å¸¸è¢«ç”¨æˆ·æ„ŸçŸ¥ï¼Œå´åœ¨ç½‘ç»œä¼ è¾“ã€æ–‡ä»¶è§£æã€ç¡¬ä»¶äº¤äº’ä¸­æ‰®æ¼”ç€å…³é”®è§’è‰²ã€‚æœ¬æ–‡å°†ä»æœ¬è´¨ã€å†å²ã€å®è·µåˆ°åº”ç”¨ï¼Œå½»åº•è®²é€å­—èŠ‚åºçš„æ¥é¾™å»è„‰ã€‚&lt;/p&gt;
&lt;h2 id="ä¸€å­—èŠ‚åºæ˜¯ä»€ä¹ˆå¤šå­—èŠ‚æ•°æ®çš„æ’åˆ—æ³•åˆ™"&gt;&lt;a href="#%e4%b8%80%e5%ad%97%e8%8a%82%e5%ba%8f%e6%98%af%e4%bb%80%e4%b9%88%e5%a4%9a%e5%ad%97%e8%8a%82%e6%95%b0%e6%8d%ae%e7%9a%84%e6%8e%92%e5%88%97%e6%b3%95%e5%88%99" class="header-anchor"&gt;&lt;/a&gt;ä¸€ã€å­—èŠ‚åºæ˜¯ä»€ä¹ˆï¼Ÿå¤šå­—èŠ‚æ•°æ®çš„â€œæ’åˆ—æ³•åˆ™â€
&lt;/h2&gt;&lt;p&gt;å­—èŠ‚åºçš„æ ¸å¿ƒï¼Œæ˜¯&lt;strong&gt;å¤šå­—èŠ‚æ•°æ®ï¼ˆå¦‚16ä½æ•´æ•°ã€32ä½æµ®ç‚¹æ•°ï¼‰åœ¨å†…å­˜ä¸­çš„å­˜å‚¨é¡ºåº&lt;/strong&gt;ã€‚è®¡ç®—æœºæœ€å°å­˜å‚¨å•ä½æ˜¯å­—èŠ‚ï¼ˆ8ä½ï¼‰ï¼Œä½†å•ä¸ªå­—èŠ‚åªèƒ½è¡¨ç¤º0-255çš„æ•°å€¼ï¼Œè¦å­˜å‚¨æ›´å¤§çš„æ•°æ®ï¼ˆå¦‚65535ï¼‰ï¼Œå°±éœ€è¦å¤šä¸ªå­—èŠ‚ç»„åˆã€‚æ­¤æ—¶ï¼Œâ€œå…ˆå­˜é«˜ä½å­—èŠ‚è¿˜æ˜¯ä½ä½å­—èŠ‚â€ï¼Œå°±æˆäº†å­—èŠ‚åºè¦è§£å†³çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰ä¸»æµçš„å­—èŠ‚åºåˆ†ä¸ºä¸¤ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å°ç«¯åºï¼ˆLittle-Endianï¼‰&lt;/strong&gt;ï¼šâ€œä½ä½å­—èŠ‚åœ¨å‰â€ï¼Œå³æ•°å€¼çš„ä½ä½å­—èŠ‚å­˜åˆ°å†…å­˜çš„ä½åœ°å€ï¼Œé«˜ä½å­—èŠ‚å­˜åˆ°é«˜åœ°å€ã€‚&lt;br /&gt;
ä¾‹ï¼š16ä½æ•´æ•°&lt;code&gt;0x1234&lt;/code&gt;ï¼ˆåè¿›åˆ¶4660ï¼‰ï¼Œå°ç«¯åºä¸‹å†…å­˜å¸ƒå±€ä¸º&lt;code&gt;[0x34, 0x12]&lt;/code&gt;ï¼ˆä½åœ°å€å­˜ä½ä½&lt;code&gt;0x34&lt;/code&gt;ï¼Œé«˜åœ°å€å­˜é«˜ä½&lt;code&gt;0x12&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§ç«¯åºï¼ˆBig-Endianï¼‰&lt;/strong&gt;ï¼šâ€œé«˜ä½å­—èŠ‚åœ¨å‰â€ï¼Œå³æ•°å€¼çš„é«˜ä½å­—èŠ‚å­˜åˆ°å†…å­˜çš„ä½åœ°å€ï¼Œä½ä½å­—èŠ‚å­˜åˆ°é«˜åœ°å€ã€‚&lt;br /&gt;
ä¾‹ï¼šåŒæ ·æ˜¯&lt;code&gt;0x1234&lt;/code&gt;ï¼Œå¤§ç«¯åºä¸‹å†…å­˜å¸ƒå±€ä¸º&lt;code&gt;[0x12, 0x34]&lt;/code&gt;ï¼ˆä½åœ°å€å­˜é«˜ä½&lt;code&gt;0x12&lt;/code&gt;ï¼Œé«˜åœ°å€å­˜ä½ä½&lt;code&gt;0x34&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸¾ä¸ªç”Ÿæ´»åŒ–çš„ä¾‹å­ï¼šå¦‚æœæŠŠâ€œ1234â€çœ‹ä½œä¸€ä¸ª4å­—èŠ‚æ•°æ®ï¼Œå°ç«¯åºä¼šæŒ‰â€œ34 12â€çš„é¡ºåºå†™åœ¨çº¸ä¸Šï¼Œå¤§ç«¯åºåˆ™æŒ‰â€œ12 34â€çš„é¡ºåºå†™â€”â€”ä¸¤ç§å†™æ³•çš„â€œæ•°å€¼â€ç›¸åŒï¼Œä½†â€œæ’åˆ—é¡ºåºâ€å®Œå…¨ç›¸åã€‚&lt;/p&gt;
&lt;h2 id="äºŒå­—èŠ‚åºçš„æ¼”å˜ä»ç¡¬ä»¶å·®å¼‚åˆ°è¡Œä¸šå¦¥å"&gt;&lt;a href="#%e4%ba%8c%e5%ad%97%e8%8a%82%e5%ba%8f%e7%9a%84%e6%bc%94%e5%8f%98%e4%bb%8e%e7%a1%ac%e4%bb%b6%e5%b7%ae%e5%bc%82%e5%88%b0%e8%a1%8c%e4%b8%9a%e5%a6%a5%e5%8d%8f" class="header-anchor"&gt;&lt;/a&gt;äºŒã€å­—èŠ‚åºçš„æ¼”å˜ï¼šä»ç¡¬ä»¶å·®å¼‚åˆ°è¡Œä¸šå¦¥å
&lt;/h2&gt;&lt;p&gt;å­—èŠ‚åºå¹¶éâ€œæŠ€æœ¯é€‰æ‹©â€ï¼Œè€Œæ˜¯æ—©æœŸè®¡ç®—æœºç¡¬ä»¶å‚å•†çš„â€œè·¯å¾„ä¾èµ–â€ã€‚å®ƒçš„æ¼”å˜å²ï¼Œæœ¬è´¨æ˜¯ä¸åŒæ¶æ„CPUçš„â€œè¯è¯­æƒäº‰å¤ºâ€ä¸åæœŸè¡Œä¸šçš„â€œæ ‡å‡†åŒ–å¦¥åâ€ã€‚&lt;/p&gt;
&lt;h3 id="1-èµ·æºcpuæ¶æ„çš„å„è‡ªä¸ºæˆ˜"&gt;&lt;a href="#1-%e8%b5%b7%e6%ba%90cpu%e6%9e%b6%e6%9e%84%e7%9a%84%e5%90%84%e8%87%aa%e4%b8%ba%e6%88%98" class="header-anchor"&gt;&lt;/a&gt;1. èµ·æºï¼šCPUæ¶æ„çš„â€œå„è‡ªä¸ºæˆ˜â€
&lt;/h3&gt;&lt;p&gt;å­—èŠ‚åºçš„åˆ†æ­§ï¼Œæœ€æ—©æºäº20ä¸–çºª70å¹´ä»£çš„CPUè®¾è®¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å°ç«¯åºçš„å´›èµ·&lt;/strong&gt;ï¼šè‹±ç‰¹å°”ï¼ˆIntelï¼‰åœ¨1978å¹´æ¨å‡ºçš„8086å¤„ç†å™¨ï¼Œé¦–æ¬¡é‡‡ç”¨å°ç«¯åºã€‚å½“æ—¶8086éœ€è¦å…¼å®¹æ›´æ—©çš„8ä½å¤„ç†å™¨8080ï¼Œå°ç«¯åºèƒ½è®©8ä½ç¨‹åºç›´æ¥è®¿é—®16ä½æ•°æ®çš„ä½ä½å­—èŠ‚ï¼Œå‡å°‘å…¼å®¹æ€§æˆæœ¬ã€‚åç»­x86æ¶æ„ï¼ˆå¦‚386ã€å¥”è…¾ï¼‰å»¶ç»­äº†è¿™ä¸€è®¾è®¡ï¼Œè€ŒAMDçš„x86_64æ¶æ„ä¹Ÿå…¼å®¹å°ç«¯åºï¼Œæœ€ç»ˆè®©å°ç«¯åºæˆä¸ºPCã€æœåŠ¡å™¨çš„ä¸»æµï¼ˆç›®å‰å…¨çƒ90%ä»¥ä¸Šçš„ä¸ªäººè®¡ç®—æœºå’ŒæœåŠ¡å™¨é‡‡ç”¨x86/x86_64æ¶æ„ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§ç«¯åºçš„åšå®ˆ&lt;/strong&gt;ï¼šåŒæœŸçš„æ‘©æ‰˜ç½—æ‹‰ï¼ˆMotorolaï¼‰68000å¤„ç†å™¨ï¼ˆç”¨äºæ—©æœŸè‹¹æœMacã€å·¥ä½œç«™ï¼‰ã€IBMçš„System/360å¤§å‹æœºï¼Œä»¥åŠåæ¥çš„PowerPCæ¶æ„ï¼ˆæ—©æœŸMacã€æ¸¸æˆä¸»æœºï¼‰ï¼Œå‡é‡‡ç”¨å¤§ç«¯åºã€‚å¤§ç«¯åºçš„ä¼˜åŠ¿æ˜¯â€œç¬¦åˆäººç±»é˜…è¯»ä¹ æƒ¯â€â€”â€”æ•°å€¼çš„é«˜ä½åœ¨å‰ï¼Œä¸æˆ‘ä»¬ä¹¦å†™â€œ1234â€çš„é¡ºåºä¸€è‡´ï¼Œæ—©æœŸåœ¨åµŒå…¥å¼è®¾å¤‡ã€é€šä¿¡è®¾å¤‡ä¸­åº”ç”¨å¹¿æ³›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-ç°çŠ¶å°ç«¯ä¸ºä¸»å¤§ç«¯å±€éƒ¨ç•™å­˜"&gt;&lt;a href="#2-%e7%8e%b0%e7%8a%b6%e5%b0%8f%e7%ab%af%e4%b8%ba%e4%b8%bb%e5%a4%a7%e7%ab%af%e5%b1%80%e9%83%a8%e7%95%99%e5%ad%98" class="header-anchor"&gt;&lt;/a&gt;2. ç°çŠ¶ï¼šå°ç«¯ä¸ºä¸»ï¼Œå¤§ç«¯å±€éƒ¨ç•™å­˜
&lt;/h3&gt;&lt;p&gt;éšç€x86æ¶æ„çš„æ™®åŠï¼Œå°ç«¯åºæˆä¸ºæ¶ˆè´¹çº§ç¡¬ä»¶çš„ç»å¯¹ä¸»æµï¼Œä½†å¤§ç«¯åºå¹¶æœªæ¶ˆå¤±ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åµŒå…¥å¼é¢†åŸŸï¼šéƒ¨åˆ†ARMæ¶æ„çš„èŠ¯ç‰‡ï¼ˆå¦‚ç”¨äºè·¯ç”±å™¨ã€ç‰©è”ç½‘è®¾å¤‡çš„ARM Cortex-Mç³»åˆ—ï¼‰æ”¯æŒå¤§ç«¯åºæ¨¡å¼ï¼›&lt;/li&gt;
&lt;li&gt;ä¸“ç”¨è®¾å¤‡ï¼šå¤§å‹æœºï¼ˆå¦‚IBM zSeriesï¼‰ã€éƒ¨åˆ†ç½‘ç»œè®¾å¤‡ä»æ²¿ç”¨å¤§ç«¯åºï¼›&lt;/li&gt;
&lt;li&gt;æ ‡å‡†åŒ–åœºæ™¯ï¼šç½‘ç»œä¼ è¾“ã€æ–‡ä»¶æ ¼å¼ï¼ˆå¦‚JPEGã€PNGï¼‰ã€æ•°æ®å­˜å‚¨ï¼ˆå¦‚æ•°æ®åº“ï¼‰ï¼Œå‡ä»¥å¤§ç«¯åºä¸ºâ€œæ ‡å‡†å­—èŠ‚åºâ€ï¼Œé¿å…è·¨è®¾å¤‡è§£æé”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="ä¸‰ç”¨rustç†è§£å­—èŠ‚åºä»æ£€æµ‹åˆ°è½¬æ¢çš„å®è·µ"&gt;&lt;a href="#%e4%b8%89%e7%94%a8rust%e7%90%86%e8%a7%a3%e5%ad%97%e8%8a%82%e5%ba%8f%e4%bb%8e%e6%a3%80%e6%b5%8b%e5%88%b0%e8%bd%ac%e6%8d%a2%e7%9a%84%e5%ae%9e%e8%b7%b5" class="header-anchor"&gt;&lt;/a&gt;ä¸‰ã€ç”¨Rustç†è§£å­—èŠ‚åºï¼šä»æ£€æµ‹åˆ°è½¬æ¢çš„å®è·µ
&lt;/h2&gt;&lt;p&gt;Rustä½œä¸ºä¸€é—¨â€œæ³¨é‡å®‰å…¨æ€§ä¸è·¨å¹³å°æ€§â€çš„è¯­è¨€ï¼Œä¸ä»…æä¾›äº†æ£€æµ‹ç³»ç»Ÿå­—èŠ‚åºçš„å·¥å…·ï¼Œè¿˜å°è£…äº†å­—èŠ‚åºè½¬æ¢çš„æ ‡å‡†æ–¹æ³•ï¼Œèƒ½è®©æˆ‘ä»¬ç›´è§‚çœ‹åˆ°å­—èŠ‚åºçš„å·®å¼‚ã€‚&lt;/p&gt;
&lt;h3 id="1-ç¬¬ä¸€æ­¥æ£€æµ‹å½“å‰ç³»ç»Ÿçš„å­—èŠ‚åº"&gt;&lt;a href="#1-%e7%ac%ac%e4%b8%80%e6%ad%a5%e6%a3%80%e6%b5%8b%e5%bd%93%e5%89%8d%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%ad%97%e8%8a%82%e5%ba%8f" class="header-anchor"&gt;&lt;/a&gt;1. ç¬¬ä¸€æ­¥ï¼šæ£€æµ‹å½“å‰ç³»ç»Ÿçš„å­—èŠ‚åº
&lt;/h3&gt;&lt;p&gt;Rusté€šè¿‡&lt;code&gt;cfg!(target_endian)&lt;/code&gt;å®ç›´æ¥åˆ¤æ–­ç³»ç»Ÿå­—èŠ‚åºï¼Œæ— éœ€å¤æ‚çš„å†…å­˜æ“ä½œï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;å½“å‰ç³»ç»Ÿå­—èŠ‚åºï¼š&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;match&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;cfg!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target_endian&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;little&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;âœ… å°ç«¯åºï¼ˆx86/x86_64æ¶æ„å¸¸è§ï¼‰&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;big&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;âœ… å¤§ç«¯åºï¼ˆéƒ¨åˆ†ARM/å¤§å‹æœºå¸¸è§ï¼‰&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;â“ æœªçŸ¥å­—èŠ‚åºï¼ˆæç½•è§ï¼‰&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨PCä¸Šè¿è¡Œä¼šè¾“å‡ºâ€œå°ç«¯åºâ€ï¼Œè€Œåœ¨æ”¯æŒå¤§ç«¯åºçš„ARMè®¾å¤‡ä¸Šåˆ™è¾“å‡ºâ€œå¤§ç«¯åºâ€ã€‚&lt;/p&gt;
&lt;h3 id="2-ç¬¬äºŒæ­¥è§‚å¯Ÿå†…å­˜ä¸­çš„å­—èŠ‚å¸ƒå±€"&gt;&lt;a href="#2-%e7%ac%ac%e4%ba%8c%e6%ad%a5%e8%a7%82%e5%af%9f%e5%86%85%e5%ad%98%e4%b8%ad%e7%9a%84%e5%ad%97%e8%8a%82%e5%b8%83%e5%b1%80" class="header-anchor"&gt;&lt;/a&gt;2. ç¬¬äºŒæ­¥ï¼šè§‚å¯Ÿå†…å­˜ä¸­çš„å­—èŠ‚å¸ƒå±€
&lt;/h3&gt;&lt;p&gt;è¦çœ‹åˆ°â€œæ•°å€¼åœ¨å†…å­˜ä¸­çš„çœŸå®æ’åˆ—â€ï¼Œå¯ä»¥é€šè¿‡&lt;code&gt;std::mem::transmute&lt;/code&gt;å°†æ•´æ•°è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼ˆæ³¨æ„ï¼š&lt;code&gt;transmute&lt;/code&gt;æ˜¯ unsafe æ“ä½œï¼Œéœ€ç¡®ä¿ç±»å‹å¤§å°ä¸€è‡´ï¼‰ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å®šä¹‰ä¸€ä¸ª16ä½æ•´æ•°ï¼š0x12ï¼ˆé«˜ä½ï¼‰ã€0x34ï¼ˆä½ä½ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;: &lt;span class="kt"&gt;u16&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1234&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;åŸå§‹æ•°å€¼ï¼š0x&lt;/span&gt;&lt;span class="si"&gt;{:X}&lt;/span&gt;&lt;span class="s"&gt;ï¼ˆåè¿›åˆ¶ï¼š&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;ï¼‰&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å°†æ•´æ•°è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼ŒæŸ¥çœ‹å†…å­˜å¸ƒå±€
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;: &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;u8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;unsafe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;::&lt;span class="n"&gt;transmute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;å†…å­˜ä¸­çš„å­—èŠ‚æ’åˆ—ï¼š[0x&lt;/span&gt;&lt;span class="si"&gt;{:X}&lt;/span&gt;&lt;span class="s"&gt;, 0x&lt;/span&gt;&lt;span class="si"&gt;{:X}&lt;/span&gt;&lt;span class="s"&gt;]&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è§£é‡Šå¸ƒå±€å«ä¹‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;cfg!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target_endian&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;little&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;ğŸ“Œ å°ç«¯åºï¼šä½ä½å­—èŠ‚0x34å­˜ä½åœ°å€ï¼ˆæ•°ç»„ç¬¬1ä½ï¼‰ï¼Œé«˜ä½å­—èŠ‚0x12å­˜é«˜åœ°å€ï¼ˆæ•°ç»„ç¬¬2ä½ï¼‰&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;ğŸ“Œ å¤§ç«¯åºï¼šé«˜ä½å­—èŠ‚0x12å­˜ä½åœ°å€ï¼ˆæ•°ç»„ç¬¬1ä½ï¼‰ï¼Œä½ä½å­—èŠ‚0x34å­˜é«˜åœ°å€ï¼ˆæ•°ç»„ç¬¬2ä½ï¼‰&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨PCä¸Šè¿è¡Œçš„è¾“å‡ºå¦‚ä¸‹ï¼Œæ¸…æ™°å±•ç¤ºäº†å°ç«¯åºçš„â€œä½ä½åœ¨å‰â€ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;åŸå§‹æ•°å€¼ï¼š0x1234ï¼ˆåè¿›åˆ¶ï¼š4660ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;å†…å­˜ä¸­çš„å­—èŠ‚æ’åˆ—ï¼š[0x34, 0x12]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ğŸ“Œ å°ç«¯åºï¼šä½ä½å­—èŠ‚0x34å­˜ä½åœ°å€ï¼ˆæ•°ç»„ç¬¬1ä½ï¼‰ï¼Œé«˜ä½å­—èŠ‚0x12å­˜é«˜åœ°å€ï¼ˆæ•°ç»„ç¬¬2ä½ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="3-ç¬¬ä¸‰æ­¥å­—èŠ‚åºè½¬æ¢çš„æ ¸å¿ƒé€»è¾‘"&gt;&lt;a href="#3-%e7%ac%ac%e4%b8%89%e6%ad%a5%e5%ad%97%e8%8a%82%e5%ba%8f%e8%bd%ac%e6%8d%a2%e7%9a%84%e6%a0%b8%e5%bf%83%e9%80%bb%e8%be%91" class="header-anchor"&gt;&lt;/a&gt;3. ç¬¬ä¸‰æ­¥ï¼šå­—èŠ‚åºè½¬æ¢çš„æ ¸å¿ƒé€»è¾‘
&lt;/h3&gt;&lt;p&gt;Rustæ ‡å‡†åº“ä¸ºæ‰€æœ‰æ•´æ•°ç±»å‹ï¼ˆ&lt;code&gt;u16&lt;/code&gt;/&lt;code&gt;i32&lt;/code&gt;/&lt;code&gt;u64&lt;/code&gt;ç­‰ï¼‰æä¾›äº†4ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼Œè§£å†³è·¨å¹³å°æ•°æ®äº¤äº’é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;to_be()&lt;/code&gt;ï¼šå°†å½“å‰æ•°å€¼è½¬æ¢ä¸ºâ€œæŒ‰å¤§ç«¯åºå­˜å‚¨â€çš„æ–°å€¼ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;to_le()&lt;/code&gt;ï¼šå°†å½“å‰æ•°å€¼è½¬æ¢ä¸ºâ€œæŒ‰å°ç«¯åºå­˜å‚¨â€çš„æ–°å€¼ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;from_be()&lt;/code&gt;ï¼šå°†â€œå¤§ç«¯åºå­˜å‚¨çš„æ•°å€¼â€è½¬æ¢ä¸ºä¸»æœºå­—èŠ‚åºï¼ˆå½“å‰ç³»ç»Ÿçš„å­—èŠ‚åºï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;from_le()&lt;/code&gt;ï¼šå°†â€œå°ç«¯åºå­˜å‚¨çš„æ•°å€¼â€è½¬æ¢ä¸ºä¸»æœºå­—èŠ‚åºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†â€œå°ç«¯ç³»ç»Ÿå‘å¤§ç«¯æ ¼å¼è½¬æ¢â€çš„è¿‡ç¨‹ï¼Œå…³é”®æ˜¯è§‚å¯Ÿâ€œå†…å­˜å¸ƒå±€çš„å˜åŒ–â€ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;original&lt;/span&gt;: &lt;span class="kt"&gt;u16&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1234&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;åŸå§‹æ•°å€¼ï¼š0x&lt;/span&gt;&lt;span class="si"&gt;{:X}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;original&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è½¬æ¢ä¸ºå¤§ç«¯åºæ ¼å¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be_num&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;original&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_be&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è½¬æ¢ä¸ºå°ç«¯åºæ ¼å¼ï¼ˆå°ç«¯ç³»ç»Ÿä¸Šç­‰äºåŸå§‹å€¼ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;le_num&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;original&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_le&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// æ‰“å°æ•°å€¼ï¼šæ³¨æ„be_numçš„æ•°å€¼â€œçœ‹ä¼¼åäº†â€ï¼Œä½†å†…å­˜å¸ƒå±€æ˜¯å¯¹çš„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;å¤§ç«¯åºè½¬æ¢åï¼ˆæ•°å€¼ï¼‰ï¼š0x&lt;/span&gt;&lt;span class="si"&gt;{:X}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be_num&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å°ç«¯ç³»ç»Ÿä¸Šè¾“å‡º0x3412
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;å°ç«¯åºè½¬æ¢åï¼ˆæ•°å€¼ï¼‰ï¼š0x&lt;/span&gt;&lt;span class="si"&gt;{:X}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;le_num&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å°ç«¯ç³»ç»Ÿä¸Šè¾“å‡º0x1234
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// æŸ¥çœ‹å†…å­˜å¸ƒå±€ï¼šbe_numçš„å†…å­˜æ˜¯å¤§ç«¯åºçš„[0x12, 0x34]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be_bytes&lt;/span&gt;: &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;u8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;unsafe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;::&lt;span class="n"&gt;transmute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;be_num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;å¤§ç«¯åºè½¬æ¢åï¼ˆå†…å­˜ï¼‰ï¼š[0x&lt;/span&gt;&lt;span class="si"&gt;{:X}&lt;/span&gt;&lt;span class="s"&gt;, 0x&lt;/span&gt;&lt;span class="si"&gt;{:X}&lt;/span&gt;&lt;span class="s"&gt;]&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be_bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be_bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¾“å‡ºç»“æœï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;åŸå§‹æ•°å€¼ï¼š0x1234
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;å¤§ç«¯åºè½¬æ¢åï¼ˆæ•°å€¼ï¼‰ï¼š0x3412
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;å°ç«¯åºè½¬æ¢åï¼ˆæ•°å€¼ï¼‰ï¼š0x1234
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;å¤§ç«¯åºè½¬æ¢åï¼ˆå†…å­˜ï¼‰ï¼š[0x12, 0x34]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™é‡Œçš„å…³é”®è®¤çŸ¥æ˜¯ï¼š&lt;code&gt;to_be()&lt;/code&gt;çš„ç›®çš„ä¸æ˜¯â€œä¿®æ”¹æ•°å€¼â€ï¼Œè€Œæ˜¯â€œè®©æ•°å€¼çš„å†…å­˜å¸ƒå±€ç¬¦åˆå¤§ç«¯åºâ€ã€‚å°ç«¯ç³»ç»Ÿä¸Š&lt;code&gt;be_num&lt;/code&gt;çš„æ•°å€¼æ˜¯&lt;code&gt;0x3412&lt;/code&gt;ï¼Œä½†å®ƒåœ¨å†…å­˜ä¸­æ˜¯&lt;code&gt;[0x12, 0x34]&lt;/code&gt;â€”â€”è¿™æ­£æ˜¯å¤§ç«¯åºçš„æ ‡å‡†å¸ƒå±€ï¼Œèƒ½è¢«å…¶ä»–è®¾å¤‡æ­£ç¡®è§£æã€‚&lt;/p&gt;
&lt;h2 id="å››ä¸ºä»€ä¹ˆç½‘ç»œä¼ è¾“å¿…é¡»ç”¨å¤§ç«¯åº"&gt;&lt;a href="#%e5%9b%9b%e4%b8%ba%e4%bb%80%e4%b9%88%e7%bd%91%e7%bb%9c%e4%bc%a0%e8%be%93%e5%bf%85%e9%a1%bb%e7%94%a8%e5%a4%a7%e7%ab%af%e5%ba%8f" class="header-anchor"&gt;&lt;/a&gt;å››ã€ä¸ºä»€ä¹ˆç½‘ç»œä¼ è¾“å¿…é¡»ç”¨å¤§ç«¯åºï¼Ÿ
&lt;/h2&gt;&lt;p&gt;æ—¢ç„¶å°ç«¯åºæ˜¯ä¸»æµï¼Œä¸ºä»€ä¹ˆTCP/IPã€UDPç­‰ç½‘ç»œåè®®ï¼Œéƒ½å¼ºåˆ¶è¦æ±‚ç”¨å¤§ç«¯åºï¼ˆä¹Ÿç§°â€œç½‘ç»œå­—èŠ‚åºâ€ï¼‰ä¼ è¾“æ•°æ®ï¼Ÿç­”æ¡ˆæ˜¯â€œé¿å…è·¨è®¾å¤‡çš„è§£ææ··ä¹±â€ï¼Œæœ¬è´¨æ˜¯è¡Œä¸šçš„â€œæ ‡å‡†åŒ–å¦¥åâ€ã€‚&lt;/p&gt;
&lt;h3 id="1-æ ¸å¿ƒåŸå› æ¶ˆé™¤æ–¹è¨€å£å’"&gt;&lt;a href="#1-%e6%a0%b8%e5%bf%83%e5%8e%9f%e5%9b%a0%e6%b6%88%e9%99%a4%e6%96%b9%e8%a8%80%e5%a3%81%e5%9e%92" class="header-anchor"&gt;&lt;/a&gt;1. æ ¸å¿ƒåŸå› ï¼šæ¶ˆé™¤â€œæ–¹è¨€å£å’â€
&lt;/h3&gt;&lt;p&gt;ç½‘ç»œä¼ è¾“çš„æ ¸å¿ƒæ˜¯â€œè·¨è®¾å¤‡é€šä¿¡â€â€”â€”å‘é€æ–¹å¯èƒ½æ˜¯å°ç«¯åºçš„PCï¼Œæ¥æ”¶æ–¹å¯èƒ½æ˜¯å¤§ç«¯åºçš„è·¯ç”±å™¨ï¼›æˆ–è€…å‘é€æ–¹æ˜¯åµŒå…¥å¼è®¾å¤‡ï¼Œæ¥æ”¶æ–¹æ˜¯æœåŠ¡å™¨ã€‚å¦‚æœæ²¡æœ‰ç»Ÿä¸€çš„å­—èŠ‚åºæ ‡å‡†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°ç«¯åºè®¾å¤‡å‘é€&lt;code&gt;0x1234&lt;/code&gt;ï¼ˆå†…å­˜&lt;code&gt;[0x34, 0x12]&lt;/code&gt;ï¼‰ï¼Œå¤§ç«¯åºè®¾å¤‡ä¼šæŒ‰â€œå¤§ç«¯è§„åˆ™â€è§£æä¸º&lt;code&gt;0x3412&lt;/code&gt;ï¼Œæ•°å€¼ç›´æ¥é”™è¯¯ï¼›&lt;/li&gt;
&lt;li&gt;å¤§ç«¯åºè®¾å¤‡å‘é€&lt;code&gt;0x1234&lt;/code&gt;ï¼ˆå†…å­˜&lt;code&gt;[0x12, 0x34]&lt;/code&gt;ï¼‰ï¼Œå°ç«¯åºè®¾å¤‡ä¼šæŒ‰â€œå°ç«¯è§„åˆ™â€è§£æä¸º&lt;code&gt;0x3412&lt;/code&gt;ï¼ŒåŒæ ·é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è€Œè§„å®šâ€œç½‘ç»œä¼ è¾“å¿…é¡»ç”¨å¤§ç«¯åºâ€åï¼Œæ‰€æœ‰è®¾å¤‡éƒ½éµå¾ªåŒä¸€è§„åˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‘é€æ–¹ï¼šæ— è®ºè‡ªèº«æ˜¯å¤§ç«¯è¿˜æ˜¯å°ç«¯ï¼Œå…ˆå°†æ•°æ®è½¬æ¢ä¸ºå¤§ç«¯åºæ ¼å¼ï¼›&lt;/li&gt;
&lt;li&gt;æ¥æ”¶æ–¹ï¼šæ”¶åˆ°æ•°æ®åï¼Œå…ˆæŒ‰å¤§ç«¯åºè§£æï¼Œå†è½¬æ¢ä¸ºè‡ªèº«çš„å­—èŠ‚åºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ ·ä¸€æ¥ï¼Œæ— è®ºè®¾å¤‡çš„â€œæ–¹è¨€â€æ˜¯ä»€ä¹ˆï¼Œéƒ½èƒ½é€šè¿‡â€œæ ‡å‡†å­—èŠ‚åºâ€å®ç°æ­£ç¡®é€šä¿¡ã€‚&lt;/p&gt;
&lt;h3 id="2-å†å²é€‰æ‹©å¤§ç«¯åºçš„å¤©ç„¶ä¼˜åŠ¿"&gt;&lt;a href="#2-%e5%8e%86%e5%8f%b2%e9%80%89%e6%8b%a9%e5%a4%a7%e7%ab%af%e5%ba%8f%e7%9a%84%e5%a4%a9%e7%84%b6%e4%bc%98%e5%8a%bf" class="header-anchor"&gt;&lt;/a&gt;2. å†å²é€‰æ‹©ï¼šå¤§ç«¯åºçš„â€œå¤©ç„¶ä¼˜åŠ¿â€
&lt;/h3&gt;&lt;p&gt;æ—©æœŸç½‘ç»œè®¾å¤‡ï¼ˆå¦‚è·¯ç”±å™¨ã€äº¤æ¢æœºï¼‰å¤šé‡‡ç”¨å¤§ç«¯åºæ¶æ„ï¼ˆå¦‚æ‘©æ‰˜ç½—æ‹‰68000ï¼‰ï¼Œå¤§ç«¯åºæˆä¸ºç½‘ç»œåè®®çš„é»˜è®¤é€‰æ‹©ã€‚æ­¤å¤–ï¼Œå¤§ç«¯åºçš„â€œé«˜ä½åœ¨å‰â€ç¬¦åˆäººç±»å¯¹æ•°å€¼çš„é˜…è¯»ä¹ æƒ¯ï¼Œä¾¿äºå¼€å‘è€…è°ƒè¯•ï¼ˆå¦‚æŠ“åŒ…æ—¶ç›´æ¥è¯»å–æ•°å€¼ï¼Œæ— éœ€åè½¬å­—èŠ‚ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ç°åœ¨å°ç«¯åºè®¾å¤‡å ä¸»æµï¼Œä½†â€œç½‘ç»œå­—èŠ‚åºä¸ºå¤§ç«¯â€çš„æ ‡å‡†å·²å»¶ç»­æ•°åå¹´ï¼Œæ‰€æœ‰ç½‘ç»œåè®®ã€ç¼–ç¨‹è¯­è¨€ï¼ˆåŒ…æ‹¬Rustï¼‰éƒ½å·²é€‚é…è¿™ä¸€è§„åˆ™ï¼Œæ— éœ€ä¹Ÿæ— æ³•è½»æ˜“æ›´æ”¹ã€‚&lt;/p&gt;
&lt;h2 id="ç»“è¯­å­—èŠ‚åºéšè—çš„è·¨å¹³å°å¯†ç "&gt;&lt;a href="#%e7%bb%93%e8%af%ad%e5%ad%97%e8%8a%82%e5%ba%8f%e9%9a%90%e8%97%8f%e7%9a%84%e8%b7%a8%e5%b9%b3%e5%8f%b0%e5%af%86%e7%a0%81" class="header-anchor"&gt;&lt;/a&gt;ç»“è¯­ï¼šå­—èŠ‚åºâ€”â€”éšè—çš„â€œè·¨å¹³å°å¯†ç â€
&lt;/h2&gt;&lt;p&gt;å­—èŠ‚åºæ˜¯è®¡ç®—æœºç¡¬ä»¶å‘å±•çš„â€œå†å²é—ç•™äº§ç‰©â€ï¼Œå®ƒçœ‹ä¼¼å¾®å°ï¼Œå´æ·±åˆ»å½±å“ç€è·¨è®¾å¤‡æ•°æ®äº¤äº’ã€‚ç†è§£å­—èŠ‚åºï¼Œä¸ä»…èƒ½é¿å…ç½‘ç»œç¼–ç¨‹ã€æ–‡ä»¶è§£æä¸­çš„â€œè¯¡å¼‚bugâ€ï¼Œæ›´èƒ½è®©æˆ‘ä»¬çœ‹æ¸…ï¼šè®¡ç®—æœºä¸–ç•Œçš„â€œç»Ÿä¸€â€ï¼Œå¾€å¾€æ˜¯åœ¨â€œå·®å¼‚â€åŸºç¡€ä¸Šé€šè¿‡æ ‡å‡†åŒ–å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºRustå¼€å‘è€…è€Œè¨€ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†å¤æ‚çš„å­—èŠ‚åè½¬é€»è¾‘â€”â€”æ ‡å‡†åº“çš„&lt;code&gt;to_be()&lt;/code&gt;/&lt;code&gt;from_be()&lt;/code&gt;ç­‰æ–¹æ³•ï¼Œå·²ä¸ºæˆ‘ä»¬å°è£…äº†æ‰€æœ‰ç»†èŠ‚ã€‚ä½†èƒŒåçš„åŸç†ä»éœ€æŒæ¡ï¼šå½“ä½ è°ƒç”¨&lt;code&gt;to_be()&lt;/code&gt;æ—¶ï¼Œæœ¬è´¨æ˜¯åœ¨ä¸ºæ•°æ®â€œè´´ä¸Šç½‘ç»œæ ‡å‡†çš„æ ‡ç­¾â€ï¼Œç¡®ä¿å®ƒèƒ½åœ¨ä¸åŒâ€œæ–¹è¨€â€çš„è®¾å¤‡é—´é¡ºç•…é€šè¡Œã€‚&lt;/p&gt;</description></item><item><title>æ·±åº¦è§£æ Rust ä¸­è¯»å–æ–‡æœ¬æ–‡ä»¶ä¸å­—èŠ‚æµï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰çš„æ ¸å¿ƒæ³¨æ„äº‹é¡¹</title><link>https://techinsight.pages.dev/p/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90-rust-%E4%B8%AD%E8%AF%BB%E5%8F%96%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E4%B8%8E%E5%AD%97%E8%8A%82%E6%B5%81%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E7%9A%84%E6%A0%B8%E5%BF%83%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/</link><pubDate>Sat, 01 Nov 2025 23:13:20 +0800</pubDate><guid>https://techinsight.pages.dev/p/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90-rust-%E4%B8%AD%E8%AF%BB%E5%8F%96%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E4%B8%8E%E5%AD%97%E8%8A%82%E6%B5%81%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E7%9A%84%E6%A0%B8%E5%BF%83%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/</guid><description>&lt;p&gt;åœ¨ Rust å¼€å‘ä¸­ï¼Œæ–‡ä»¶è¯»å–æ˜¯æä¸ºå¸¸è§çš„æ“ä½œåœºæ™¯ï¼Œè€Œæ–‡æœ¬æ–‡ä»¶ä¸å­—èŠ‚æµï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰çš„è¯»å–é€»è¾‘å› æ•°æ®æ ¼å¼çš„æœ¬è´¨å·®å¼‚ï¼Œå­˜åœ¨æˆªç„¶ä¸åŒçš„å¤„ç†æ€è·¯ä¸æ³¨æ„äº‹é¡¹ã€‚æ–‡æœ¬æ–‡ä»¶ä»¥äººç±»å¯ç†è§£çš„å­—ç¬¦åºåˆ—ä¸ºæ ¸å¿ƒï¼Œéœ€å…³æ³¨ç¼–ç è§£æä¸å­—ç¬¦å®Œæ•´æ€§ï¼›äºŒè¿›åˆ¶æ–‡ä»¶åˆ™ä»¥åŸå§‹å­—èŠ‚ä¸ºè½½ä½“ï¼Œéœ€ä¿éšœæ•°æ®ç»“æ„çš„ç²¾ç¡®è¿˜åŸä¸è¯»å†™ä¸€è‡´æ€§ã€‚æœ¬æ–‡å°†ä»åº•å±‚åŸç†å‡ºå‘ï¼Œç³»ç»Ÿå‰–æä¸¤ç±»æ–‡ä»¶è¯»å–çš„æ ¸å¿ƒæ³¨æ„äº‹é¡¹ï¼Œç»“åˆ Rust æ ‡å‡†åº“ API ä¸å®è·µæ¡ˆä¾‹ï¼Œä¸ºå¼€å‘è€…æä¾›å…¨é¢çš„æ“ä½œæŒ‡å—ï¼Œç¡®ä¿åœ¨ä¸åŒåœºæ™¯ä¸‹å®ç°å®‰å…¨ã€é«˜æ•ˆçš„æ–‡ä»¶è¯»å–ã€‚&lt;/p&gt;
&lt;h2 id="ä¸€è¯»å–æ–‡æœ¬æ–‡ä»¶èšç„¦ç¼–ç è§£æä¸å­—ç¬¦å®Œæ•´æ€§"&gt;&lt;a href="#%e4%b8%80%e8%af%bb%e5%8f%96%e6%96%87%e6%9c%ac%e6%96%87%e4%bb%b6%e8%81%9a%e7%84%a6%e7%bc%96%e7%a0%81%e8%a7%a3%e6%9e%90%e4%b8%8e%e5%ad%97%e7%ac%a6%e5%ae%8c%e6%95%b4%e6%80%a7" class="header-anchor"&gt;&lt;/a&gt;ä¸€ã€è¯»å–æ–‡æœ¬æ–‡ä»¶ï¼šèšç„¦ç¼–ç è§£æä¸å­—ç¬¦å®Œæ•´æ€§
&lt;/h2&gt;&lt;p&gt;æ–‡æœ¬æ–‡ä»¶çš„æœ¬è´¨æ˜¯ â€œæŒ‰ç‰¹å®šç¼–ç è§„åˆ™å­˜å‚¨çš„å­—ç¬¦åºåˆ—â€ï¼ˆå¦‚ UTF-8ã€GBKã€UTF-16 ç­‰ï¼‰ï¼Œè¯»å–æ—¶çš„æ ¸å¿ƒæŒ‘æˆ˜åœ¨äº&lt;strong&gt;æ­£ç¡®è§£æç¼–ç æ ¼å¼&lt;/strong&gt;ä¸&lt;strong&gt;ä¿éšœå­—ç¬¦ä¸è¢«æˆªæ–­&lt;/strong&gt;ã€‚Rust æ ‡å‡†åº“è™½é»˜è®¤ä»¥ UTF-8 å¤„ç†æ–‡æœ¬ï¼Œä½†å®é™…å¼€å‘ä¸­éœ€åº”å¯¹å¤šæ ·ç¼–ç åœºæ™¯ï¼ŒåŒæ—¶è§„é¿å› æ–‡ä»¶æŸåã€è¯»å–ä¸å®Œæ•´å¯¼è‡´çš„å­—ç¬¦è§£æé”™è¯¯ã€‚&lt;/p&gt;
&lt;h3 id="1-ç¼–ç å¤„ç†ä»é»˜è®¤-utf-8-åˆ°å¤šç¼–ç å…¼å®¹"&gt;&lt;a href="#1-%e7%bc%96%e7%a0%81%e5%a4%84%e7%90%86%e4%bb%8e%e9%bb%98%e8%ae%a4-utf-8-%e5%88%b0%e5%a4%9a%e7%bc%96%e7%a0%81%e5%85%bc%e5%ae%b9" class="header-anchor"&gt;&lt;/a&gt;1. ç¼–ç å¤„ç†ï¼šä»é»˜è®¤ UTF-8 åˆ°å¤šç¼–ç å…¼å®¹
&lt;/h3&gt;&lt;p&gt;Rust æ ‡å‡†åº“ï¼ˆ&lt;code&gt;std::fs&lt;/code&gt;ï¼‰çš„æ–‡æœ¬è¯»å– APIï¼ˆå¦‚&lt;code&gt;read_to_string&lt;/code&gt;ï¼‰é»˜è®¤å‡è®¾æ–‡ä»¶ä¸º UTF-8 ç¼–ç ï¼Œè‹¥æ–‡ä»¶é‡‡ç”¨å…¶ä»–ç¼–ç ï¼ˆå¦‚ Windows ç³»ç»Ÿå¸¸è§çš„ GBKã€UTF-16ï¼‰ï¼Œç›´æ¥è¯»å–ä¼šè§¦å‘ç¼–ç é”™è¯¯ï¼Œè¿™æ˜¯æ–‡æœ¬æ–‡ä»¶è¯»å–çš„é¦–è¦æ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h4 id="1é»˜è®¤-utf-8-è¯»å–çš„é£é™©ä¸å¤„ç†"&gt;&lt;a href="#1%e9%bb%98%e8%ae%a4-utf-8-%e8%af%bb%e5%8f%96%e7%9a%84%e9%a3%8e%e9%99%a9%e4%b8%8e%e5%a4%84%e7%90%86" class="header-anchor"&gt;&lt;/a&gt;ï¼ˆ1ï¼‰é»˜è®¤ UTF-8 è¯»å–çš„é£é™©ä¸å¤„ç†
&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨&lt;code&gt;std::fs::read_to_string&lt;/code&gt;è¯»å–é UTF-8 ç¼–ç æ–‡ä»¶æ—¶ï¼Œä¼šè¿”å›&lt;code&gt;io::Error&lt;/code&gt;ï¼ˆé”™è¯¯ç±»å‹ä¸º&lt;code&gt;InvalidData&lt;/code&gt;ï¼‰ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒæˆ–æ•°æ®è¯»å–å¤±è´¥ã€‚ä¾‹å¦‚ï¼Œè¯»å– GBK ç¼–ç çš„ä¸­æ–‡æ–‡æœ¬æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;fs&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è¯»å– GBK ç¼–ç çš„æ–‡æœ¬æ–‡ä»¶ï¼Œé»˜è®¤ UTF-8 è§£æä¼šå¤±è´¥
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;match&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fs&lt;/span&gt;::&lt;span class="n"&gt;read_to_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;gbk_text.txt&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Ok&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;å†…å®¹ï¼š&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Err&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;eprintln!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;è¯»å–é”™è¯¯ï¼š&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è¾“å‡º &amp;#34;è¯»å–é”™è¯¯ï¼šinvalid utf-8 sequence of 2 bytes from index 0&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸å¯æƒ³å½“ç„¶åœ°å‡è®¾æ–‡æœ¬æ–‡ä»¶ä¸º UTF-8 ç¼–ç ï¼Œå°¤å…¶æ˜¯åœ¨è·¨å¹³å°åœºæ™¯ï¼ˆå¦‚ Windows ç”Ÿæˆçš„æ–‡ä»¶å¯èƒ½ä¸º GBK æˆ– UTF-16ï¼‰æˆ–å¤„ç†ç¬¬ä¸‰æ–¹æ–‡ä»¶æ—¶ï¼Œéœ€å…ˆæ˜ç¡®æ–‡ä»¶ç¼–ç æ ¼å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è‹¥æ— æ³•ç¡®å®šç¼–ç ï¼Œéœ€é€šè¿‡æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆå¦‚ UTF-8 BOMã€UTF-16 BOMï¼‰æˆ–å¤–éƒ¨é…ç½®è·å–ç¼–ç ä¿¡æ¯ï¼Œé¿å…ç›²ç›®è¯»å–ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2å¤šç¼–ç æ”¯æŒå€ŸåŠ©ç¬¬ä¸‰æ–¹åº“å®ç°å…¼å®¹"&gt;&lt;a href="#2%e5%a4%9a%e7%bc%96%e7%a0%81%e6%94%af%e6%8c%81%e5%80%9f%e5%8a%a9%e7%ac%ac%e4%b8%89%e6%96%b9%e5%ba%93%e5%ae%9e%e7%8e%b0%e5%85%bc%e5%ae%b9" class="header-anchor"&gt;&lt;/a&gt;ï¼ˆ2ï¼‰å¤šç¼–ç æ”¯æŒï¼šå€ŸåŠ©ç¬¬ä¸‰æ–¹åº“å®ç°å…¼å®¹
&lt;/h4&gt;&lt;p&gt;Rust æ ‡å‡†åº“æœªæä¾›å¤šç¼–ç è§£æèƒ½åŠ›ï¼Œéœ€ä¾èµ–ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚&lt;code&gt;encoding_rs&lt;/code&gt;ã€&lt;code&gt;chardet&lt;/code&gt;ï¼‰å®ç° GBKã€Shift-JIS ç­‰ç¼–ç çš„è§£æã€‚å…¶ä¸­&lt;code&gt;encoding_rs&lt;/code&gt;æ˜¯ Rust ç”Ÿæ€ä¸­ä¸»æµçš„ç¼–ç å¤„ç†åº“ï¼Œæ”¯æŒç»å¤§å¤šæ•°å¸¸è§ç¼–ç ï¼Œä¸”æ€§èƒ½é«˜æ•ˆã€æ—  unsafe ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®è·µæ¡ˆä¾‹ï¼šè¯»å– GBK ç¼–ç æ–‡æœ¬æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨&lt;code&gt;Cargo.toml&lt;/code&gt;ä¸­æ·»åŠ ä¾èµ–ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;dependencies&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;encoding_rs&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;0.8&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;å®ç° GBK ç¼–ç è§£æï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;fs&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;encoding_rs&lt;/span&gt;::&lt;span class="no"&gt;GBK&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;read_gbk_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="kt"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nb"&gt;Result&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Box&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;dyn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;error&lt;/span&gt;::&lt;span class="n"&gt;Error&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 1. å…ˆä»¥å­—èŠ‚æµå½¢å¼è¯»å–æ–‡ä»¶ï¼ˆé¿å…ç¼–ç è§£æå¹²æ‰°ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fs&lt;/span&gt;::&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 2. ä½¿ç”¨ GBK ç¼–ç è§£æå­—èŠ‚æµï¼Œå¿½ç•¥æ— æ•ˆå­—èŠ‚ï¼ˆæˆ–æ ¹æ®éœ€æ±‚å¤„ç†ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;had_errors&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="no"&gt;GBK&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 3. å¤„ç†ç¼–ç é”™è¯¯ï¼ˆå¯é€‰ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚å†³å®šæ˜¯å¦ç»ˆæ­¢ç¨‹åºï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;had_errors&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;eprintln!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;è­¦å‘Šï¼šæ–‡ä»¶å­˜åœ¨æ— æ•ˆ GBK ç¼–ç å­—ç¬¦ï¼Œå·²å¿½ç•¥&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Ok&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;into_owned&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;match&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;read_gbk_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;gbk_text.txt&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Ok&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;GBK æ–‡æœ¬å†…å®¹ï¼š&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Err&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;eprintln!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;è¯»å–é”™è¯¯ï¼š&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è§£æç¼–ç æ—¶éœ€æ˜ç¡® â€œé”™è¯¯å¤„ç†ç­–ç•¥â€ï¼šæ˜¯å¿½ç•¥æ— æ•ˆå­—èŠ‚ï¼ˆå¦‚ä¸Šè¿°æ¡ˆä¾‹ï¼‰ã€æ›¿æ¢ä¸ºå ä½ç¬¦ï¼ˆå¦‚&lt;code&gt;ï¿½&lt;/code&gt;ï¼‰ï¼Œè¿˜æ˜¯ç›´æ¥è¿”å›é”™è¯¯ç»ˆæ­¢ç¨‹åºï¼Œéœ€æ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚æ—¥å¿—åˆ†æã€ç”¨æˆ·æ–‡æ¡£è¯»å–ï¼‰å†³å®šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹äº UTF-16 ç¼–ç æ–‡ä»¶ï¼ˆå¸¸è§äº Windows ç³»ç»Ÿï¼‰ï¼Œéœ€åŒºåˆ† â€œå¤§ç«¯åºï¼ˆUTF-16BEï¼‰â€ ä¸ â€œå°ç«¯åºï¼ˆUTF-16LEï¼‰â€ï¼Œå¯é€šè¿‡æ–‡ä»¶å¤´çš„ BOMï¼ˆå­—èŠ‚é¡ºåºæ ‡è®°ï¼Œ0xFEFFï¼‰è‡ªåŠ¨åˆ¤æ–­ç¼–ç ç«¯åºï¼Œé¿å…å­—ç¬¦é”™ä¹±ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-å­—ç¬¦å®Œæ•´æ€§è§„é¿éƒ¨åˆ†è¯»å–å¯¼è‡´çš„æˆªæ–­é—®é¢˜"&gt;&lt;a href="#2-%e5%ad%97%e7%ac%a6%e5%ae%8c%e6%95%b4%e6%80%a7%e8%a7%84%e9%81%bf%e9%83%a8%e5%88%86%e8%af%bb%e5%8f%96%e5%af%bc%e8%87%b4%e7%9a%84%e6%88%aa%e6%96%ad%e9%97%ae%e9%a2%98" class="header-anchor"&gt;&lt;/a&gt;2. å­—ç¬¦å®Œæ•´æ€§ï¼šè§„é¿éƒ¨åˆ†è¯»å–å¯¼è‡´çš„æˆªæ–­é—®é¢˜
&lt;/h3&gt;&lt;p&gt;æ–‡æœ¬æ–‡ä»¶çš„è¯»å–å¯èƒ½å›  â€œéƒ¨åˆ†è¯»å–â€ï¼ˆå¦‚ä½¿ç”¨&lt;code&gt;read&lt;/code&gt;æ–¹æ³•è¯»å–å›ºå®šå¤§å°ç¼“å†²åŒºï¼‰å¯¼è‡´å­—ç¬¦è¢«æˆªæ–­ â€”â€” å°¤å…¶æ˜¯ UTF-8 ç¼–ç ä¸­ï¼Œä¸€ä¸ªå­—ç¬¦å¯èƒ½å ç”¨ 1~4 å­—èŠ‚ï¼Œè‹¥ç¼“å†²åŒºæ°å¥½æˆªæ–­æŸä¸ªå­—ç¬¦çš„ä¸­é—´å­—èŠ‚ï¼Œä¼šå¯¼è‡´åç»­è§£æå¤±è´¥ã€‚&lt;/p&gt;
&lt;h4 id="1é¿å…ä½¿ç”¨å›ºå®šç¼“å†²åŒºç›´æ¥è¯»å–æ–‡æœ¬"&gt;&lt;a href="#1%e9%81%bf%e5%85%8d%e4%bd%bf%e7%94%a8%e5%9b%ba%e5%ae%9a%e7%bc%93%e5%86%b2%e5%8c%ba%e7%9b%b4%e6%8e%a5%e8%af%bb%e5%8f%96%e6%96%87%e6%9c%ac" class="header-anchor"&gt;&lt;/a&gt;ï¼ˆ1ï¼‰é¿å…ä½¿ç”¨å›ºå®šç¼“å†²åŒºç›´æ¥è¯»å–æ–‡æœ¬
&lt;/h4&gt;&lt;p&gt;Rust çš„&lt;code&gt;std::fs::File&lt;/code&gt;ç±»å‹å®ç°äº†&lt;code&gt;Read&lt;/code&gt; traitï¼Œå…¶&lt;code&gt;read&lt;/code&gt;æ–¹æ³•ä¼šå°è¯•è¯»å–æŒ‡å®šå¤§å°çš„å­—èŠ‚åˆ°ç¼“å†²åŒºï¼Œä½†æ— æ³•ä¿è¯è¯»å–çš„å­—èŠ‚æ°å¥½æ„æˆå®Œæ•´å­—ç¬¦ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;fs&lt;/span&gt;::&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;io&lt;/span&gt;::&lt;span class="n"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;::&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;utf8_text.txt&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;unwrap&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;buf&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;u8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// ç¼“å†²åŒºå¤§å°ä¸º 3 å­—èŠ‚ï¼ˆå¯èƒ½æˆªæ–­ UTF-8 å­—ç¬¦ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;String&lt;/span&gt;::&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// éƒ¨åˆ†è¯»å–å¯èƒ½å¯¼è‡´å­—ç¬¦æˆªæ–­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;loop&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;match&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;buf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Ok&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è¯»å–ç»“æŸ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Ok&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è‹¥ buf[0..n] æ°å¥½æˆªæ–­ UTF-8 å­—ç¬¦ï¼Œfrom_utf8 ä¼šæŠ¥é”™
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;String&lt;/span&gt;::&lt;span class="n"&gt;from_utf8&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;buf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;to_vec&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;unwrap&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;push_str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Err&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;panic!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;è¯»å–é”™è¯¯ï¼š&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸Šè¿°ä»£ç ä¸­ï¼Œè‹¥æ–‡ä»¶åŒ…å«å ç”¨ 4 å­—èŠ‚çš„ UTF-8 å­—ç¬¦ï¼ˆå¦‚ emoji è¡¨æƒ…&lt;code&gt;ğŸ˜€&lt;/code&gt;ï¼‰ï¼Œç¼“å†²åŒºå¤§å°ä¸º 3 å­—èŠ‚æ—¶ï¼Œä¼šæˆªæ–­è¯¥å­—ç¬¦çš„æœ€å 1 å­—èŠ‚ï¼Œå¯¼è‡´&lt;code&gt;from_utf8&lt;/code&gt;è°ƒç”¨å¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é™¤éæ˜ç¡®çŸ¥é“æ–‡æœ¬æ–‡ä»¶çš„ç¼–ç ä¸º â€œå›ºå®šå®½åº¦ç¼–ç â€ï¼ˆå¦‚ UTF-32ï¼‰ï¼Œå¦åˆ™ä¸è¦ä½¿ç”¨&lt;code&gt;read&lt;/code&gt;æ–¹æ³•ç»“åˆå›ºå®šç¼“å†²åŒºè¯»å–æ–‡æœ¬ï¼Œåº”ä¼˜å…ˆä½¿ç”¨ä¸“ä¸ºæ–‡æœ¬è®¾è®¡çš„ APIã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2ä½¿ç”¨æ–‡æœ¬å‹å¥½å‹-api-ä¿éšœå­—ç¬¦å®Œæ•´æ€§"&gt;&lt;a href="#2%e4%bd%bf%e7%94%a8%e6%96%87%e6%9c%ac%e5%8f%8b%e5%a5%bd%e5%9e%8b-api-%e4%bf%9d%e9%9a%9c%e5%ad%97%e7%ac%a6%e5%ae%8c%e6%95%b4%e6%80%a7" class="header-anchor"&gt;&lt;/a&gt;ï¼ˆ2ï¼‰ä½¿ç”¨æ–‡æœ¬å‹å¥½å‹ API ä¿éšœå­—ç¬¦å®Œæ•´æ€§
&lt;/h4&gt;&lt;p&gt;Rust æ ‡å‡†åº“ä¸ç¬¬ä¸‰æ–¹åº“æä¾›äº†å¤šç§ â€œå­—ç¬¦æ„ŸçŸ¥â€ çš„æ–‡æœ¬è¯»å– APIï¼Œå¯è‡ªåŠ¨å¤„ç†å­—ç¬¦æˆªæ–­é—®é¢˜ï¼Œæ ¸å¿ƒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;std::fs::read_to_string&lt;/code&gt;ï¼šä¸€æ¬¡æ€§è¯»å–æ•´ä¸ªæ–‡ä»¶åˆ°å­—ç¬¦ä¸²ï¼Œå†…éƒ¨è‡ªåŠ¨å¤„ç† UTF-8 ç¼–ç ä¸å­—ç¬¦å®Œæ•´æ€§ï¼Œé€‚åˆä¸­å°å‹æ–‡æœ¬æ–‡ä»¶ï¼ˆé¿å…å†…å­˜æº¢å‡ºï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;std::io::BufRead&lt;/code&gt;&lt;strong&gt; trait&lt;/strong&gt;ï¼šæä¾›æŒ‰è¡Œè¯»å–ï¼ˆ&lt;code&gt;lines&lt;/code&gt;æ–¹æ³•ï¼‰æˆ–æŒ‰å­—ç¬¦è¯»å–ï¼ˆ&lt;code&gt;chars&lt;/code&gt;æ–¹æ³•ï¼‰çš„èƒ½åŠ›ï¼Œå†…éƒ¨é€šè¿‡ç¼“å†²åŒºè‡ªåŠ¨ç¼“å­˜ä¸å®Œæ•´å­—ç¬¦ï¼Œç¡®ä¿æ¯æ¬¡è¯»å–çš„å•å…ƒï¼ˆè¡Œ / å­—ç¬¦ï¼‰å®Œæ•´ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å®è·µæ¡ˆä¾‹ï¼šæŒ‰è¡Œè¯»å–å¤§å‹æ–‡æœ¬æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºå¤§å‹æ–‡æœ¬æ–‡ä»¶ï¼ˆå¦‚æ—¥å¿—æ–‡ä»¶ã€CSV æ•°æ®ï¼‰ï¼Œä¸€æ¬¡æ€§è¯»å–ä¼šå ç”¨å¤§é‡å†…å­˜ï¼Œæ­¤æ—¶åº”ä½¿ç”¨&lt;code&gt;BufRead::lines&lt;/code&gt;æŒ‰è¡Œè¯»å–ï¼Œæ—¢ä¿éšœå­—ç¬¦å®Œæ•´æ€§ï¼Œåˆé™ä½å†…å­˜å¼€é”€ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;fs&lt;/span&gt;::&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;io&lt;/span&gt;::&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;BufRead&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BufReader&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;read_large_text_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="kt"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nb"&gt;Result&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Box&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;dyn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;error&lt;/span&gt;::&lt;span class="n"&gt;Error&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;::&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BufReader&lt;/span&gt;::&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// åŒ…è£…ä¸ºå¸¦ç¼“å†²åŒºçš„è¯»å–å™¨ï¼ˆé»˜è®¤ç¼“å†²åŒºå¤§å° 8KBï¼Œå¯è‡ªå®šä¹‰ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// æŒ‰è¡Œè¯»å–ï¼Œè‡ªåŠ¨å¤„ç†æ¢è¡Œç¬¦ä¸å­—ç¬¦å®Œæ•´æ€§
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line_num&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;line_result&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lines&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;line_result&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å¤„ç†å¯èƒ½çš„ IO é”™è¯¯ï¼ˆå¦‚æ–‡ä»¶ä¸­é€”æŸåï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;ç¬¬ &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt; è¡Œï¼š&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;line_num&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Ok&lt;/span&gt;&lt;span class="p"&gt;(())&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Err&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;read_large_text_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;large_log.txt&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;eprintln!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;è¯»å–é”™è¯¯ï¼š&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;BufRead::lines&lt;/code&gt;ä¼šè‡ªåŠ¨å¿½ç•¥è¡Œå°¾çš„æ¢è¡Œç¬¦ï¼ˆ&lt;code&gt;\n&lt;/code&gt;æˆ–&lt;code&gt;\r\n&lt;/code&gt;ï¼‰ï¼Œè‹¥éœ€ä¿ç•™åŸå§‹æ¢è¡Œç¬¦ï¼Œéœ€ä½¿ç”¨&lt;code&gt;read_line&lt;/code&gt;æ–¹æ³•æ‰‹åŠ¨å¤„ç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹äºè¶…å¤§å‹æ–‡ä»¶ï¼ˆå¦‚ GB çº§ï¼‰ï¼Œéœ€æ³¨æ„å†…å­˜å ç”¨ï¼š&lt;code&gt;BufReader&lt;/code&gt;çš„ç¼“å†²åŒºå¤§å°é»˜è®¤ä¸º 8KBï¼Œå¯é€šè¿‡&lt;code&gt;BufReader::with_capacity&lt;/code&gt;è°ƒæ•´ï¼ˆå¦‚è®¾ç½®ä¸º 64KBï¼‰ï¼Œå¹³è¡¡ IO æ¬¡æ•°ä¸å†…å­˜å¼€é”€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-å…¶ä»–å…³é”®æ³¨æ„äº‹é¡¹"&gt;&lt;a href="#3-%e5%85%b6%e4%bb%96%e5%85%b3%e9%94%ae%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" class="header-anchor"&gt;&lt;/a&gt;3. å…¶ä»–å…³é”®æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;h4 id="1æ–‡ä»¶æƒé™ä¸è·¯å¾„å¤„ç†"&gt;&lt;a href="#1%e6%96%87%e4%bb%b6%e6%9d%83%e9%99%90%e4%b8%8e%e8%b7%af%e5%be%84%e5%a4%84%e7%90%86" class="header-anchor"&gt;&lt;/a&gt;ï¼ˆ1ï¼‰æ–‡ä»¶æƒé™ä¸è·¯å¾„å¤„ç†
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¯»å–æ–‡ä»¶å‰éœ€ç¡®ä¿ç¨‹åºæ‹¥æœ‰æ–‡ä»¶çš„ â€œè¯»æƒé™â€ï¼Œå¦åˆ™ä¼šè¿”å›&lt;code&gt;PermissionDenied&lt;/code&gt;é”™è¯¯ã€‚åœ¨è·¨å¹³å°åœºæ™¯ä¸­ï¼Œéœ€æ³¨æ„ä¸åŒç³»ç»Ÿçš„æƒé™æ¨¡å‹ï¼ˆå¦‚ Linux çš„&lt;code&gt;rwx&lt;/code&gt;æƒé™ã€Windows çš„ ACL æƒé™ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;std::path::Path&lt;/code&gt;æˆ–&lt;code&gt;PathBuf&lt;/code&gt;å¤„ç†æ–‡ä»¶è·¯å¾„ï¼Œé¿å…ç¡¬ç¼–ç å­—ç¬¦ä¸²è·¯å¾„ï¼ˆå¦‚&lt;code&gt;&amp;quot;C:\\text.txt&amp;quot;&lt;/code&gt;ä»…é€‚ç”¨äº Windowsï¼Œ&lt;code&gt;&amp;quot;/home/text.txt&amp;quot;&lt;/code&gt;ä»…é€‚ç”¨äº Linuxï¼‰ï¼Œç¡®ä¿è·¯å¾„è§£æçš„è·¨å¹³å°å…¼å®¹æ€§ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;path&lt;/span&gt;::&lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;fs&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Path&lt;/span&gt;::&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;text.txt&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è·¨å¹³å°è·¯å¾„è¡¨ç¤º
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_file&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å…ˆæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”ä¸ºæ™®é€šæ–‡ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fs&lt;/span&gt;::&lt;span class="n"&gt;read_to_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;unwrap&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;å†…å®¹ï¼š&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;eprintln!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;é”™è¯¯ï¼šæ–‡ä»¶ä¸å­˜åœ¨æˆ–ä¸æ˜¯æ™®é€šæ–‡ä»¶&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id="2æ–‡ä»¶ç¼–ç æ ‡è¯†çš„å¤„ç†"&gt;&lt;a href="#2%e6%96%87%e4%bb%b6%e7%bc%96%e7%a0%81%e6%a0%87%e8%af%86%e7%9a%84%e5%a4%84%e7%90%86" class="header-anchor"&gt;&lt;/a&gt;ï¼ˆ2ï¼‰æ–‡ä»¶ç¼–ç æ ‡è¯†çš„å¤„ç†
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;éƒ¨åˆ†æ–‡æœ¬æ–‡ä»¶ä¼šåœ¨å¼€å¤´æ·»åŠ  â€œç¼–ç æ ‡è¯†â€ï¼ˆå¦‚ UTF-8 BOMã€UTF-16 BOMï¼‰ï¼Œè™½ç„¶ Rust æ ‡å‡†åº“çš„&lt;code&gt;read_to_string&lt;/code&gt;ä¼šè‡ªåŠ¨å¿½ç•¥ UTF-8 BOMï¼ˆ0xEFBBBFï¼‰ï¼Œä½†å…¶ä»–ç¼–ç çš„ BOM éœ€æ‰‹åŠ¨å¤„ç†ï¼ˆå¦‚ UTF-16 BOM ç”¨äºåˆ¤æ–­ç«¯åºï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è‹¥æ–‡ä»¶æ— ç¼–ç æ ‡è¯†ï¼Œä¸”æ— æ³•é€šè¿‡å¤–éƒ¨ä¿¡æ¯ç¡®å®šç¼–ç ï¼Œå¯ä½¿ç”¨&lt;code&gt;chardet&lt;/code&gt;åº“è‡ªåŠ¨æ£€æµ‹ç¼–ç ï¼ˆåŸºäºå­—èŠ‚é¢‘ç‡åˆ†æï¼‰ï¼Œä½†æ£€æµ‹ç»“æœå­˜åœ¨ä¸€å®šè¯¯å·®ï¼Œéœ€åœ¨å…³é”®åœºæ™¯ä¸­ç»“åˆäººå·¥ç¡®è®¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="äºŒè¯»å–å­—èŠ‚æµäºŒè¿›åˆ¶æ–‡ä»¶èšç„¦æ•°æ®ç»“æ„è¿˜åŸä¸è¯»å†™ä¸€è‡´æ€§"&gt;&lt;a href="#%e4%ba%8c%e8%af%bb%e5%8f%96%e5%ad%97%e8%8a%82%e6%b5%81%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%87%e4%bb%b6%e8%81%9a%e7%84%a6%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e8%bf%98%e5%8e%9f%e4%b8%8e%e8%af%bb%e5%86%99%e4%b8%80%e8%87%b4%e6%80%a7" class="header-anchor"&gt;&lt;/a&gt;äºŒã€è¯»å–å­—èŠ‚æµï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ï¼šèšç„¦æ•°æ®ç»“æ„è¿˜åŸä¸è¯»å†™ä¸€è‡´æ€§
&lt;/h2&gt;&lt;p&gt;å­—èŠ‚æµï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰çš„æœ¬è´¨æ˜¯ â€œæŒ‰ç‰¹å®šæ ¼å¼å­˜å‚¨çš„åŸå§‹å­—èŠ‚åºåˆ—â€ï¼ˆå¦‚å›¾ç‰‡ã€éŸ³é¢‘ã€è‡ªå®šä¹‰äºŒè¿›åˆ¶åè®®æ•°æ®ï¼‰ï¼Œè¯»å–æ—¶çš„æ ¸å¿ƒæŒ‘æˆ˜åœ¨äº&lt;strong&gt;ç²¾ç¡®è¿˜åŸæ•°æ®ç»“æ„&lt;/strong&gt;ä¸&lt;strong&gt;ä¿éšœå­—èŠ‚çº§åˆ«çš„å®Œæ•´æ€§&lt;/strong&gt;ã€‚ä¸æ–‡æœ¬æ–‡ä»¶ä¸åŒï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„è¯»å–æ— éœ€ç¼–ç è§£æï¼Œä½†éœ€ä¸¥æ ¼éµå¾ªæ•°æ®çš„å­˜å‚¨æ ¼å¼ï¼ˆå¦‚ç»“æ„ä½“å¯¹é½ã€å­—èŠ‚åºï¼‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ•°æ®è§£æé”™è¯¯ã€‚&lt;/p&gt;
&lt;h3 id="1-æ•°æ®ç»“æ„å¯¹é½ä¸å­—èŠ‚åºé¿å…å†…å­˜å¸ƒå±€ä¸åŒ¹é…"&gt;&lt;a href="#1-%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e5%af%b9%e9%bd%90%e4%b8%8e%e5%ad%97%e8%8a%82%e5%ba%8f%e9%81%bf%e5%85%8d%e5%86%85%e5%ad%98%e5%b8%83%e5%b1%80%e4%b8%8d%e5%8c%b9%e9%85%8d" class="header-anchor"&gt;&lt;/a&gt;1. æ•°æ®ç»“æ„å¯¹é½ä¸å­—èŠ‚åºï¼šé¿å…å†…å­˜å¸ƒå±€ä¸åŒ¹é…
&lt;/h3&gt;&lt;p&gt;äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„æ•°æ®é€šå¸¸æŒ‰ç‰¹å®š â€œç»“æ„ä½“â€ æ ¼å¼å­˜å‚¨ï¼ˆå¦‚è‡ªå®šä¹‰çš„&lt;code&gt;Header&lt;/code&gt;ã€&lt;code&gt;Record&lt;/code&gt;ç»“æ„ï¼‰ï¼Œè€Œ Rust ç»“æ„ä½“çš„å†…å­˜å¸ƒå±€å¯èƒ½å›  â€œå¯¹é½ä¼˜åŒ–â€ ä¸æ–‡ä»¶ä¸­çš„å­˜å‚¨æ ¼å¼ä¸ä¸€è‡´ï¼Œç›´æ¥ä½¿ç”¨&lt;code&gt;std::mem::transmute&lt;/code&gt;æˆ–&lt;code&gt;read_exact&lt;/code&gt;è¯»å–ç»“æ„ä½“å¯èƒ½å¯¼è‡´æ•°æ®é”™ä¹±ã€‚&lt;/p&gt;
&lt;h4 id="1ç»“æ„ä½“å¯¹é½çš„é—®é¢˜ä¸è§£å†³"&gt;&lt;a href="#1%e7%bb%93%e6%9e%84%e4%bd%93%e5%af%b9%e9%bd%90%e7%9a%84%e9%97%ae%e9%a2%98%e4%b8%8e%e8%a7%a3%e5%86%b3" class="header-anchor"&gt;&lt;/a&gt;ï¼ˆ1ï¼‰ç»“æ„ä½“å¯¹é½çš„é—®é¢˜ä¸è§£å†³
&lt;/h4&gt;&lt;p&gt;Rust ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¯¹ç»“æ„ä½“æˆå‘˜è¿›è¡Œå†…å­˜å¯¹é½ï¼ˆå¦‚&lt;code&gt;i32&lt;/code&gt;æˆå‘˜é€šå¸¸å¯¹é½åˆ° 4 å­—èŠ‚è¾¹ç•Œï¼‰ï¼Œä»¥æå‡è®¿é—®æ€§èƒ½ï¼Œä½†äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„æ•°æ®å¯èƒ½æŒ‰ â€œç´§å‡‘æ ¼å¼â€ å­˜å‚¨ï¼ˆæ— å¯¹é½å¡«å……å­—èŠ‚ï¼‰ï¼Œæ­¤æ—¶ç›´æ¥æ˜ å°„ç»“æ„ä½“å°†è¯»å–åˆ°æ— æ•ˆçš„å¡«å……å­—èŠ‚ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// Rust ä¸­çš„ç»“æ„ä½“ï¼ˆå­˜åœ¨å¯¹é½å¡«å……ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[derive(Debug)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="nc"&gt;FileHeader&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;magic&lt;/span&gt;: &lt;span class="kt"&gt;u16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 2 å­—èŠ‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;: &lt;span class="kt"&gt;u32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 4 å­—èŠ‚ï¼ˆç¼–è¯‘å™¨ä¼šåœ¨ magic åæ·»åŠ  2 å­—èŠ‚å¡«å……ï¼Œä½¿ version å¯¹é½åˆ° 4 å­—èŠ‚è¾¹ç•Œï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt;: &lt;span class="kt"&gt;u64&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 8 å­—èŠ‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// äºŒè¿›åˆ¶æ–‡ä»¶ä¸­å®é™…çš„å­˜å‚¨æ ¼å¼ï¼ˆç´§å‡‘ï¼Œæ— å¡«å……ï¼‰ï¼šmagic(2) + version(4) + length(8) = 14 å­—èŠ‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// è€Œ Rust ç»“æ„ä½“çš„å¤§å°ä¸º 2 + 2ï¼ˆå¡«å……ï¼‰ + 4 + 8 = 16 å­—èŠ‚ï¼Œç›´æ¥è¯»å–ä¼šå¯¼è‡´ version æ•°æ®é”™è¯¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸å¯ç›´æ¥å°†äºŒè¿›åˆ¶æ–‡ä»¶çš„å­—èŠ‚åºåˆ—å¼ºåˆ¶è½¬æ¢ä¸º Rust ç»“æ„ä½“ï¼Œéœ€ç¦ç”¨ç»“æ„ä½“çš„è‡ªåŠ¨å¯¹é½ä¼˜åŒ–ï¼Œæˆ–æ‰‹åŠ¨æŒ‰å­—æ®µé¡ºåºè¯»å–å­—èŠ‚å¹¶è½¬æ¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2ç¦ç”¨è‡ªåŠ¨å¯¹é½ä½¿ç”¨reprpackedå±æ€§"&gt;&lt;a href="#2%e7%a6%81%e7%94%a8%e8%87%aa%e5%8a%a8%e5%af%b9%e9%bd%90%e4%bd%bf%e7%94%a8reprpacked%e5%b1%9e%e6%80%a7" class="header-anchor"&gt;&lt;/a&gt;ï¼ˆ2ï¼‰ç¦ç”¨è‡ªåŠ¨å¯¹é½ï¼šä½¿ç”¨&lt;code&gt;repr(packed)&lt;/code&gt;å±æ€§
&lt;/h4&gt;&lt;p&gt;é€šè¿‡&lt;code&gt;#[repr(packed)]&lt;/code&gt;å±æ€§å¯å¼ºåˆ¶ Rust ç»“æ„ä½“æŒ‰ â€œç´§å‡‘æ ¼å¼â€ å¸ƒå±€ï¼Œæ¶ˆé™¤å¡«å……å­—èŠ‚ï¼Œä½¿å…¶ä¸äºŒè¿›åˆ¶æ–‡ä»¶çš„å­˜å‚¨æ ¼å¼ä¸€è‡´ã€‚ä½†éœ€æ³¨æ„ï¼Œ&lt;code&gt;repr(packed)&lt;/code&gt;ä¼šç¦ç”¨å†…å­˜å¯¹é½ï¼Œå¯èƒ½å¯¼è‡´è®¿é—®æ€§èƒ½ä¸‹é™ï¼Œä¸”éœ€ä½¿ç”¨&lt;code&gt;unsafe&lt;/code&gt;ä»£ç è¯»å–ï¼ˆå› æœªå¯¹é½å†…å­˜è®¿é—®åœ¨ Rust ä¸­å±äºæœªå®šä¹‰è¡Œä¸ºï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®è·µæ¡ˆä¾‹ï¼šè¯»å–ç´§å‡‘æ ¼å¼çš„äºŒè¿›åˆ¶ç»“æ„ä½“&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;span class="lnt"&gt;30
&lt;/span&gt;&lt;span class="lnt"&gt;31
&lt;/span&gt;&lt;span class="lnt"&gt;32
&lt;/span&gt;&lt;span class="lnt"&gt;33
&lt;/span&gt;&lt;span class="lnt"&gt;34
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;fs&lt;/span&gt;::&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;io&lt;/span&gt;::&lt;span class="n"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// ç¦ç”¨è‡ªåŠ¨å¯¹é½ï¼ŒæŒ‰ç´§å‡‘æ ¼å¼å¸ƒå±€ï¼ˆä¸äºŒè¿›åˆ¶æ–‡ä»¶ä¸€è‡´ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[repr(packed)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[derive(Debug)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="nc"&gt;FileHeader&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;magic&lt;/span&gt;: &lt;span class="kt"&gt;u16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;: &lt;span class="kt"&gt;u32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt;: &lt;span class="kt"&gt;u64&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;read_file_header&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="kt"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nb"&gt;Result&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;FileHeader&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Box&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;dyn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;error&lt;/span&gt;::&lt;span class="n"&gt;Error&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;::&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;buf&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;u8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;::&lt;span class="n"&gt;size_of&lt;/span&gt;::&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;FileHeader&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;()];&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// ç¼“å†²åŒºå¤§å° = ç»“æ„ä½“å¤§å°ï¼ˆ14 å­—èŠ‚ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è¯»å–æ°å¥½è¶³å¤Ÿçš„å­—èŠ‚ï¼ˆè‹¥æ–‡ä»¶é•¿åº¦ä¸è¶³ï¼Œä¼šè¿”å›é”™è¯¯ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_exact&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;buf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// unsafeï¼šå°†å­—èŠ‚ç¼“å†²åŒºå¼ºåˆ¶è½¬æ¢ä¸ºç»“æ„ä½“ï¼ˆå›  repr(packed) ç¦ç”¨äº†å¯¹é½ï¼Œéœ€ç¡®ä¿å®‰å…¨ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;unsafe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;::&lt;span class="n"&gt;transmute&lt;/span&gt;::&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;u8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;::&lt;span class="n"&gt;size_of&lt;/span&gt;::&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;FileHeader&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;()],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;FileHeader&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;buf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Ok&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;match&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;read_file_header&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;data.bin&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Ok&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;æ–‡ä»¶å¤´ï¼š&lt;/span&gt;&lt;span class="si"&gt;{:?}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Err&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;eprintln!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;è¯»å–é”™è¯¯ï¼š&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;repr(packed)&lt;/code&gt;ä»…é€‚ç”¨äº â€œç»“æ„ä½“å­—æ®µç±»å‹å›ºå®šã€å­˜å‚¨æ ¼å¼ç´§å‡‘â€ çš„åœºæ™¯ï¼Œè‹¥äºŒè¿›åˆ¶æ–‡ä»¶çš„å­—æ®µé¡ºåºä¸ç»“æ„ä½“ä¸ä¸€è‡´ï¼Œä»éœ€æ‰‹åŠ¨è¯»å–æ¯ä¸ªå­—æ®µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;unsafe&lt;/code&gt;ä»£ç æ—¶éœ€æ ¼å¤–è°¨æ…ï¼Œç¡®ä¿ç¼“å†²åŒºå¤§å°ä¸ç»“æ„ä½“å¤§å°å®Œå…¨ä¸€è‡´ï¼Œä¸”æ–‡ä»¶ä¸­çš„æ•°æ®æ ¼å¼ä¸ç»“æ„ä½“å®šä¹‰åŒ¹é…ï¼Œé¿å…å†…å­˜è¶Šç•Œæˆ–æ•°æ®è§£æé”™è¯¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3å¤„ç†å­—èŠ‚åºå¤§å°ç«¯é—®é¢˜"&gt;&lt;a href="#3%e5%a4%84%e7%90%86%e5%ad%97%e8%8a%82%e5%ba%8f%e5%a4%a7%e5%b0%8f%e7%ab%af%e9%97%ae%e9%a2%98" class="header-anchor"&gt;&lt;/a&gt;ï¼ˆ3ï¼‰å¤„ç†å­—èŠ‚åºï¼ˆå¤§å°ç«¯ï¼‰é—®é¢˜
&lt;/h4&gt;&lt;p&gt;äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„å¤šå­—èŠ‚æ•°æ®ï¼ˆå¦‚&lt;code&gt;u16&lt;/code&gt;ã€&lt;code&gt;u32&lt;/code&gt;ï¼‰å¯èƒ½é‡‡ç”¨ â€œå¤§ç«¯åºï¼ˆBig-Endianï¼‰â€ æˆ– â€œå°ç«¯åºï¼ˆLittle-Endianï¼‰â€ å­˜å‚¨ï¼Œè€Œ Rust ç¨‹åºé»˜è®¤ä½¿ç”¨ â€œä¸»æœºå­—èŠ‚åºâ€ï¼ˆå³è¿è¡Œå¹³å°çš„å­—èŠ‚åºï¼Œå¦‚ x86_64 å¹³å°ä¸ºå°ç«¯åºï¼‰ï¼Œè‹¥æ–‡ä»¶å­—èŠ‚åºä¸ä¸»æœºå­—èŠ‚åºä¸ä¸€è‡´ï¼Œç›´æ¥è¯»å–ä¼šå¯¼è‡´æ•°æ®é”™è¯¯ï¼ˆå¦‚æ–‡ä»¶ä¸­ 0x1234 å­˜å‚¨ä¸ºå¤§ç«¯åºï¼Œç›´æ¥è¯»å–ä¸ºå°ç«¯åºä¼šå˜æˆ 0x3412ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ³•ï¼šä½¿ç”¨&lt;/strong&gt;&lt;code&gt;byteorder&lt;/code&gt;&lt;strong&gt;åº“å¤„ç†å­—èŠ‚åº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;byteorder&lt;/code&gt;æ˜¯ Rust ç”Ÿæ€ä¸­å¤„ç†å­—èŠ‚åºçš„ä¸»æµåº“ï¼Œæ”¯æŒåœ¨è¯»å–å¤šå­—èŠ‚æ•°æ®æ—¶æ˜¾å¼æŒ‡å®šå­—èŠ‚åºï¼ˆå¤§ç«¯åº / å°ç«¯åºï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨è½¬æ¢å­—èŠ‚ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨&lt;code&gt;Cargo.toml&lt;/code&gt;ä¸­æ·»åŠ ä¾èµ–ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;dependencies&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;byteorder&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;1.5&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;å®è·µæ¡ˆä¾‹ï¼šè¯»å–å¤§ç«¯åºçš„äºŒè¿›åˆ¶æ•°æ®&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;fs&lt;/span&gt;::&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;io&lt;/span&gt;::&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Seek&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SeekFrom&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;byteorder&lt;/span&gt;::&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;BigEndian&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ReadBytesExt&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[derive(Debug)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="nc"&gt;SensorData&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;: &lt;span class="kt"&gt;u16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å¤§ç«¯åºå­˜å‚¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;temperature&lt;/span&gt;: &lt;span class="kt"&gt;f32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å¤§ç«¯åºå­˜å‚¨ï¼ˆIEEE 754 å•ç²¾åº¦æµ®ç‚¹æ•°ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;timestamp&lt;/span&gt;: &lt;span class="kt"&gt;u64&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å¤§ç«¯åºå­˜å‚¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;read_sensor_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="kt"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nb"&gt;Result&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;Vec&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;SensorData&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Box&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;dyn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;error&lt;/span&gt;::&lt;span class="n"&gt;Error&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;::&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file_size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;seek&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SeekFrom&lt;/span&gt;::&lt;span class="n"&gt;End&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>æ·±åº¦è§£æ Rust ä¸­çš„ Sliceã€Array ä¸ Vectorï¼šç‰¹æ€§ã€å…³è”ä¸åº•å±‚å®ç°</title><link>https://techinsight.pages.dev/p/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90-rust-%E4%B8%AD%E7%9A%84-slicearray-%E4%B8%8E-vector%E7%89%B9%E6%80%A7%E5%85%B3%E8%81%94%E4%B8%8E%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/</link><pubDate>Sat, 01 Nov 2025 22:26:20 +0800</pubDate><guid>https://techinsight.pages.dev/p/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90-rust-%E4%B8%AD%E7%9A%84-slicearray-%E4%B8%8E-vector%E7%89%B9%E6%80%A7%E5%85%B3%E8%81%94%E4%B8%8E%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/</guid><description>&lt;p&gt;åœ¨ Rust çš„é›†åˆç±»å‹ä½“ç³»ä¸­ï¼ŒArrayï¼ˆæ•°ç»„ï¼‰ã€Vectorï¼ˆå‘é‡ï¼‰ä¸ Sliceï¼ˆåˆ‡ç‰‡ï¼‰æ˜¯æ‰¿è½½è¿ç»­æ•°æ®çš„æ ¸å¿ƒç»“æ„ã€‚ä¸‰è€…çœ‹ä¼¼éƒ½ç”¨äºå­˜å‚¨æœ‰åºå…ƒç´ ï¼Œå´å› åº•å±‚è®¾è®¡ã€æ‰€æœ‰æƒæ¨¡å‹ä¸ä½¿ç”¨åœºæ™¯çš„å·®å¼‚ï¼Œå‘ˆç°å‡ºæˆªç„¶ä¸åŒçš„ç‰¹æ€§ã€‚å¯¹äº Rust å¼€å‘è€…è€Œè¨€ï¼Œç†è§£å®ƒä»¬çš„æœ¬è´¨åŒºåˆ«ä¸å…³è”ï¼Œä¸ä»…æ˜¯å†™å‡ºé«˜æ•ˆä»£ç çš„å…³é”®ï¼Œæ›´æ˜¯æŒæ¡ Rust å†…å­˜å®‰å…¨ä¸æ€§èƒ½å¹³è¡¡è®¾è®¡å“²å­¦çš„æ ¸å¿ƒã€‚æœ¬æ–‡å°†ä»åº•å±‚å®ç°å‡ºå‘ï¼Œé€å±‚å‰–æä¸‰è€…çš„ç‰¹æ€§ã€äº¤äº’é€»è¾‘ä¸é€‚ç”¨åœºæ™¯ï¼Œå¸¦ä½ æ„å»ºå¯¹ Rust è¿ç»­æ•°æ®ç»“æ„çš„æ·±åº¦è®¤çŸ¥ã€‚&lt;/p&gt;
&lt;h2 id="ä¸€arrayç¼–è¯‘æœŸç¡®å®šå¤§å°çš„-é™æ€å®¹å™¨"&gt;&lt;a href="#%e4%b8%80array%e7%bc%96%e8%af%91%e6%9c%9f%e7%a1%ae%e5%ae%9a%e5%a4%a7%e5%b0%8f%e7%9a%84-%e9%9d%99%e6%80%81%e5%ae%b9%e5%99%a8" class="header-anchor"&gt;&lt;/a&gt;ä¸€ã€Arrayï¼šç¼–è¯‘æœŸç¡®å®šå¤§å°çš„ â€œé™æ€å®¹å™¨â€
&lt;/h2&gt;&lt;p&gt;Arrayï¼ˆæ•°ç»„ï¼‰æ˜¯ Rust ä¸­æœ€åŸºç¡€çš„è¿ç»­æ•°æ®ç»“æ„ï¼Œå…¶è®¾è®¡æ ¸å¿ƒæ˜¯ â€œç¼–è¯‘æœŸå›ºå®šå¤§å°â€ï¼Œè¿™ä¸€ç‰¹æ€§å†³å®šäº†å®ƒçš„å†…å­˜å¸ƒå±€ã€æ‰€æœ‰æƒæ¨¡å‹ä¸ä½¿ç”¨è¾¹ç•Œã€‚&lt;/p&gt;
&lt;h3 id="1-åº•å±‚æœ¬è´¨æ ˆä¸Šçš„å›ºå®šå¤§å°è¿ç»­å†…å­˜å—"&gt;&lt;a href="#1-%e5%ba%95%e5%b1%82%e6%9c%ac%e8%b4%a8%e6%a0%88%e4%b8%8a%e7%9a%84%e5%9b%ba%e5%ae%9a%e5%a4%a7%e5%b0%8f%e8%bf%9e%e7%bb%ad%e5%86%85%e5%ad%98%e5%9d%97" class="header-anchor"&gt;&lt;/a&gt;1. åº•å±‚æœ¬è´¨ï¼šæ ˆä¸Šçš„å›ºå®šå¤§å°è¿ç»­å†…å­˜å—
&lt;/h3&gt;&lt;p&gt;åœ¨ Rust ä¸­ï¼ŒArray çš„ç±»å‹è¡¨ç¤ºä¸º&lt;code&gt;[T; N]&lt;/code&gt;ï¼Œå…¶ä¸­&lt;code&gt;T&lt;/code&gt;æ˜¯å…ƒç´ ç±»å‹ï¼Œ&lt;code&gt;N&lt;/code&gt;æ˜¯ä¸€ä¸ª&lt;strong&gt;éè´Ÿæ•´æ•°å¸¸é‡&lt;/strong&gt;ï¼ˆå¿…é¡»åœ¨ç¼–è¯‘æœŸç¡®å®šï¼‰ã€‚å…¶åº•å±‚å®ç°æ˜¯ä¸€æ®µè¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œç›´æ¥åˆ†é…åœ¨æ ˆä¸Šï¼ˆè€Œéå †ä¸Šï¼‰ï¼Œå…ƒç´ ç´§å¯†æ’åˆ—ï¼Œæ— é¢å¤–å†…å­˜å¼€é”€ï¼ˆå¦‚é•¿åº¦ã€å®¹é‡æŒ‡é’ˆç­‰ï¼‰ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;let arr: [i32; 3] = [1, 2, 3];&lt;/code&gt;åœ¨æ ˆä¸Šçš„å†…å­˜å¸ƒå±€ä¸º 3 ä¸ª&lt;code&gt;i32&lt;/code&gt;ç±»å‹çš„è¿ç»­ç©ºé—´ï¼Œæ€»å¤§å°ä¸º&lt;code&gt;3 * 4 = 12&lt;/code&gt;å­—èŠ‚ï¼ˆå‡è®¾&lt;code&gt;i32&lt;/code&gt;ä¸º 4 å­—èŠ‚ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§ â€œæ ˆä¸Šå›ºå®šå¤§å°â€ çš„è®¾è®¡å¸¦æ¥ä¸¤ä¸ªå…³é”®ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…å­˜é«˜æ•ˆ&lt;/strong&gt;ï¼šæ— é¢å¤–å…ƒæ•°æ®ï¼Œå†…å­˜åˆ©ç”¨ç‡è¾¾åˆ° 100%ï¼Œé€‚åˆå­˜å‚¨å°è§„æ¨¡ã€å›ºå®šæ•°é‡çš„æ•°æ®ï¼ˆå¦‚ RGB é¢œè‰²å€¼&lt;code&gt;[u8; 3]&lt;/code&gt;ã€çŸ©é˜µçš„è¡Œ&lt;code&gt;[f64; 4]&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼–è¯‘æœŸå®‰å…¨æ£€æŸ¥&lt;/strong&gt;ï¼šç”±äºå¤§å°å›ºå®šï¼Œç¼–è¯‘å™¨å¯åœ¨ç¼–è¯‘æœŸéªŒè¯æ•°ç»„è®¿é—®çš„åˆæ³•æ€§ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;arr[5]&lt;/code&gt;ä¼šç›´æ¥è§¦å‘ç¼–è¯‘é”™è¯¯ï¼ˆç´¢å¼•è¶…å‡ºæ•°ç»„é•¿åº¦ 3ï¼‰ï¼Œé¿å…äº† C/C++ ä¸­æ•°ç»„è¶Šç•Œçš„è¿è¡Œæ—¶é£é™©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-æ ¸å¿ƒç‰¹æ€§ä¸å¯å˜æ€§ä¸æ‰€æœ‰æƒçš„-ç®€å•æ€§"&gt;&lt;a href="#2-%e6%a0%b8%e5%bf%83%e7%89%b9%e6%80%a7%e4%b8%8d%e5%8f%af%e5%8f%98%e6%80%a7%e4%b8%8e%e6%89%80%e6%9c%89%e6%9d%83%e7%9a%84-%e7%ae%80%e5%8d%95%e6%80%a7" class="header-anchor"&gt;&lt;/a&gt;2. æ ¸å¿ƒç‰¹æ€§ï¼šä¸å¯å˜æ€§ä¸æ‰€æœ‰æƒçš„ â€œç®€å•æ€§â€
&lt;/h3&gt;&lt;p&gt;Array çš„ç‰¹æ€§ä¸å…¶ â€œé™æ€å¤§å°â€ çš„è®¾è®¡å¼ºç»‘å®šï¼Œä¸»è¦ä½“ç°åœ¨ä¸å¯å˜æ€§ã€æ‰€æœ‰æƒä¸æ–¹æ³•æ”¯æŒä¸Šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é»˜è®¤ä¸å¯å˜ï¼Œæ˜¾å¼å¯å˜&lt;/strong&gt;ï¼šä¸ Rust ä¸­å˜é‡é»˜è®¤ä¸å¯å˜ä¸€è‡´ï¼ŒArray é»˜è®¤æ— æ³•ä¿®æ”¹å…ƒç´ ï¼ˆå¦‚&lt;code&gt;arr[0] = 4&lt;/code&gt;ä¼šæŠ¥é”™ï¼‰ï¼Œéœ€é€šè¿‡&lt;code&gt;mut&lt;/code&gt;å…³é”®å­—æ˜¾å¼å£°æ˜å¯å˜æ•°ç»„ï¼š&lt;code&gt;let mut arr: [i32; 3] = [1, 2, 3]; arr[0] = 4;&lt;/code&gt;ã€‚ä½†éœ€æ³¨æ„ï¼Œ&lt;strong&gt;æ•°ç»„çš„å¤§å°å§‹ç»ˆä¸å¯å˜&lt;/strong&gt;ï¼Œå³ä½¿æ˜¯å¯å˜æ•°ç»„ï¼Œä¹Ÿæ— æ³•è¿½åŠ ã€åˆ é™¤å…ƒç´ æˆ–æ”¹å˜é•¿åº¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰€æœ‰æƒçš„ â€œå€¼è¯­ä¹‰â€&lt;/strong&gt;ï¼šArray æ˜¯ â€œæ‹¥æœ‰å‹ç±»å‹â€ï¼ˆOwned Typeï¼‰ï¼Œä½†å…¶æ‰€æœ‰æƒè½¬ç§»éµå¾ª â€œå€¼è¯­ä¹‰â€â€”â€” å½“æ•°ç»„è¢«èµ‹å€¼ç»™æ–°å˜é‡æˆ–ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œä¼šè§¦å‘&lt;strong&gt;å®Œæ•´çš„æ•°æ®å¤åˆ¶&lt;/strong&gt;ï¼ˆè€Œéå¼•ç”¨ä¼ é€’ï¼‰ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;arr1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;arr2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;arr1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å¤åˆ¶ arr1 çš„æ‰€æœ‰å…ƒç´ åˆ° arr2ï¼Œarr1 ä»å¯ä½¿ç”¨ï¼ˆå›  i32 å®ç° Copy ç‰¹æ€§ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è‹¥æ•°ç»„å…ƒç´ ç±»å‹æœªå®ç°&lt;code&gt;Copy&lt;/code&gt;ç‰¹æ€§ï¼ˆå¦‚&lt;code&gt;String&lt;/code&gt;ï¼‰ï¼Œåˆ™èµ‹å€¼ååŸæ•°ç»„ä¼šå¤±å»æ‰€æœ‰æƒï¼ˆæ— æ³•å†ä½¿ç”¨ï¼‰ï¼Œè¿™ä¸ Rust åŸºæœ¬çš„æ‰€æœ‰æƒè§„åˆ™ä¸€è‡´ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ‰é™çš„æ–¹æ³•æ”¯æŒ&lt;/strong&gt;ï¼šç”±äºå¤§å°å›ºå®šï¼ŒArray ä»…æä¾›å°‘é‡åŸºç¡€æ–¹æ³•ï¼ˆå¦‚&lt;code&gt;len()&lt;/code&gt;è·å–é•¿åº¦ã€&lt;code&gt;iter()&lt;/code&gt;ç”Ÿæˆè¿­ä»£å™¨ï¼‰ï¼Œä¸æ”¯æŒåŠ¨æ€é›†åˆçš„æ“ä½œï¼ˆå¦‚&lt;code&gt;push()&lt;/code&gt;ã€&lt;code&gt;pop()&lt;/code&gt;ï¼‰ã€‚è‹¥éœ€æ›´çµæ´»çš„æ“ä½œï¼Œéœ€å…ˆå°†å…¶è½¬æ¢ä¸º Slice æˆ– Vectorã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-é€‚ç”¨åœºæ™¯å°è§„æ¨¡å›ºå®šå¤§å°çš„ç¡®å®šæ€§æ•°æ®"&gt;&lt;a href="#3-%e9%80%82%e7%94%a8%e5%9c%ba%e6%99%af%e5%b0%8f%e8%a7%84%e6%a8%a1%e5%9b%ba%e5%ae%9a%e5%a4%a7%e5%b0%8f%e7%9a%84%e7%a1%ae%e5%ae%9a%e6%80%a7%e6%95%b0%e6%8d%ae" class="header-anchor"&gt;&lt;/a&gt;3. é€‚ç”¨åœºæ™¯ï¼šå°è§„æ¨¡ã€å›ºå®šå¤§å°çš„ç¡®å®šæ€§æ•°æ®
&lt;/h3&gt;&lt;p&gt;Array çš„è®¾è®¡å†³å®šäº†å®ƒæ›´é€‚åˆå­˜å‚¨ â€œæ•°é‡å·²çŸ¥ä¸”å›ºå®šâ€ çš„å°è§„æ¨¡æ•°æ®ï¼Œå…¸å‹åœºæ™¯åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å­˜å‚¨å›ºå®šç»´åº¦çš„æ•°æ®ï¼ˆå¦‚ 2D åæ ‡&lt;code&gt;[f64; 2]&lt;/code&gt;ã€RGBA é¢œè‰²&lt;code&gt;[u8; 4]&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’å°‘é‡å›ºå®šæ•°æ®ï¼ˆå¦‚é…ç½®é¡¹ã€çŠ¶æ€ç åˆ—è¡¨ï¼‰ï¼Œé¿å…å †å†…å­˜åˆ†é…å¼€é”€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½œä¸ºåº•å±‚å®¹å™¨ï¼Œä¸º Slice æˆ– Vector æä¾›åˆå§‹æ•°æ®ï¼ˆå¦‚&lt;code&gt;let vec: Vec&amp;lt;i32&amp;gt; = arr.into();&lt;/code&gt;å°†æ•°ç»„è½¬æ¢ä¸ºå‘é‡ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="äºŒvectorå †ä¸ŠåŠ¨æ€æ‰©å®¹çš„-å¯å˜é›†åˆ"&gt;&lt;a href="#%e4%ba%8cvector%e5%a0%86%e4%b8%8a%e5%8a%a8%e6%80%81%e6%89%a9%e5%ae%b9%e7%9a%84-%e5%8f%af%e5%8f%98%e9%9b%86%e5%90%88" class="header-anchor"&gt;&lt;/a&gt;äºŒã€Vectorï¼šå †ä¸ŠåŠ¨æ€æ‰©å®¹çš„ â€œå¯å˜é›†åˆâ€
&lt;/h2&gt;&lt;p&gt;Vectorï¼ˆå‘é‡ï¼‰æ˜¯ Rust ä¸­æœ€å¸¸ç”¨çš„åŠ¨æ€è¿ç»­æ•°æ®ç»“æ„ï¼Œå…¶è®¾è®¡æ ¸å¿ƒæ˜¯ â€œå †ä¸Šå­˜å‚¨ + åŠ¨æ€æ‰©å®¹â€ï¼Œå¼¥è¡¥äº† Array å¤§å°å›ºå®šçš„å±€é™æ€§ï¼ŒåŒæ—¶ä¿æŒäº†è¿ç»­å†…å­˜çš„è®¿é—®æ•ˆç‡ã€‚&lt;/p&gt;
&lt;h3 id="1-åº•å±‚å®ç°å †å†…å­˜ç¼“å†²åŒº--æ ˆä¸Šå…ƒæ•°æ®"&gt;&lt;a href="#1-%e5%ba%95%e5%b1%82%e5%ae%9e%e7%8e%b0%e5%a0%86%e5%86%85%e5%ad%98%e7%bc%93%e5%86%b2%e5%8c%ba--%e6%a0%88%e4%b8%8a%e5%85%83%e6%95%b0%e6%8d%ae" class="header-anchor"&gt;&lt;/a&gt;1. åº•å±‚å®ç°ï¼šå †å†…å­˜ç¼“å†²åŒº + æ ˆä¸Šå…ƒæ•°æ®
&lt;/h3&gt;&lt;p&gt;Vector çš„ç±»å‹è¡¨ç¤ºä¸º&lt;code&gt;Vec&amp;lt;T&amp;gt;&lt;/code&gt;ï¼Œå…¶åº•å±‚ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ˆä¸Šå…ƒæ•°æ®&lt;/strong&gt;ï¼šåŒ…å«ä¸‰ä¸ªå­—æ®µ â€”â€”&lt;code&gt;ptr&lt;/code&gt;ï¼ˆæŒ‡å‘å †å†…å­˜ç¼“å†²åŒºçš„æŒ‡é’ˆï¼‰ã€&lt;code&gt;len&lt;/code&gt;ï¼ˆå½“å‰å­˜å‚¨çš„å…ƒç´ æ•°é‡ï¼‰ã€&lt;code&gt;cap&lt;/code&gt;ï¼ˆç¼“å†²åŒºçš„æ€»å®¹é‡ï¼Œå³æœ€å¤šå¯å­˜å‚¨çš„å…ƒç´ æ•°é‡ï¼‰ï¼Œæ€»å¤§å°ä¸º&lt;code&gt;3 * usize&lt;/code&gt;ï¼ˆåœ¨ 64 ä½ç³»ç»Ÿä¸Šä¸º 24 å­—èŠ‚ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å †ä¸Šç¼“å†²åŒº&lt;/strong&gt;ï¼šä¸€æ®µè¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œç”¨äºå­˜å‚¨å®é™…çš„&lt;code&gt;T&lt;/code&gt;ç±»å‹å…ƒç´ ï¼Œç¼“å†²åŒºå¤§å°ç”±&lt;code&gt;cap&lt;/code&gt;å†³å®šï¼Œä¸”ä¼šæ ¹æ®å…ƒç´ çš„æ·»åŠ  / åˆ é™¤è‡ªåŠ¨æ‰©å®¹æˆ–æ”¶ç¼©ï¼ˆæŒ‰éœ€è°ƒæ•´ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œ&lt;code&gt;let mut vec: Vec&amp;lt;i32&amp;gt; = Vec::with_capacity(3); vec.push(1); vec.push(2);&lt;/code&gt;çš„åº•å±‚çŠ¶æ€ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ ˆä¸Šå…ƒæ•°æ®ï¼š&lt;code&gt;ptr&lt;/code&gt;æŒ‡å‘å †ä¸Š 3 ä¸ª&lt;code&gt;i32&lt;/code&gt;å¤§å°çš„ç¼“å†²åŒºï¼Œ&lt;code&gt;len = 2&lt;/code&gt;ï¼Œ&lt;code&gt;cap = 3&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å †ä¸Šç¼“å†²åŒºï¼šå‰ä¸¤ä¸ªä½ç½®å­˜å‚¨&lt;code&gt;1&lt;/code&gt;å’Œ&lt;code&gt;2&lt;/code&gt;ï¼Œç¬¬ä¸‰ä¸ªä½ç½®ç©ºé—²ï¼ˆå¾…å¡«å……ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“&lt;code&gt;len&lt;/code&gt;è¾¾åˆ°&lt;code&gt;cap&lt;/code&gt;ï¼ˆå¦‚ç»§ç»­&lt;code&gt;vec.push(3); vec.push(4);&lt;/code&gt;ï¼‰æ—¶ï¼ŒVector ä¼šè§¦å‘&lt;strong&gt;æ‰©å®¹æœºåˆ¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è®¡ç®—æ–°å®¹é‡ï¼ˆé€šå¸¸ä¸ºå½“å‰å®¹é‡çš„ 2 å€ï¼Œé¿å…é¢‘ç¹æ‰©å®¹ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨å †ä¸Šåˆ†é…ä¸€å—æ–°çš„ã€æ›´å¤§çš„ç¼“å†²åŒºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å°†æ—§ç¼“å†²åŒºçš„å…ƒç´ å¤åˆ¶åˆ°æ–°ç¼“å†²åŒºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é‡Šæ”¾æ—§ç¼“å†²åŒºçš„å†…å­˜ï¼Œæ›´æ–°&lt;code&gt;ptr&lt;/code&gt;å’Œ&lt;code&gt;cap&lt;/code&gt;å­—æ®µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ç§æ‰©å®¹æœºåˆ¶ä¿è¯äº†&lt;code&gt;push()&lt;/code&gt;æ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O (1)ï¼Œä½†éœ€æ³¨æ„ï¼šæ‰©å®¹æ—¶çš„å¤åˆ¶æ“ä½œä¼šå¸¦æ¥çŸ­æš‚çš„æ€§èƒ½å¼€é”€ï¼Œä¸”è‹¥å…ƒç´ ç±»å‹æœªå®ç°&lt;code&gt;Copy&lt;/code&gt;ç‰¹æ€§ï¼Œå¤åˆ¶è¿‡ç¨‹ä¼šè§¦å‘æ‰€æœ‰æƒè½¬ç§»ï¼ˆå¯èƒ½å½±å“æ€§èƒ½ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="2-æ ¸å¿ƒç‰¹æ€§åŠ¨æ€æ€§æ‰€æœ‰æƒä¸å†…å­˜å®‰å…¨"&gt;&lt;a href="#2-%e6%a0%b8%e5%bf%83%e7%89%b9%e6%80%a7%e5%8a%a8%e6%80%81%e6%80%a7%e6%89%80%e6%9c%89%e6%9d%83%e4%b8%8e%e5%86%85%e5%ad%98%e5%ae%89%e5%85%a8" class="header-anchor"&gt;&lt;/a&gt;2. æ ¸å¿ƒç‰¹æ€§ï¼šåŠ¨æ€æ€§ã€æ‰€æœ‰æƒä¸å†…å­˜å®‰å…¨
&lt;/h3&gt;&lt;p&gt;Vector çš„ç‰¹æ€§å›´ç»• â€œåŠ¨æ€ç®¡ç†è¿ç»­å†…å­˜â€ å±•å¼€ï¼ŒåŒæ—¶éµå¾ª Rust çš„å†…å­˜å®‰å…¨è§„åˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®Œå…¨åŠ¨æ€çš„å…ƒç´ æ“ä½œ&lt;/strong&gt;ï¼šæ”¯æŒ&lt;code&gt;push()&lt;/code&gt;ï¼ˆå°¾éƒ¨æ·»åŠ ï¼‰ã€&lt;code&gt;pop()&lt;/code&gt;ï¼ˆå°¾éƒ¨åˆ é™¤ï¼‰ã€&lt;code&gt;insert()&lt;/code&gt;ï¼ˆæŒ‡å®šä½ç½®æ’å…¥ï¼‰ã€&lt;code&gt;remove()&lt;/code&gt;ï¼ˆæŒ‡å®šä½ç½®åˆ é™¤ï¼‰ç­‰æ“ä½œï¼Œå¯çµæ´»è°ƒæ•´å…ƒç´ æ•°é‡ã€‚éœ€æ³¨æ„ï¼Œ&lt;code&gt;insert()&lt;/code&gt;å’Œ&lt;code&gt;remove()&lt;/code&gt;ä¼šå¯¼è‡´æŒ‡å®šä½ç½®åçš„å…ƒç´  â€œå¹³ç§»â€ï¼ˆå†…å­˜å¤åˆ¶ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O (n)ï¼Œå› æ­¤ä¸é€‚åˆé¢‘ç¹åœ¨ä¸­é—´ä½ç½®ä¿®æ”¹æ•°æ®ï¼ˆæ­¤æ—¶åº”ä¼˜å…ˆé€‰æ‹©&lt;code&gt;LinkedList&lt;/code&gt;æˆ–&lt;code&gt;VecDeque&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰€æœ‰æƒçš„ â€œå®¹å™¨è¯­ä¹‰â€&lt;/strong&gt;ï¼šVector æ‹¥æœ‰å…¶å †ä¸Šç¼“å†²åŒºçš„æ‰€æœ‰æƒï¼ŒåŒæ—¶ä¹Ÿæ‹¥æœ‰æ‰€æœ‰å…ƒç´ çš„æ‰€æœ‰æƒã€‚å½“ Vector è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œä¼šå…ˆè‡ªåŠ¨é”€æ¯æ‰€æœ‰å…ƒç´ ï¼ˆè°ƒç”¨å…ƒç´ çš„&lt;code&gt;Drop&lt;/code&gt;æ–¹æ³•ï¼‰ï¼Œå†é‡Šæ”¾å †ä¸Šç¼“å†²åŒºçš„å†…å­˜ï¼Œå½»åº•é¿å…å†…å­˜æ³„æ¼ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;Vec&amp;lt;String&amp;gt;&lt;/code&gt;è¢«é”€æ¯æ—¶ï¼Œä¼šå…ˆé€ä¸ªé”€æ¯å†…éƒ¨çš„&lt;code&gt;String&lt;/code&gt;ï¼ˆé‡Šæ”¾å…¶å †å†…å­˜ï¼‰ï¼Œå†é‡Šæ”¾ Vector è‡ªèº«çš„å †ç¼“å†²åŒºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ‡ç‰‡åŒ–ä¸å€Ÿç”¨è§„åˆ™&lt;/strong&gt;ï¼šVector å¯é€šè¿‡&lt;code&gt;&amp;amp;vec&lt;/code&gt;æˆ–&lt;code&gt;vec.as_slice()&lt;/code&gt;è½¬æ¢ä¸º&lt;code&gt;&amp;amp;[T]&lt;/code&gt;ï¼ˆSliceï¼‰ï¼Œæ­¤æ—¶ä¼šç”Ÿæˆä¸€ä¸ªæŒ‡å‘ Vector å †ç¼“å†²åŒºçš„ â€œè§†å›¾â€ï¼Œä¸”éµå¾ª Rust çš„å€Ÿç”¨è§„åˆ™ â€”â€” è‹¥å­˜åœ¨&lt;code&gt;&amp;amp;[T]&lt;/code&gt;ï¼ˆä¸å¯å˜åˆ‡ç‰‡ï¼‰ï¼Œåˆ™ Vector æ— æ³•è¢«ä¿®æ”¹ï¼ˆé¿å…åˆ‡ç‰‡æŒ‡å‘æ— æ•ˆæ•°æ®ï¼‰ï¼›è‹¥å­˜åœ¨&lt;code&gt;&amp;amp;mut [T]&lt;/code&gt;ï¼ˆå¯å˜åˆ‡ç‰‡ï¼‰ï¼Œåˆ™ Vector æ— æ³•è¢«å…¶ä»–æ–¹å¼å€Ÿç”¨ï¼ˆé¿å…æ•°æ®ç«äº‰ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-é€‚ç”¨åœºæ™¯å¤§è§„æ¨¡åŠ¨æ€å˜åŒ–çš„è¿ç»­æ•°æ®"&gt;&lt;a href="#3-%e9%80%82%e7%94%a8%e5%9c%ba%e6%99%af%e5%a4%a7%e8%a7%84%e6%a8%a1%e5%8a%a8%e6%80%81%e5%8f%98%e5%8c%96%e7%9a%84%e8%bf%9e%e7%bb%ad%e6%95%b0%e6%8d%ae" class="header-anchor"&gt;&lt;/a&gt;3. é€‚ç”¨åœºæ™¯ï¼šå¤§è§„æ¨¡ã€åŠ¨æ€å˜åŒ–çš„è¿ç»­æ•°æ®
&lt;/h3&gt;&lt;p&gt;Vector å‡­å€ŸåŠ¨æ€æ€§ä¸é«˜æ•ˆæ€§ï¼Œæˆä¸º Rust ä¸­å¤„ç†è¿ç»­æ•°æ®çš„ â€œé¦–é€‰å·¥å…·â€ï¼Œå…¸å‹åœºæ™¯åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å­˜å‚¨æ•°é‡ä¸ç¡®å®šçš„æ•°æ®ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥åˆ—è¡¨ã€æ—¥å¿—æ¡ç›®ã€ç½‘ç»œè¯·æ±‚å“åº”ä½“ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½œä¸ºåŠ¨æ€æ•°ç»„ä½¿ç”¨ï¼Œæ›¿ä»£å…¶ä»–è¯­è¨€ä¸­çš„&lt;code&gt;ArrayList&lt;/code&gt;æˆ–&lt;code&gt;std::vector&lt;/code&gt;ï¼ˆC++ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½œä¸ºåº•å±‚å®¹å™¨ï¼Œä¸ºå…¶ä»–æ•°æ®ç»“æ„æä¾›è¿ç»­å†…å­˜æ”¯æŒï¼ˆå¦‚&lt;code&gt;HashMap&lt;/code&gt;çš„æ¡¶æ•°ç»„ã€&lt;code&gt;VecDeque&lt;/code&gt;çš„ç¯å½¢ç¼“å†²åŒºï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="ä¸‰sliceè·¨è¶Šå®¹å™¨çš„-æ•°æ®è§†å›¾"&gt;&lt;a href="#%e4%b8%89slice%e8%b7%a8%e8%b6%8a%e5%ae%b9%e5%99%a8%e7%9a%84-%e6%95%b0%e6%8d%ae%e8%a7%86%e5%9b%be" class="header-anchor"&gt;&lt;/a&gt;ä¸‰ã€Sliceï¼šè·¨è¶Šå®¹å™¨çš„ â€œæ•°æ®è§†å›¾â€
&lt;/h2&gt;&lt;p&gt;Sliceï¼ˆåˆ‡ç‰‡ï¼‰æ˜¯ Rust ä¸­æœ€ç‰¹æ®Šçš„è¿ç»­æ•°æ®ç»“æ„ï¼Œå…¶è®¾è®¡æ ¸å¿ƒæ˜¯ â€œæ— æ‰€æœ‰æƒçš„è§†å›¾â€â€”â€” å®ƒä¸å­˜å‚¨æ•°æ®ï¼Œä»…æŒ‡å‘å…¶ä»–å®¹å™¨ï¼ˆArrayã€Vectorã€ç”šè‡³å¦ä¸€ä¸ª Sliceï¼‰ä¸­çš„ä¸€æ®µè¿ç»­æ•°æ®ï¼Œæ˜¯è¿æ¥ Array ä¸ Vector çš„ â€œæ¡¥æ¢â€ã€‚&lt;/p&gt;
&lt;h3 id="1-åº•å±‚æœ¬è´¨æŒ‡é’ˆ--é•¿åº¦çš„-è½»é‡çº§è§†å›¾"&gt;&lt;a href="#1-%e5%ba%95%e5%b1%82%e6%9c%ac%e8%b4%a8%e6%8c%87%e9%92%88--%e9%95%bf%e5%ba%a6%e7%9a%84-%e8%bd%bb%e9%87%8f%e7%ba%a7%e8%a7%86%e5%9b%be" class="header-anchor"&gt;&lt;/a&gt;1. åº•å±‚æœ¬è´¨ï¼šæŒ‡é’ˆ + é•¿åº¦çš„ â€œè½»é‡çº§è§†å›¾â€
&lt;/h3&gt;&lt;p&gt;Slice çš„ç±»å‹è¡¨ç¤ºä¸º&lt;code&gt;&amp;amp;[T]&lt;/code&gt;ï¼ˆä¸å¯å˜åˆ‡ç‰‡ï¼‰æˆ–&lt;code&gt;&amp;amp;mut [T]&lt;/code&gt;ï¼ˆå¯å˜åˆ‡ç‰‡ï¼‰ï¼Œå…¶åº•å±‚æ˜¯ä¸€ä¸ª â€œèƒ–æŒ‡é’ˆâ€ï¼ˆFat Pointerï¼‰ï¼ŒåŒ…å«ä¸¤ä¸ªå­—æ®µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;ptr&lt;/code&gt;ï¼šæŒ‡å‘ç›®æ ‡å®¹å™¨ä¸­è¿ç»­æ•°æ®çš„èµ·å§‹ä½ç½®çš„æŒ‡é’ˆï¼ˆä¸å®¹å™¨æ•°æ®çš„å†…å­˜åœ°å€ä¸€è‡´ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;len&lt;/code&gt;ï¼šåˆ‡ç‰‡åŒ…å«çš„å…ƒç´ æ•°é‡ï¼ˆ&lt;code&gt;usize&lt;/code&gt;ç±»å‹ï¼Œéœ€å°äºç­‰äºç›®æ ‡å®¹å™¨çš„é•¿åº¦ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¯¹ Array&lt;code&gt;let arr = [1, 2, 3, 4];&lt;/code&gt;å–åˆ‡ç‰‡&lt;code&gt;let slice = &amp;amp;arr[1..3];&lt;/code&gt;ï¼Œåˆ‡ç‰‡çš„&lt;code&gt;ptr&lt;/code&gt;æŒ‡å‘&lt;code&gt;arr[1]&lt;/code&gt;çš„åœ°å€ï¼Œ&lt;code&gt;len = 2&lt;/code&gt;ï¼ˆåŒ…å«&lt;code&gt;2&lt;/code&gt;å’Œ&lt;code&gt;3&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹ Vector&lt;code&gt;let vec = vec![1, 2, 3, 4];&lt;/code&gt;å–åˆ‡ç‰‡&lt;code&gt;let slice = &amp;amp;vec[2..];&lt;/code&gt;ï¼Œåˆ‡ç‰‡çš„&lt;code&gt;ptr&lt;/code&gt;æŒ‡å‘&lt;code&gt;vec&lt;/code&gt;å †ç¼“å†²åŒºä¸­&lt;code&gt;3&lt;/code&gt;çš„åœ°å€ï¼Œ&lt;code&gt;len = 2&lt;/code&gt;ï¼ˆåŒ…å«&lt;code&gt;3&lt;/code&gt;å’Œ&lt;code&gt;4&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Slice çš„ â€œæ— æ‰€æœ‰æƒâ€ ç‰¹æ€§æ„å‘³ç€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åˆ‡ç‰‡ä¸ç®¡ç†æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ•°æ®çš„ç”Ÿå‘½å‘¨æœŸç”±å…¶æŒ‡å‘çš„å®¹å™¨ï¼ˆArray/Vectorï¼‰å†³å®šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ‡ç‰‡çš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½è¶…è¿‡ç›®æ ‡å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼ˆå¦åˆ™ä¼šå‡ºç° â€œæ‚¬å‚åˆ‡ç‰‡â€ï¼Œè§¦å‘ç¼–è¯‘å™¨é”™è¯¯ï¼‰ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;slice&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;i32&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;slice&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// é”™è¯¯ï¼šarr çš„ç”Ÿå‘½å‘¨æœŸåœ¨å—ç»“æŸåç»“æŸï¼Œslice ä¼šæˆä¸ºæ‚¬å‚å¼•ç”¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="2-æ ¸å¿ƒç‰¹æ€§æ— æ‰€æœ‰æƒå€Ÿç”¨çº¦æŸä¸é€šç”¨æ€§"&gt;&lt;a href="#2-%e6%a0%b8%e5%bf%83%e7%89%b9%e6%80%a7%e6%97%a0%e6%89%80%e6%9c%89%e6%9d%83%e5%80%9f%e7%94%a8%e7%ba%a6%e6%9d%9f%e4%b8%8e%e9%80%9a%e7%94%a8%e6%80%a7" class="header-anchor"&gt;&lt;/a&gt;2. æ ¸å¿ƒç‰¹æ€§ï¼šæ— æ‰€æœ‰æƒã€å€Ÿç”¨çº¦æŸä¸é€šç”¨æ€§
&lt;/h3&gt;&lt;p&gt;Slice çš„ç‰¹æ€§å®Œå…¨å›´ç»• â€œè§†å›¾â€ è§’è‰²å±•å¼€ï¼Œæ˜¯ Rust å®ç° â€œæ³›å‹è¿ç»­æ•°æ®æ“ä½œâ€ çš„å…³é”®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ— æ‰€æœ‰æƒä¸ä¸å¯å¤åˆ¶æ€§&lt;/strong&gt;ï¼šSlice ä¸æ‹¥æœ‰æ•°æ®ï¼Œå› æ­¤æ—¢ä¸æ”¯æŒ&lt;code&gt;Copy&lt;/code&gt;ç‰¹æ€§ï¼ˆæ— æ³•ç›´æ¥èµ‹å€¼å¤åˆ¶ï¼‰ï¼Œä¹Ÿä¸æ”¯æŒ&lt;code&gt;Clone&lt;/code&gt;ç‰¹æ€§ï¼ˆé™¤éå…ƒç´ ç±»å‹æ”¯æŒ&lt;code&gt;Clone&lt;/code&gt;ï¼Œä¸”éœ€æ˜¾å¼è°ƒç”¨&lt;code&gt;clone()&lt;/code&gt;å¤åˆ¶æ•°æ®ï¼Œè€Œéåˆ‡ç‰‡æœ¬èº«ï¼‰ã€‚åˆ‡ç‰‡çš„ä¼ é€’æœ¬è´¨æ˜¯ â€œå¼•ç”¨ä¼ é€’â€ï¼Œä»…å¤åˆ¶èƒ–æŒ‡é’ˆï¼ˆå¼€é”€æå°ï¼Œ64 ä½ç³»ç»Ÿä¸Šä¸º 16 å­—èŠ‚ï¼‰ï¼Œä¸å¤åˆ¶åº•å±‚æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸¥æ ¼çš„å€Ÿç”¨è§„åˆ™&lt;/strong&gt;ï¼šä½œä¸ºå¼•ç”¨ç±»å‹ï¼ŒSlice éµå¾ª Rust çš„å€Ÿç”¨è§„åˆ™ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;vec!&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;slice1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// ä¸å¯å˜åˆ‡ç‰‡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// let slice2 = &amp;amp;mut vec[..]; // é”™è¯¯ï¼šä¸å¯å˜åˆ‡ç‰‡ä¸å¯å˜åˆ‡ç‰‡ä¸èƒ½å…±å­˜
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸å¯å˜åˆ‡ç‰‡ï¼ˆ&lt;code&gt;&amp;amp;[T]&lt;/code&gt;ï¼‰ï¼šå…è®¸åŒæ—¶å­˜åœ¨å¤šä¸ªä¸å¯å˜åˆ‡ç‰‡ï¼Œä½†ç¦æ­¢åŒæ—¶å­˜åœ¨å¯å˜åˆ‡ç‰‡æˆ–å¯¹å®¹å™¨çš„å¯å˜å€Ÿç”¨ï¼ˆé¿å…æ•°æ®ç«äº‰ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯å˜åˆ‡ç‰‡ï¼ˆ&lt;code&gt;&amp;amp;mut [T]&lt;/code&gt;ï¼‰ï¼šç¦æ­¢åŒæ—¶å­˜åœ¨å…¶ä»–ä»»ä½•åˆ‡ç‰‡æˆ–å€Ÿç”¨ï¼ˆå¯å˜å¼•ç”¨ç‹¬å æ•°æ®ï¼‰ï¼Œç¡®ä¿ä¿®æ”¹æ“ä½œçš„å®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ³›å‹æ“ä½œçš„ â€œç»Ÿä¸€æ¥å£â€&lt;/strong&gt;ï¼šç”±äº Slice å¯ä» Array å’Œ Vector ä¸­ç”Ÿæˆï¼Œä¸”æä¾›äº†ä¸°å¯Œçš„é€šç”¨æ–¹æ³•ï¼ˆå¦‚&lt;code&gt;sort()&lt;/code&gt;ã€&lt;code&gt;iter()&lt;/code&gt;ã€&lt;code&gt;split()&lt;/code&gt;ã€&lt;code&gt;join()&lt;/code&gt;ï¼‰ï¼Œå®ƒæˆä¸ºäº† Rust ä¸­ â€œå¤„ç†è¿ç»­æ•°æ®â€ çš„ç»Ÿä¸€æ¥å£ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ¥å—&lt;code&gt;&amp;amp;[T]&lt;/code&gt;å‚æ•°çš„å‡½æ•°ï¼Œæ—¢èƒ½å¤„ç† Array çš„åˆ‡ç‰‡ï¼Œä¹Ÿèƒ½å¤„ç† Vector çš„åˆ‡ç‰‡ï¼Œæ— éœ€ä¸ºä¸¤ç§å®¹å™¨å•ç‹¬å®ç°ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// è®¡ç®—åˆ‡ç‰‡ä¸­æ‰€æœ‰å…ƒç´ çš„å’Œï¼ˆæ³›å‹å‡½æ•°ï¼Œæ”¯æŒ Array å’Œ Vector çš„åˆ‡ç‰‡ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;sum_slice&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;: &lt;span class="nc"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;ops&lt;/span&gt;::&lt;span class="n"&gt;Add&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Output&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Default&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;slice&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nc"&gt;T&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;slice&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;fold&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;::&lt;span class="n"&gt;default&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;acc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;acc&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;vec!&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;Array sum: &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sum_slice&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è¾“å‡º 6
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;Vector sum: &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sum_slice&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è¾“å‡º 15
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="3-é€‚ç”¨åœºæ™¯æ³›åŒ–è¿ç»­æ•°æ®æ“ä½œä¸å®‰å…¨è®¿é—®"&gt;&lt;a href="#3-%e9%80%82%e7%94%a8%e5%9c%ba%e6%99%af%e6%b3%9b%e5%8c%96%e8%bf%9e%e7%bb%ad%e6%95%b0%e6%8d%ae%e6%93%8d%e4%bd%9c%e4%b8%8e%e5%ae%89%e5%85%a8%e8%ae%bf%e9%97%ae" class="header-anchor"&gt;&lt;/a&gt;3. é€‚ç”¨åœºæ™¯ï¼šæ³›åŒ–è¿ç»­æ•°æ®æ“ä½œä¸å®‰å…¨è®¿é—®
&lt;/h3&gt;&lt;p&gt;Slice çš„ â€œè§†å›¾â€ è§’è‰²ä½¿å…¶åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ä¸å¯æˆ–ç¼ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‡½æ•°å‚æ•°çš„æ³›åŒ–&lt;/strong&gt;ï¼šå½“å‡½æ•°éœ€è¦å¤„ç† â€œè¿ç»­æ•°æ®â€ ä½†ä¸å…³å¿ƒæ•°æ®çš„å…·ä½“å®¹å™¨ç±»å‹ï¼ˆArray/Vectorï¼‰æ—¶ï¼Œä½¿ç”¨&lt;code&gt;&amp;amp;[T]&lt;/code&gt;ä½œä¸ºå‚æ•°ï¼Œæé«˜å‡½æ•°çš„é€šç”¨æ€§ï¼ˆå¦‚ä¸Šè¿°&lt;code&gt;sum_slice&lt;/code&gt;å‡½æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰å…¨çš„éƒ¨åˆ†æ•°æ®è®¿é—®&lt;/strong&gt;ï¼šæ— éœ€å¤åˆ¶æ•°æ®ï¼Œå³å¯è®¿é—®å®¹å™¨ä¸­çš„éƒ¨åˆ†å…ƒç´ ï¼ˆå¦‚ä» Vector ä¸­æå–å­æ•°ç»„ã€å¤„ç†æ–‡ä»¶çš„æŸæ®µå­—èŠ‚æ•°æ®ï¼‰ï¼Œå‡å°‘å†…å­˜å¼€é”€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº¤äº’&lt;/strong&gt;ï¼šè®¸å¤š Rust æ ‡å‡†åº“å‡½æ•°ï¼ˆå¦‚&lt;code&gt;std::io::Read::read()&lt;/code&gt;ã€&lt;code&gt;std::fs::read_to_string()&lt;/code&gt;ï¼‰è¿”å›æˆ–æ¥å— Sliceï¼Œä½œä¸ºæ•°æ®ä¼ è¾“çš„ â€œä¸­é—´è½½ä½“â€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å››ä¸‰è€…çš„å…³è”ä¸å·®å¼‚ä¸€å¼ è¡¨çœ‹æ‡‚æ ¸å¿ƒåŒºåˆ«"&gt;&lt;a href="#%e5%9b%9b%e4%b8%89%e8%80%85%e7%9a%84%e5%85%b3%e8%81%94%e4%b8%8e%e5%b7%ae%e5%bc%82%e4%b8%80%e5%bc%a0%e8%a1%a8%e7%9c%8b%e6%87%82%e6%a0%b8%e5%bf%83%e5%8c%ba%e5%88%ab" class="header-anchor"&gt;&lt;/a&gt;å››ã€ä¸‰è€…çš„å…³è”ä¸å·®å¼‚ï¼šä¸€å¼ è¡¨çœ‹æ‡‚æ ¸å¿ƒåŒºåˆ«
&lt;/h2&gt;&lt;p&gt;ä¸ºäº†æ›´æ¸…æ™°åœ°å¯¹æ¯” Arrayã€Vector ä¸ Slice çš„æ ¸å¿ƒå·®å¼‚ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹è¡¨ä»åº•å±‚å­˜å‚¨ã€å¤§å°ç‰¹æ€§ã€æ‰€æœ‰æƒã€æ€§èƒ½ç­‰ç»´åº¦è¿›è¡Œæ€»ç»“ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;Arrayï¼ˆ&lt;code&gt;[T; N]&lt;/code&gt;ï¼‰&lt;/th&gt;
&lt;th&gt;Vectorï¼ˆ&lt;code&gt;Vec&amp;lt;T&amp;gt;&lt;/code&gt;ï¼‰&lt;/th&gt;
&lt;th&gt;Sliceï¼ˆ&lt;code&gt;&amp;amp;[T]&lt;/code&gt;/&lt;code&gt;&amp;amp;mut [T]&lt;/code&gt;ï¼‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚å­˜å‚¨ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ ˆï¼ˆStackï¼‰&lt;/td&gt;
&lt;td&gt;å…ƒæ•°æ®åœ¨æ ˆï¼Œæ•°æ®åœ¨å †ï¼ˆHeapï¼‰&lt;/td&gt;
&lt;td&gt;æ— å­˜å‚¨ï¼ŒæŒ‡å‘å…¶ä»–å®¹å™¨çš„å†…å­˜ï¼ˆæ ˆ / å †ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤§å°ç‰¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘æœŸå›ºå®šï¼ˆ&lt;code&gt;N&lt;/code&gt;ä¸ºå¸¸é‡ï¼‰&lt;/td&gt;
&lt;td&gt;è¿è¡ŒæœŸåŠ¨æ€å˜åŒ–ï¼ˆæ”¯æŒæ‰©å®¹ / æ”¶ç¼©ï¼‰&lt;/td&gt;
&lt;td&gt;è¿è¡ŒæœŸç¡®å®šï¼ˆç”±åˆ‡ç‰‡èŒƒå›´å†³å®šï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰€æœ‰æƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‹¥æœ‰æ•°æ®ï¼ˆå€¼è¯­ä¹‰ï¼Œèµ‹å€¼ä¼šå¤åˆ¶ï¼‰&lt;/td&gt;
&lt;td&gt;æ‹¥æœ‰æ•°æ®ï¼ˆå®¹å™¨è¯­ä¹‰ï¼Œç®¡ç†å †å†…å­˜ï¼‰&lt;/td&gt;
&lt;td&gt;æ— æ‰€æœ‰æƒï¼ˆä»…ä½œä¸ºæ•°æ®è§†å›¾ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— é¢å¤–å¼€é”€ï¼ˆä»…å­˜å‚¨å…ƒç´ ï¼‰&lt;/td&gt;
&lt;td&gt;æ ˆä¸Š 3 ä¸ª&lt;code&gt;usize&lt;/code&gt;ï¼ˆå…ƒæ•°æ®ï¼‰&lt;/td&gt;
&lt;td&gt;æ ˆä¸Š 2 ä¸ª&lt;code&gt;usize&lt;/code&gt;ï¼ˆèƒ–æŒ‡é’ˆï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…ƒç´ ä¿®æ”¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒï¼ˆéœ€&lt;code&gt;mut&lt;/code&gt;ï¼‰ï¼Œä½†å¤§å°ä¸å¯å˜&lt;/td&gt;
&lt;td&gt;æ”¯æŒåŠ¨æ€æ·»åŠ  / åˆ é™¤ / ä¿®æ”¹&lt;/td&gt;
&lt;td&gt;ä¸å¯å˜åˆ‡ç‰‡ç¦æ­¢ä¿®æ”¹ï¼Œå¯å˜åˆ‡ç‰‡æ”¯æŒä¿®æ”¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸å˜é‡ä½œç”¨åŸŸä¸€è‡´ï¼ˆæ ˆå†…å­˜è‡ªåŠ¨é‡Šæ”¾ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸å˜é‡ä½œç”¨åŸŸä¸€è‡´ï¼ˆå †å†…å­˜è‡ªåŠ¨é‡Šæ”¾ï¼‰&lt;/td&gt;
&lt;td&gt;ä¾èµ–ç›®æ ‡å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼ˆä¸å¯ç‹¬ç«‹å­˜åœ¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹æ–¹æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;len()&lt;/code&gt;ã€&lt;code&gt;iter()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;push()&lt;/code&gt;ã€&lt;code&gt;pop()&lt;/code&gt;ã€&lt;code&gt;insert()&lt;/code&gt;ã€&lt;code&gt;sort()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;sort()&lt;/code&gt;ã€&lt;code&gt;split()&lt;/code&gt;ã€&lt;code&gt;join()&lt;/code&gt;ã€&lt;code&gt;iter()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°è§„æ¨¡ã€å›ºå®šå¤§å°æ•°æ®&lt;/td&gt;
&lt;td&gt;å¤§è§„æ¨¡ã€åŠ¨æ€å˜åŒ–æ•°æ®&lt;/td&gt;
&lt;td&gt;æ³›åŒ–è¿ç»­æ•°æ®æ“ä½œã€éƒ¨åˆ†æ•°æ®è®¿é—®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="äº”å®è·µæŒ‡å—å¦‚ä½•é€‰æ‹©åˆé€‚çš„è¿ç»­æ•°æ®ç»“æ„"&gt;&lt;a href="#%e4%ba%94%e5%ae%9e%e8%b7%b5%e6%8c%87%e5%8d%97%e5%a6%82%e4%bd%95%e9%80%89%e6%8b%a9%e5%90%88%e9%80%82%e7%9a%84%e8%bf%9e%e7%bb%ad%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84" class="header-anchor"&gt;&lt;/a&gt;äº”ã€å®è·µæŒ‡å—ï¼šå¦‚ä½•é€‰æ‹©åˆé€‚çš„è¿ç»­æ•°æ®ç»“æ„ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;åœ¨å®é™…å¼€å‘ä¸­ï¼Œé€‰æ‹© Arrayã€Vector è¿˜æ˜¯ Sliceï¼Œéœ€ç»“åˆæ•°æ®è§„æ¨¡ã€å˜åŒ–é¢‘ç‡ã€å†…å­˜å¼€é”€ç­‰å› ç´ ç»¼åˆåˆ¤æ–­ï¼Œä»¥ä¸‹æ˜¯å…·ä½“çš„é€‰æ‹©æŒ‡å—ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© Array çš„åœºæ™¯&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ•°æ®æ•°é‡åœ¨ç¼–è¯‘æœŸå·²çŸ¥ä¸”å›ºå®šï¼ˆå¦‚ RGB é¢œè‰²ã€åæ ‡ç‚¹ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•°æ®è§„æ¨¡è¾ƒå°ï¼ˆé¿å…æ ˆæº¢å‡ºï¼Œæ ˆå¤§å°é€šå¸¸æœ‰é™ï¼Œå¦‚ Linux é»˜è®¤æ ˆå¤§å°ä¸º 8MBï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;éœ€æè‡´çš„å†…å­˜æ•ˆç‡ï¼ˆæ— é¢å¤–å…ƒæ•°æ®å¼€é”€ï¼‰æˆ–é¿å…å †å†…å­˜åˆ†é…ï¼ˆå¦‚åµŒå…¥å¼å¼€å‘ã€é«˜æ€§èƒ½åœºæ™¯ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© Vector çš„åœºæ™¯&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ•°æ®æ•°é‡åœ¨è¿è¡ŒæœŸç¡®å®šæˆ–åŠ¨æ€å˜åŒ–ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥åˆ—è¡¨ã€æ—¥å¿—é›†åˆï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•°æ®è§„æ¨¡è¾ƒå¤§ï¼ˆå †å†…å­˜å¯æ”¯æŒæ›´å¤§çš„å­˜å‚¨å®¹é‡ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;éœ€é¢‘ç¹æ·»åŠ  / åˆ é™¤å…ƒç´ ï¼ˆå°¤å…¶æ˜¯å°¾éƒ¨æ“ä½œï¼Œ&lt;code&gt;push()&lt;/code&gt;/&lt;code&gt;pop()&lt;/code&gt;æ•ˆç‡é«˜ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© Slice çš„åœºæ™¯&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ç¼–å†™æ³›åŒ–å‡½æ•°ï¼ˆéœ€åŒæ—¶æ”¯æŒ Array å’Œ Vector ä½œä¸ºè¾“å…¥ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>æ·±å…¥è§£æ Rust ä¸­çš„å­—ç¬¦ä¸²ç±»å‹ï¼šå…³ç³»ã€åŒºåˆ«ä¸ '0x00' å¤„ç†æ–¹æ¡ˆ</title><link>https://techinsight.pages.dev/p/%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90-rust-%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E5%85%B3%E7%B3%BB%E5%8C%BA%E5%88%AB%E4%B8%8E-0x00-%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88/</link><pubDate>Sat, 01 Nov 2025 21:46:01 +0800</pubDate><guid>https://techinsight.pages.dev/p/%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90-rust-%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E5%85%B3%E7%B3%BB%E5%8C%BA%E5%88%AB%E4%B8%8E-0x00-%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88/</guid><description>&lt;p&gt;å¯¹äºåˆšæ¥è§¦ Rust çš„å¼€å‘è€…è€Œè¨€ï¼Œå­—ç¬¦ä¸²ç±»å‹å¾€å¾€æ˜¯ä¸€é“ â€œå…¥é—¨éš¾å…³â€ã€‚ä¸åŒäºè®¸å¤šç¼–ç¨‹è¯­è¨€ä¸­å•ä¸€çš„å­—ç¬¦ä¸²ç±»å‹ï¼ŒRust æä¾›äº†&lt;code&gt;String&lt;/code&gt;ã€&lt;code&gt;str&lt;/code&gt;ä»¥åŠä¸€ç³»åˆ—ç›¸å…³è¡ç”Ÿç±»å‹ï¼Œå®ƒä»¬å„è‡ªæ‰¿è½½ç€ä¸åŒçš„è®¾è®¡ç›®æ ‡ä¸ä½¿ç”¨åœºæ™¯ï¼Œä¸”å†…éƒ¨å®ç°ç»†èŠ‚æ—¶å¸¸ä¼šå½±å“åˆ°å®é™…ç¼–ç ï¼Œå®¹æ˜“å¼•å‘ç±»å‹é”™è¯¯ã€‚æœ¬æ–‡å°†ç³»ç»Ÿæ¢³ç†è¿™äº›å­—ç¬¦ä¸²ç±»å‹çš„æ ¸å¿ƒåŒºåˆ«ä¸å…³è”ï¼Œå¹¶ç»“åˆ C/C++ å­—ç¬¦ä¸²å¤„ç†çš„ç—›ç‚¹ï¼Œè¯¦è§£ Rust å¦‚ä½•ä¼˜é›…è§£å†³ &amp;lsquo;\0&amp;rsquo;ï¼ˆå³ 0x00ï¼‰æˆªæ–­é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id="ä¸€æ ¸å¿ƒå­—ç¬¦ä¸²ç±»å‹strä¸stringçš„-å­ªç”Ÿå·®å¼‚"&gt;&lt;a href="#%e4%b8%80%e6%a0%b8%e5%bf%83%e5%ad%97%e7%ac%a6%e4%b8%b2%e7%b1%bb%e5%9e%8bstr%e4%b8%8estring%e7%9a%84-%e5%ad%aa%e7%94%9f%e5%b7%ae%e5%bc%82" class="header-anchor"&gt;&lt;/a&gt;ä¸€ã€æ ¸å¿ƒå­—ç¬¦ä¸²ç±»å‹ï¼š&lt;code&gt;str&lt;/code&gt;ä¸&lt;code&gt;String&lt;/code&gt;çš„ â€œå­ªç”Ÿå·®å¼‚â€
&lt;/h2&gt;&lt;p&gt;åœ¨ Rust çš„å­—ç¬¦ä¸²ä½“ç³»ä¸­ï¼Œ&lt;code&gt;str&lt;/code&gt;ä¸&lt;code&gt;String&lt;/code&gt;æ˜¯æœ€åŸºç¡€ä¸”æœ€å¸¸ç”¨çš„ä¸¤ä¸ªç±»å‹ï¼ŒäºŒè€…åå­—ç›¸ä¼¼å´æœ¬è´¨ä¸åŒï¼Œç†è§£å®ƒä»¬çš„å·®å¼‚æ˜¯æŒæ¡ Rust å­—ç¬¦ä¸²çš„å…³é”®ã€‚&lt;/p&gt;
&lt;h3 id="1-stré«˜æ€§èƒ½ä¸å¯å˜çš„-å­—ç¬¦ä¸²åˆ‡ç‰‡"&gt;&lt;a href="#1-str%e9%ab%98%e6%80%a7%e8%83%bd%e4%b8%8d%e5%8f%af%e5%8f%98%e7%9a%84-%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%88%87%e7%89%87" class="header-anchor"&gt;&lt;/a&gt;1. &lt;code&gt;str&lt;/code&gt;ï¼šé«˜æ€§èƒ½ã€ä¸å¯å˜çš„ â€œå­—ç¬¦ä¸²åˆ‡ç‰‡â€
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;str&lt;/code&gt;ï¼ˆå‘éŸ³ä¸º â€œstring sliceâ€ï¼‰æ˜¯ Rust ä¸­æœ€åº•å±‚çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€æ®µ&lt;strong&gt;UTF-8 ç¼–ç çš„å­—èŠ‚åºåˆ—çš„è§†å›¾&lt;/strong&gt;ï¼Œè‡ªèº«å¹¶ä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯æŒ‡å‘å†…å­˜ä¸­å·²å­˜åœ¨çš„å­—ç¬¦ä¸²æ•°æ®ï¼ˆå¦‚ç¨‹åºé™æ€åŒºçš„å­—é¢é‡ã€&lt;code&gt;String&lt;/code&gt;å†…éƒ¨çš„å­—èŠ‚ç¼“å†²åŒºç­‰ï¼‰ã€‚å…¶æ ¸å¿ƒç‰¹æ€§å¯æ¦‚æ‹¬ä¸ºä¸‰ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸å¯å˜æ€§ä¸é«˜æ€§èƒ½&lt;/strong&gt;ï¼š&lt;code&gt;str&lt;/code&gt;ä¸€æ—¦åˆ›å»ºï¼ˆæˆ–æŒ‡å‘ç‰¹å®šæ•°æ®ï¼‰ï¼Œå°±æ— æ³•ä¿®æ”¹å…¶å†…å®¹ã€‚è¿™ç§ä¸å¯å˜æ€§å¸¦æ¥äº†æ€§èƒ½ä¼˜åŠ¿ â€”â€” å½“&lt;code&gt;str&lt;/code&gt;è¢«å¤ç”¨ï¼ˆå¦‚ä¼ é€’ç»™å‡½æ•°ã€èµ‹å€¼ç»™å˜é‡ï¼‰æ—¶ï¼Œæ•°æ®ä¸ä¼šè¢«å¤åˆ¶ï¼Œä»…ä¼ é€’æŒ‡å‘æ•°æ®çš„ â€œè§†å›¾â€ï¼Œå‡å°‘äº†å†…å­˜å¼€é”€ä¸æ“ä½œç³»ç»Ÿçš„äº¤äº’ï¼Œå› æ­¤è¿è¡Œæ•ˆç‡æé«˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€šå¸¸ä»¥å¼•ç”¨å½¢å¼å­˜åœ¨ï¼ˆ&lt;/strong&gt;&lt;code&gt;&amp;amp;str&lt;/code&gt;&lt;strong&gt;ï¼‰&lt;/strong&gt;ï¼šç”±äº&lt;code&gt;str&lt;/code&gt;æœ¬èº«ä¸æ‹¥æœ‰æ•°æ®ï¼Œç›´æ¥ä½¿ç”¨&lt;code&gt;str&lt;/code&gt;ç±»å‹çš„å˜é‡ï¼ˆå¦‚&lt;code&gt;let s: str = &amp;quot;hello&amp;quot;;&lt;/code&gt;ï¼‰åœ¨ Rust ä¸­æ˜¯ä¸å…è®¸çš„ â€”â€” ç¼–è¯‘å™¨æ— æ³•ç¡®å®šå…¶å¤§å°ï¼ˆå­—ç¬¦ä¸²é•¿åº¦ä¸å›ºå®šï¼‰ã€‚å› æ­¤ï¼Œ&lt;code&gt;str&lt;/code&gt;å‡ ä¹æ€»æ˜¯ä»¥ä¸å¯å˜å¼•ç”¨&lt;code&gt;&amp;amp;str&lt;/code&gt;çš„å½¢å¼å‡ºç°ï¼Œ&lt;code&gt;&amp;amp;str&lt;/code&gt;ä¹Ÿè¢«ç›´æ¥ç§°ä¸º â€œå­—ç¬¦ä¸²åˆ‡ç‰‡â€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é™æ€ç”Ÿå‘½å‘¨æœŸçš„å­—é¢é‡&lt;/strong&gt;ï¼šæˆ‘ä»¬åœ¨ä»£ç ä¸­ç›´æ¥å†™çš„å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆå¦‚&lt;code&gt;&amp;quot;hello world&amp;quot;&lt;/code&gt;ï¼‰ï¼Œå…¶ç±»å‹å°±æ˜¯&lt;code&gt;&amp;amp;'static str&lt;/code&gt;ã€‚è¿™é‡Œçš„&lt;code&gt;'static&lt;/code&gt;ç”Ÿå‘½å‘¨æœŸè¡¨ç¤ºè¯¥å­—ç¬¦ä¸²æ•°æ®å­˜å‚¨åœ¨ç¨‹åºçš„&lt;strong&gt;é™æ€å†…å­˜åŒº&lt;/strong&gt;ï¼ˆç¼–è¯‘æ—¶ç¡®å®šï¼Œç¨‹åºè¿è¡ŒæœŸé—´å§‹ç»ˆå­˜åœ¨ï¼Œä¸”åªè¯»ï¼‰ï¼Œæ— éœ€å¼€å‘è€…æ‰‹åŠ¨ç®¡ç†å†…å­˜ç”Ÿå‘½å‘¨æœŸã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-stringå¯ä¿®æ”¹æ‹¥æœ‰æ‰€æœ‰æƒçš„-åŠ¨æ€å­—ç¬¦ä¸²"&gt;&lt;a href="#2-string%e5%8f%af%e4%bf%ae%e6%94%b9%e6%8b%a5%e6%9c%89%e6%89%80%e6%9c%89%e6%9d%83%e7%9a%84-%e5%8a%a8%e6%80%81%e5%ad%97%e7%ac%a6%e4%b8%b2" class="header-anchor"&gt;&lt;/a&gt;2. &lt;code&gt;String&lt;/code&gt;ï¼šå¯ä¿®æ”¹ã€æ‹¥æœ‰æ‰€æœ‰æƒçš„ â€œåŠ¨æ€å­—ç¬¦ä¸²â€
&lt;/h3&gt;&lt;p&gt;å¦‚æœè¯´&lt;code&gt;str&lt;/code&gt;æ˜¯ â€œå­—ç¬¦ä¸²çš„è§†å›¾â€ï¼Œé‚£ä¹ˆ&lt;code&gt;String&lt;/code&gt;å°±æ˜¯ â€œå­—ç¬¦ä¸²çš„æ‰€æœ‰è€…â€ã€‚&lt;code&gt;String&lt;/code&gt;æ˜¯ Rust æä¾›çš„&lt;strong&gt;å¯åŠ¨æ€ä¿®æ”¹çš„å­—ç¬¦ä¸²ç±»å‹&lt;/strong&gt;ï¼Œå…¶è®¾è®¡æ›´è´´è¿‘å…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚ Javaã€Pythonï¼‰ä¸­çš„å­—ç¬¦ä¸²ï¼Œæ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰€æœ‰æƒä¸å¯å˜æ€§&lt;/strong&gt;ï¼š&lt;code&gt;String&lt;/code&gt;æ‹¥æœ‰å…¶å†…éƒ¨å­˜å‚¨çš„ UTF-8 å­—èŠ‚åºåˆ—ï¼ˆæœ¬è´¨ä¸Šæ˜¯å¯¹&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;çš„å°è£…ï¼‰ï¼Œå› æ­¤å…·å¤‡å¯å˜æ€§ â€”â€” æ”¯æŒè¿½åŠ ï¼ˆ&lt;code&gt;push_str&lt;/code&gt;ï¼‰ã€æ’å…¥ï¼ˆ&lt;code&gt;insert&lt;/code&gt;ï¼‰ã€æˆªæ–­ï¼ˆ&lt;code&gt;truncate&lt;/code&gt;ï¼‰ç­‰ä¿®æ”¹æ“ä½œï¼Œä¸”ä¿®æ”¹æ—¶ä¼šè‡ªåŠ¨ç®¡ç†å†…å­˜ï¼ˆæ‰©å®¹ã€é‡Šæ”¾ï¼‰ã€‚åŒæ—¶ï¼Œä½œä¸º â€œowned typeâ€ï¼ˆæ‹¥æœ‰å‹ç±»å‹ï¼‰ï¼Œ&lt;code&gt;String&lt;/code&gt;çš„ç”Ÿå‘½å‘¨æœŸç”±å…¶æ‰€æœ‰è€…å†³å®šï¼šå½“æ‰€æœ‰è€…è¶…å‡ºä½œç”¨åŸŸï¼ˆå¦‚å‡½æ•°æ‰§è¡Œç»“æŸã€å˜é‡è¢«é”€æ¯ï¼‰æ—¶ï¼Œ&lt;code&gt;String&lt;/code&gt;ä¼šè‡ªåŠ¨é‡Šæ”¾å…¶å ç”¨çš„å†…å­˜ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸&lt;/strong&gt;&lt;code&gt;&amp;amp;str&lt;/code&gt;&lt;strong&gt;çš„è½¬æ¢å…³ç³»&lt;/strong&gt;ï¼š&lt;code&gt;String&lt;/code&gt;ä¸&lt;code&gt;&amp;amp;str&lt;/code&gt;æ˜¯ Rust å­—ç¬¦ä¸²ä½“ç³»ä¸­æœ€æ ¸å¿ƒçš„è½¬æ¢å¯¹ã€‚ç”±äº&lt;code&gt;String&lt;/code&gt;å†…éƒ¨å­˜å‚¨çš„æ˜¯ UTF-8 å­—èŠ‚åºåˆ—ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡&lt;code&gt;&amp;amp;*s&lt;/code&gt;ï¼ˆæˆ–&lt;code&gt;s.as_str()&lt;/code&gt;ï¼‰å°†&lt;code&gt;String&lt;/code&gt;è½¬æ¢ä¸º&lt;code&gt;&amp;amp;str&lt;/code&gt;ï¼ˆå³è·å–&lt;code&gt;String&lt;/code&gt;å†…éƒ¨æ•°æ®çš„ â€œè§†å›¾â€ï¼‰ï¼›åä¹‹ï¼Œè‹¥è¦å°†&lt;code&gt;&amp;amp;str&lt;/code&gt;è½¬æ¢ä¸º&lt;code&gt;String&lt;/code&gt;ï¼Œåˆ™éœ€è¦é€šè¿‡&lt;code&gt;to_string()&lt;/code&gt;æˆ–&lt;code&gt;String::from()&lt;/code&gt;æ–¹æ³• â€”â€” è¿™ä¼šå¤åˆ¶&lt;code&gt;&amp;amp;str&lt;/code&gt;æŒ‡å‘çš„æ•°æ®ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„&lt;code&gt;String&lt;/code&gt;ï¼ˆå› ä¸º&lt;code&gt;&amp;amp;str&lt;/code&gt;ä¸æ‹¥æœ‰æ•°æ®ï¼Œæ— æ³•ç›´æ¥ â€œè½¬åŒ–â€ ä¸ºæ‹¥æœ‰æ•°æ®çš„&lt;code&gt;String&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="äºŒæ‰©å±•å­—ç¬¦ä¸²ç±»å‹åº”å¯¹ç‰¹æ®Šåœºæ™¯çš„-å·¥å…·é›†"&gt;&lt;a href="#%e4%ba%8c%e6%89%a9%e5%b1%95%e5%ad%97%e7%ac%a6%e4%b8%b2%e7%b1%bb%e5%9e%8b%e5%ba%94%e5%af%b9%e7%89%b9%e6%ae%8a%e5%9c%ba%e6%99%af%e7%9a%84-%e5%b7%a5%e5%85%b7%e9%9b%86" class="header-anchor"&gt;&lt;/a&gt;äºŒã€æ‰©å±•å­—ç¬¦ä¸²ç±»å‹ï¼šåº”å¯¹ç‰¹æ®Šåœºæ™¯çš„ â€œå·¥å…·é›†â€
&lt;/h2&gt;&lt;p&gt;é™¤äº†&lt;code&gt;str&lt;/code&gt;ä¸&lt;code&gt;String&lt;/code&gt;ï¼ŒRust è¿˜æä¾›äº†ä¸€ç³»åˆ—é’ˆå¯¹ç‰¹æ®Šåœºæ™¯çš„å­—ç¬¦ä¸² / å­—èŠ‚ç±»å‹ï¼Œå®ƒä»¬å„è‡ªè§£å†³ç‰¹å®šé¢†åŸŸçš„é—®é¢˜ï¼Œå…±åŒæ„æˆäº†å®Œæ•´çš„å­—ç¬¦ä¸²å¤„ç†ä½“ç³»ã€‚&lt;/p&gt;
&lt;h3 id="1-charå›ºå®šå®½åº¦çš„-å•ä¸ª-unicode-å­—ç¬¦"&gt;&lt;a href="#1-char%e5%9b%ba%e5%ae%9a%e5%ae%bd%e5%ba%a6%e7%9a%84-%e5%8d%95%e4%b8%aa-unicode-%e5%ad%97%e7%ac%a6" class="header-anchor"&gt;&lt;/a&gt;1. &lt;code&gt;char&lt;/code&gt;ï¼šå›ºå®šå®½åº¦çš„ â€œå•ä¸ª Unicode å­—ç¬¦â€
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;char&lt;/code&gt;å¹¶éå­—ç¬¦ä¸²ç±»å‹ï¼Œè€Œæ˜¯ Rust ä¸­è¡¨ç¤º â€œå•ä¸ª Unicode å­—ç¬¦â€ çš„ç±»å‹ï¼Œå…¶æ ¸å¿ƒç‰¹ç‚¹ä¸å­—ç¬¦ä¸²ç±»å‹å½¢æˆé²œæ˜å¯¹æ¯”ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼–ç ä¸å®½åº¦&lt;/strong&gt;ï¼š&lt;code&gt;char&lt;/code&gt;é‡‡ç”¨&lt;strong&gt;UCS-4/UTF-32 ç¼–ç &lt;/strong&gt;ï¼Œæ¯ä¸ª&lt;code&gt;char&lt;/code&gt;å›ºå®šå ç”¨ 4 ä¸ªå­—èŠ‚ï¼Œæ— è®ºå…¶è¡¨ç¤ºçš„æ˜¯è‹±æ–‡å­—æ¯ï¼ˆå¦‚ &amp;lsquo;a&amp;rsquo;ï¼‰è¿˜æ˜¯å¤æ‚æ±‰å­—ï¼ˆå¦‚ &amp;rsquo; ä¸­&amp;rsquo;ï¼‰ã€‚è¿™ä¸&lt;code&gt;str&lt;/code&gt;/&lt;code&gt;String&lt;/code&gt;çš„ UTF-8 ç¼–ç ä¸åŒ â€”â€”UTF-8 ç¼–ç ä¸‹ï¼Œå­—ç¬¦å®½åº¦å¯å˜ï¼ˆ1~4 å­—èŠ‚ï¼‰ï¼Œè‹±æ–‡å­—æ¯å  1 å­—èŠ‚ï¼Œæ±‰å­—å  3 å­—èŠ‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”¨é€”ä¸è½¬æ¢ä»£ä»·&lt;/strong&gt;ï¼š&lt;code&gt;char&lt;/code&gt;çš„å›ºå®šå®½åº¦ä½¿å…¶æ›´é€‚åˆéœ€è¦ç²¾ç¡®å­—ç¬¦æ“ä½œçš„åœºæ™¯ï¼ˆå¦‚å­—ç¬¦éå†ã€å­—ç¬¦åŒ¹é…ï¼‰ï¼Œç¼–è¯‘å™¨ä¹Ÿèƒ½æ›´è½»æ¾åœ°æ¨æ–­å…¶å†…å­˜å¸ƒå±€ã€‚ä½†ä»&lt;code&gt;str&lt;/code&gt;/&lt;code&gt;String&lt;/code&gt;è½¬æ¢ä¸º&lt;code&gt;char&lt;/code&gt;ï¼ˆå¦‚é€šè¿‡&lt;code&gt;chars()&lt;/code&gt;æ–¹æ³•è¿­ä»£ï¼‰ä¼šäº§ç”Ÿä¸€å®šçš„æ€§èƒ½ä»£ä»· â€”â€” éœ€è¦è§£æ UTF-8 çš„å¯å˜å®½åº¦å­—èŠ‚åºåˆ—ï¼Œå°†å…¶æ‹†åˆ†ä¸ºå•ä¸ª&lt;code&gt;char&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-u8ä¸vecu8-raw-å­—èŠ‚çš„-åº•å±‚è½½ä½“"&gt;&lt;a href="#2-u8%e4%b8%8evecu8-raw-%e5%ad%97%e8%8a%82%e7%9a%84-%e5%ba%95%e5%b1%82%e8%bd%bd%e4%bd%93" class="header-anchor"&gt;&lt;/a&gt;2. &lt;code&gt;[u8]&lt;/code&gt;ä¸&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;ï¼š raw å­—èŠ‚çš„ â€œåº•å±‚è½½ä½“â€
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;[u8]&lt;/code&gt;ï¼ˆå­—èŠ‚åˆ‡ç‰‡ï¼‰ä¸&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;ï¼ˆå­—èŠ‚å‘é‡ï¼‰æ˜¯ Rust ä¸­å¤„ç† â€œåŸå§‹å­—èŠ‚æ•°æ®â€ çš„ç±»å‹ï¼Œå®ƒä»¬ä¸å­—ç¬¦ä¸²ç±»å‹çš„å…³ç³»å¯æ¦‚æ‹¬ä¸º â€œåº•å±‚å®ç°ä¸ä¸Šå±‚å°è£…â€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;[u8]&lt;/code&gt;&lt;strong&gt;ï¼šå­—èŠ‚åˆ‡ç‰‡&lt;/strong&gt;ï¼šä¸&lt;code&gt;str&lt;/code&gt;ç±»ä¼¼ï¼Œ&lt;code&gt;[u8]&lt;/code&gt;æ˜¯ä¸€æ®µå­—èŠ‚åºåˆ—çš„ â€œè§†å›¾â€ï¼Œä¸æ‹¥æœ‰æ•°æ®ï¼Œé€šå¸¸ä»¥å¼•ç”¨å½¢å¼&lt;code&gt;&amp;amp;[u8]&lt;/code&gt;å­˜åœ¨ï¼ˆå¦‚è¯»å–æ–‡ä»¶æ—¶è·å¾—çš„äºŒè¿›åˆ¶æ•°æ®ï¼‰ã€‚&lt;code&gt;[u8]&lt;/code&gt;æœ¬èº«ä¸ä¿è¯æ•°æ®æ˜¯ UTF-8 ç¼–ç  â€”â€” å®ƒåªæ˜¯çº¯ç²¹çš„å­—èŠ‚é›†åˆï¼Œå¯èƒ½å­˜å‚¨å›¾ç‰‡ã€è§†é¢‘ç­‰äºŒè¿›åˆ¶æ•°æ®ï¼Œä¹Ÿå¯èƒ½å­˜å‚¨é UTF-8 çš„æ–‡æœ¬ï¼ˆå¦‚ GBK ç¼–ç çš„ä¸­æ–‡ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;&lt;strong&gt;ï¼šå­—èŠ‚å‘é‡&lt;/strong&gt;ï¼šä¸&lt;code&gt;String&lt;/code&gt;ç±»ä¼¼ï¼Œ&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;æ˜¯æ‹¥æœ‰æ•°æ®çš„å­—èŠ‚é›†åˆï¼Œæ”¯æŒåŠ¨æ€ä¿®æ”¹ï¼ˆè¿½åŠ ã€åˆ é™¤å­—èŠ‚ï¼‰ï¼Œå¹¶è‡ªåŠ¨ç®¡ç†å†…å­˜ã€‚&lt;code&gt;String&lt;/code&gt;æœ¬è´¨ä¸Šå°±æ˜¯å¯¹&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;çš„å°è£… â€”â€” å®ƒåœ¨&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;çš„åŸºç¡€ä¸Šå¢åŠ äº† â€œæ•°æ®å¿…é¡»æ˜¯ UTF-8 ç¼–ç â€ çš„çº¦æŸï¼Œå¹¶æä¾›äº†å­—ç¬¦ä¸²ç›¸å…³çš„æ–¹æ³•ï¼ˆå¦‚&lt;code&gt;contains()&lt;/code&gt;ã€&lt;code&gt;replace()&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸å­—ç¬¦ä¸²ç±»å‹çš„å¯¹åº”å…³ç³»&lt;/strong&gt;ï¼šè‹¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬å®ƒä»¬çš„å…³è”ï¼Œå³ â€œ&lt;code&gt;String&lt;/code&gt;æ˜¯&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;çš„ UTF-8 å°è£…ï¼Œ&lt;code&gt;str&lt;/code&gt;æ˜¯&lt;code&gt;[u8]&lt;/code&gt;çš„ UTF-8 è§†å›¾â€ã€‚å…·ä½“æ¥è¯´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;str&lt;/code&gt; â†” &lt;code&gt;[u8]&lt;/code&gt;ï¼š&lt;code&gt;str&lt;/code&gt;æ˜¯&lt;code&gt;[u8]&lt;/code&gt;çš„ â€œUTF-8 çº¦æŸç‰ˆâ€ï¼Œ&lt;code&gt;&amp;amp;str&lt;/code&gt;å¯ä»¥é€šè¿‡&lt;code&gt;as_bytes()&lt;/code&gt;æ–¹æ³•è½¬æ¢ä¸º&lt;code&gt;&amp;amp;[u8]&lt;/code&gt;ï¼ˆè·å– UTF-8 å­—èŠ‚è§†å›¾ï¼‰ï¼Œè€Œ&lt;code&gt;&amp;amp;[u8]&lt;/code&gt;éœ€è¦é€šè¿‡&lt;code&gt;std::str::from_utf8()&lt;/code&gt;æ–¹æ³•éªŒè¯ UTF-8 åˆæ³•æ€§åæ‰èƒ½è½¬æ¢ä¸º&lt;code&gt;&amp;amp;str&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;String&lt;/code&gt; â†” &lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;ï¼š&lt;code&gt;String&lt;/code&gt;å¯ä»¥é€šè¿‡&lt;code&gt;into_bytes()&lt;/code&gt;æ–¹æ³•è½¬æ¢ä¸º&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;ï¼ˆè½¬ç§»æ‰€æœ‰æƒï¼Œ&lt;code&gt;String&lt;/code&gt;ä¼šè¢«æ¶ˆè€—ï¼‰ï¼Œæˆ–é€šè¿‡&lt;code&gt;as_bytes_mut()&lt;/code&gt;è·å–å¯å˜å­—èŠ‚å¼•ç”¨ï¼›&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;åˆ™å¯é€šè¿‡&lt;code&gt;String::from_utf8()&lt;/code&gt;æ–¹æ³•ï¼ˆéªŒè¯ UTF-8ï¼‰è½¬æ¢ä¸º&lt;code&gt;String&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-stdffiosstringé€‚é…ç³»ç»Ÿçš„-åŸç”Ÿå­—ç¬¦ä¸²"&gt;&lt;a href="#3-stdffiosstring%e9%80%82%e9%85%8d%e7%b3%bb%e7%bb%9f%e7%9a%84-%e5%8e%9f%e7%94%9f%e5%ad%97%e7%ac%a6%e4%b8%b2" class="header-anchor"&gt;&lt;/a&gt;3. &lt;code&gt;std::ffi::OSString&lt;/code&gt;ï¼šé€‚é…ç³»ç»Ÿçš„ â€œåŸç”Ÿå­—ç¬¦ä¸²â€
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;OSString&lt;/code&gt;æ˜¯ Rust ä¸ºå¤„ç†&lt;strong&gt;æ“ä½œç³»ç»ŸåŸç”Ÿå­—ç¬¦ä¸²&lt;/strong&gt;è®¾è®¡çš„ç±»å‹ï¼Œä¸»è¦ç”¨äºä¸æ“ä½œç³»ç»Ÿ API äº¤äº’ï¼ˆå¦‚è·å–ç¯å¢ƒå˜é‡ã€å¤„ç†æ–‡ä»¶è·¯å¾„ï¼‰ï¼Œå…¶æ ¸å¿ƒç‰¹ç‚¹æ˜¯ â€œå…¼å®¹æ€§ä¼˜å…ˆâ€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼–ç æ— å…³æ€§&lt;/strong&gt;ï¼šä¸åŒäº&lt;code&gt;String&lt;/code&gt;å¼ºåˆ¶ UTF-8 ç¼–ç ï¼Œ&lt;code&gt;OSString&lt;/code&gt;ä¼šæ ¹æ®æ“ä½œç³»ç»Ÿçš„åŸç”Ÿç¼–ç å­˜å‚¨å­—ç¬¦ä¸²ï¼ˆå¦‚ Windows çš„ UTF-16ã€Linux çš„ UTF-8ï¼‰ï¼Œä¸”ä¸ä¿è¯æ•°æ®æ˜¯ UTF-8 æ ¼å¼ â€”â€” è¿™æ„å‘³ç€å®ƒå¯èƒ½åŒ…å«æ— æ•ˆçš„ UTF-8 å­—èŠ‚ï¼Œç”šè‡³åŒ…å«&lt;code&gt;\0&lt;/code&gt;ï¼ˆ0x00ï¼‰å­—ç¬¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸&lt;/strong&gt;&lt;code&gt;String&lt;/code&gt;&lt;strong&gt;çš„è½¬æ¢&lt;/strong&gt;ï¼šç”±äºç¼–ç ä¸ç¡®å®šæ€§ï¼Œ&lt;code&gt;OSString&lt;/code&gt;ä¸&lt;code&gt;String&lt;/code&gt;çš„è½¬æ¢éœ€è¦æ˜¾å¼å¤„ç†ï¼šé€šè¿‡&lt;code&gt;into_string()&lt;/code&gt;æ–¹æ³•å°è¯•è½¬æ¢ï¼Œè‹¥å†…éƒ¨æ•°æ®æ˜¯æœ‰æ•ˆçš„ UTF-8ï¼Œåˆ™è¿”å›&lt;code&gt;Ok(String)&lt;/code&gt;ï¼›å¦åˆ™è¿”å›&lt;code&gt;Err(OsString)&lt;/code&gt;ï¼Œé¿å…å› ç¼–ç é”™è¯¯å¯¼è‡´ç¨‹åºå´©æºƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="4-stdpathpathä¸“æ³¨è·¯å¾„çš„-ç±»å‹å®‰å…¨å·¥å…·"&gt;&lt;a href="#4-stdpathpath%e4%b8%93%e6%b3%a8%e8%b7%af%e5%be%84%e7%9a%84-%e7%b1%bb%e5%9e%8b%e5%ae%89%e5%85%a8%e5%b7%a5%e5%85%b7" class="header-anchor"&gt;&lt;/a&gt;4. &lt;code&gt;std::path::Path&lt;/code&gt;ï¼šä¸“æ³¨è·¯å¾„çš„ â€œç±»å‹å®‰å…¨å·¥å…·â€
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Path&lt;/code&gt;æ˜¯ Rust ä¸­ä¸“é—¨ç”¨äº&lt;strong&gt;å¤„ç†æ–‡ä»¶ç³»ç»Ÿè·¯å¾„&lt;/strong&gt;çš„ç±»å‹ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯å¯¹ â€œè·¯å¾„å­—ç¬¦ä¸²â€ çš„å°è£…ï¼Œæ ¸å¿ƒä¼˜åŠ¿æ˜¯ â€œç±»å‹å®‰å…¨ä¸è·¨å¹³å°é€‚é…â€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·¯å¾„è¯­ä¹‰ä¿éšœ&lt;/strong&gt;ï¼š&lt;code&gt;Path&lt;/code&gt;ä¼šè‡ªåŠ¨å¤„ç†ä¸åŒæ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦ï¼ˆå¦‚ Windows çš„&lt;code&gt;\&lt;/code&gt;ä¸ Linux çš„&lt;code&gt;/&lt;/code&gt;ï¼‰ï¼Œå¹¶æä¾›è·¯å¾„ç›¸å…³çš„æ–¹æ³•ï¼ˆå¦‚&lt;code&gt;parent()&lt;/code&gt;è·å–çˆ¶ç›®å½•ã€&lt;code&gt;file_name()&lt;/code&gt;è·å–æ–‡ä»¶åã€&lt;code&gt;exists()&lt;/code&gt;åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼‰ï¼Œé¿å…å¼€å‘è€…æ‰‹åŠ¨æ‹¼æ¥è·¯å¾„æ—¶å‡ºç°çš„è·¨å¹³å°é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸å­—ç¬¦ä¸²ç±»å‹çš„å…³è”&lt;/strong&gt;ï¼š&lt;code&gt;Path&lt;/code&gt;å¯ä»¥é€šè¿‡&lt;code&gt;as_os_str()&lt;/code&gt;æ–¹æ³•è½¬æ¢ä¸º&lt;code&gt;&amp;amp;OsStr&lt;/code&gt;ï¼ˆ&lt;code&gt;OSString&lt;/code&gt;çš„å¼•ç”¨å½¢å¼ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡&lt;code&gt;to_str()&lt;/code&gt;æ–¹æ³•å°è¯•è½¬æ¢ä¸º&lt;code&gt;&amp;amp;str&lt;/code&gt;ï¼ˆè‹¥è·¯å¾„æ˜¯æœ‰æ•ˆçš„ UTF-8ï¼‰â€”â€” è¿™æ—¢ä¿è¯äº†è·¯å¾„å¤„ç†çš„çµæ´»æ€§ï¼Œåˆé€šè¿‡ç±»å‹çº¦æŸé¿å…äº†å°†æ™®é€šå­—ç¬¦ä¸²è¯¯ç”¨ä½œè·¯å¾„çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="ä¸‰ä»-cc-ç—›ç‚¹çœ‹-rustå¦‚ä½•è§£å†³-0-æˆªæ–­é—®é¢˜"&gt;&lt;a href="#%e4%b8%89%e4%bb%8e-cc-%e7%97%9b%e7%82%b9%e7%9c%8b-rust%e5%a6%82%e4%bd%95%e8%a7%a3%e5%86%b3-0-%e6%88%aa%e6%96%ad%e9%97%ae%e9%a2%98" class="header-anchor"&gt;&lt;/a&gt;ä¸‰ã€ä» C/C++ ç—›ç‚¹çœ‹ Rustï¼šå¦‚ä½•è§£å†³ &amp;lsquo;\0&amp;rsquo; æˆªæ–­é—®é¢˜ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;åœ¨ C/C++ ä¸­ï¼Œå­—ç¬¦ä¸²å¤„ç†ä¸€ç›´å­˜åœ¨ä¸€ä¸ªç»å…¸ç—›ç‚¹ï¼š&lt;strong&gt;ä¾èµ– &amp;lsquo;\0&amp;rsquo; ä½œä¸ºå­—ç¬¦ä¸²ç»“æŸæ ‡å¿—&lt;/strong&gt;ã€‚è¿™ä¸€è®¾è®¡å¯¼è‡´äº†è¯¸å¤šé—®é¢˜ï¼Œè€Œ Rust é€šè¿‡åº•å±‚è®¾è®¡çš„ä¼˜åŒ–ï¼Œä»æ ¹æºä¸Šè§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id="1-cc-çš„-0-ç—›ç‚¹ä¸ºä½•éœ€è¦-æŒ‡é’ˆ--é•¿åº¦-åŒå‚æ•°"&gt;&lt;a href="#1-cc-%e7%9a%84-0-%e7%97%9b%e7%82%b9%e4%b8%ba%e4%bd%95%e9%9c%80%e8%a6%81-%e6%8c%87%e9%92%88--%e9%95%bf%e5%ba%a6-%e5%8f%8c%e5%8f%82%e6%95%b0" class="header-anchor"&gt;&lt;/a&gt;1. C/C++ çš„ &amp;lsquo;\0&amp;rsquo; ç—›ç‚¹ï¼šä¸ºä½•éœ€è¦ â€œæŒ‡é’ˆ + é•¿åº¦â€ åŒå‚æ•°ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;åœ¨ C/C++ ä¸­ï¼Œå­—ç¬¦ä¸²æœ¬è´¨ä¸Šæ˜¯&lt;code&gt;char*&lt;/code&gt;ï¼ˆå­—ç¬¦æŒ‡é’ˆï¼‰ï¼Œé€šè¿‡åœ¨å­—ç¬¦ä¸²æœ«å°¾æ·»åŠ &lt;code&gt;\0&lt;/code&gt;ï¼ˆç©ºå­—ç¬¦ï¼ŒASCII ç  0x00ï¼‰æ¥æ ‡è®°ç»“æŸã€‚è¿™ç§è®¾è®¡çš„ç¼ºé™·ååˆ†æ˜æ˜¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&amp;rsquo;\0&amp;rsquo; æˆªæ–­é£é™©&lt;/strong&gt;ï¼šè‹¥å­—ç¬¦ä¸²å†…éƒ¨åŒ…å«&lt;code&gt;\0&lt;/code&gt;å­—ç¬¦ï¼ˆå¦‚äºŒè¿›åˆ¶æ•°æ®ä¸­çš„ 0x00 å­—èŠ‚ï¼‰ï¼Œåˆ™å­—ç¬¦ä¸²å¤„ç†å‡½æ•°ï¼ˆå¦‚&lt;code&gt;strlen()&lt;/code&gt;ã€&lt;code&gt;strcpy()&lt;/code&gt;ï¼‰ä¼šå°†å…¶è¯¯è®¤ä¸ºç»“æŸæ ‡å¿—ï¼Œå¯¼è‡´å­—ç¬¦ä¸²è¢«æˆªæ–­ â€”â€” ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²&lt;code&gt;&amp;quot;a\0b&amp;quot;&lt;/code&gt;åœ¨ C ä¸­ä¼šè¢«&lt;code&gt;strlen()&lt;/code&gt;åˆ¤å®šä¸ºé•¿åº¦ 1ï¼Œ&lt;code&gt;strcpy()&lt;/code&gt;åªä¼šå¤åˆ¶&lt;code&gt;'a'&lt;/code&gt;å’Œ&lt;code&gt;\0&lt;/code&gt;ï¼Œä¸¢å¤±&lt;code&gt;'b'&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;â€œæŒ‡é’ˆ + é•¿åº¦â€ çš„å¦¥å&lt;/strong&gt;ï¼šä¸ºè§£å†³æˆªæ–­é—®é¢˜ï¼ŒC/C++ ä¸­è®¸å¤šåº•å±‚å‡½æ•°ï¼ˆå¦‚&lt;code&gt;strncpy()&lt;/code&gt;ã€&lt;code&gt;read()&lt;/code&gt;ï¼‰ä¸å¾—ä¸å¢åŠ ä¸€ä¸ª â€œé•¿åº¦å‚æ•°â€ï¼Œè¦æ±‚å¼€å‘è€…æ˜¾å¼ä¼ å…¥å­—ç¬¦ä¸²çš„å®é™…é•¿åº¦ï¼Œä»¥é¿å…&lt;code&gt;\0&lt;/code&gt;è¯¯åˆ¤ã€‚ä½†è¿™ç§æ–¹å¼ä¾èµ–å¼€å‘è€…æ‰‹åŠ¨ç»´æŠ¤ â€œæŒ‡é’ˆä¸é•¿åº¦çš„ä¸€è‡´æ€§â€ï¼Œå®¹æ˜“å› å‚æ•°ä¼ é€’é”™è¯¯å¯¼è‡´ç¼“å†²åŒºæº¢å‡ºæˆ–æ•°æ®ä¸¢å¤±ï¼Œå®‰å…¨æ€§è¾ƒä½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-rust-çš„è§£å†³æ–¹æ¡ˆä»¥-é•¿åº¦--utf-8-çº¦æŸ-æ›¿ä»£-0-æ ‡å¿—"&gt;&lt;a href="#2-rust-%e7%9a%84%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88%e4%bb%a5-%e9%95%bf%e5%ba%a6--utf-8-%e7%ba%a6%e6%9d%9f-%e6%9b%bf%e4%bb%a3-0-%e6%a0%87%e5%bf%97" class="header-anchor"&gt;&lt;/a&gt;2. Rust çš„è§£å†³æ–¹æ¡ˆï¼šä»¥ â€œé•¿åº¦ + UTF-8 çº¦æŸâ€ æ›¿ä»£ &amp;lsquo;\0&amp;rsquo; æ ‡å¿—
&lt;/h3&gt;&lt;p&gt;Rust å½»åº•æŠ›å¼ƒäº† â€œä¾èµ– &amp;lsquo;\0&amp;rsquo; æ ‡è®°å­—ç¬¦ä¸²ç»“æŸâ€ çš„è®¾è®¡ï¼Œé€šè¿‡ â€œæ˜¾å¼é•¿åº¦å­˜å‚¨ + ç¼–ç çº¦æŸâ€ çš„ç»„åˆï¼Œä»æ ¹æºä¸Šé¿å…äº† &amp;lsquo;\0&amp;rsquo; æˆªæ–­é—®é¢˜ï¼Œå…·ä½“å®ç°å¯åˆ†ä¸ºä¸‰å±‚ï¼š&lt;/p&gt;
&lt;h4 id="1åº•å±‚æ‰€æœ‰å­—ç¬¦ä¸²--å­—èŠ‚ç±»å‹å‡å­˜å‚¨-é•¿åº¦ä¿¡æ¯"&gt;&lt;a href="#1%e5%ba%95%e5%b1%82%e6%89%80%e6%9c%89%e5%ad%97%e7%ac%a6%e4%b8%b2--%e5%ad%97%e8%8a%82%e7%b1%bb%e5%9e%8b%e5%9d%87%e5%ad%98%e5%82%a8-%e9%95%bf%e5%ba%a6%e4%bf%a1%e6%81%af" class="header-anchor"&gt;&lt;/a&gt;ï¼ˆ1ï¼‰åº•å±‚ï¼šæ‰€æœ‰å­—ç¬¦ä¸² / å­—èŠ‚ç±»å‹å‡å­˜å‚¨ â€œé•¿åº¦ä¿¡æ¯â€
&lt;/h4&gt;&lt;p&gt;åœ¨ Rust ä¸­ï¼Œæ— è®ºæ˜¯&lt;code&gt;&amp;amp;str&lt;/code&gt;ã€&lt;code&gt;String&lt;/code&gt;ï¼Œè¿˜æ˜¯&lt;code&gt;&amp;amp;[u8]&lt;/code&gt;ã€&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;ï¼Œå…¶å†…éƒ¨éƒ½&lt;strong&gt;æ˜¾å¼å­˜å‚¨äº†æ•°æ®çš„é•¿åº¦&lt;/strong&gt;ï¼Œè€Œéä¾èµ–&lt;code&gt;\0&lt;/code&gt;åˆ¤æ–­ç»“æŸï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œ&lt;code&gt;&amp;amp;str&lt;/code&gt;çš„åº•å±‚ç»“æ„åŒ…å«ä¸¤ä¸ªå­—æ®µï¼š&lt;code&gt;*const u8&lt;/code&gt;ï¼ˆæŒ‡å‘ UTF-8 å­—èŠ‚åºåˆ—çš„æŒ‡é’ˆï¼‰å’Œ&lt;code&gt;usize&lt;/code&gt;ï¼ˆå­—èŠ‚åºåˆ—çš„é•¿åº¦ï¼‰ï¼›&lt;code&gt;String&lt;/code&gt;åˆ™æ˜¯å¯¹&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;çš„å°è£…ï¼Œè€Œ&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;åŒæ ·å­˜å‚¨äº†é•¿åº¦ï¼ˆ&lt;code&gt;len&lt;/code&gt;ï¼‰å’Œå®¹é‡ï¼ˆ&lt;code&gt;cap&lt;/code&gt;ï¼‰ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿™ç§è®¾è®¡æ„å‘³ç€ï¼ŒRust çš„å­—ç¬¦ä¸²å¤„ç†å‡½æ•°ï¼ˆå¦‚&lt;code&gt;len()&lt;/code&gt;ã€&lt;code&gt;contains()&lt;/code&gt;ã€&lt;code&gt;copy_from_slice()&lt;/code&gt;ï¼‰æ— éœ€æ‰«æ&lt;code&gt;\0&lt;/code&gt;ï¼Œç›´æ¥é€šè¿‡å†…éƒ¨å­˜å‚¨çš„é•¿åº¦å³å¯ç¡®å®šæ•°æ®èŒƒå›´ï¼Œå³ä½¿å­—ç¬¦ä¸²å†…éƒ¨åŒ…å«&lt;code&gt;\0&lt;/code&gt;ï¼Œä¹Ÿä¸ä¼šå½±å“å¤„ç†ç»“æœã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// å­—ç¬¦ä¸²å†…éƒ¨åŒ…å«&amp;#39;\0&amp;#39;ï¼Œä½†Rustèƒ½æ­£ç¡®è¯†åˆ«é•¿åº¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;a&lt;/span&gt;&lt;span class="se"&gt;\0&lt;/span&gt;&lt;span class="s"&gt;b&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;é•¿åº¦: &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è¾“å‡º3ï¼ˆ&amp;#39;a&amp;#39;å 1å­—èŠ‚ï¼Œ&amp;#39;\0&amp;#39;å 1å­—èŠ‚ï¼Œ&amp;#39;b&amp;#39;å 1å­—èŠ‚ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;æ˜¯å¦åŒ…å«&amp;#39;b&amp;#39;? &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;contains&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;b&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è¾“å‡ºtrue
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id="2ä¸­å±‚utf-8-ç¼–ç çº¦æŸæ’é™¤-æ— æ•ˆ-0-åœºæ™¯"&gt;&lt;a href="#2%e4%b8%ad%e5%b1%82utf-8-%e7%bc%96%e7%a0%81%e7%ba%a6%e6%9d%9f%e6%8e%92%e9%99%a4-%e6%97%a0%e6%95%88-0-%e5%9c%ba%e6%99%af" class="header-anchor"&gt;&lt;/a&gt;ï¼ˆ2ï¼‰ä¸­å±‚ï¼šUTF-8 ç¼–ç çº¦æŸæ’é™¤ â€œæ— æ•ˆ &amp;lsquo;\0&amp;rsquo; åœºæ™¯â€
&lt;/h4&gt;&lt;p&gt;å¯¹äº&lt;code&gt;str&lt;/code&gt;å’Œ&lt;code&gt;String&lt;/code&gt;ï¼ŒRust å¼ºåˆ¶è¦æ±‚æ•°æ®å¿…é¡»æ˜¯&lt;strong&gt;åˆæ³•çš„ UTF-8 ç¼–ç &lt;/strong&gt;ï¼Œè€Œ UTF-8 ç¼–ç ä¸­ï¼Œ&lt;code&gt;\0&lt;/code&gt;ï¼ˆ0x00ï¼‰æœ¬èº«æ˜¯ä¸€ä¸ªåˆæ³•çš„å­—ç¬¦ï¼ˆè¡¨ç¤ºç©ºå­—ç¬¦ï¼‰ï¼Œä½†åœ¨æ­£å¸¸æ–‡æœ¬åœºæ™¯ä¸­æå°‘å‡ºç° â€”â€” è¿™è¿›ä¸€æ­¥é™ä½äº† â€œ&amp;rsquo;\0&amp;rsquo; å¯¼è‡´é€»è¾‘é”™è¯¯â€ çš„æ¦‚ç‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‹¥å¼€å‘è€…å°è¯•å°†åŒ…å«æ— æ•ˆ UTF-8 å­—èŠ‚ï¼ˆå¦‚é UTF-8 çš„&lt;code&gt;\0&lt;/code&gt;ç»„åˆï¼‰çš„&lt;code&gt;&amp;amp;[u8]&lt;/code&gt;è½¬æ¢ä¸º&lt;code&gt;&amp;amp;str&lt;/code&gt;ï¼ŒRust ä¼šåœ¨ç¼–è¯‘æœŸæˆ–è¿è¡ŒæœŸæŠ¥é”™ï¼ˆå¦‚&lt;code&gt;std::str::from_utf8()&lt;/code&gt;è¿”å›&lt;code&gt;Err&lt;/code&gt;ï¼‰ï¼Œé¿å…éæ³•æ•°æ®è¿›å…¥å­—ç¬¦ä¸²å¤„ç†æµç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3é«˜å±‚ç±»å‹åˆ†åŒ–åº”å¯¹-ç‰¹æ®Š-0-éœ€æ±‚"&gt;&lt;a href="#3%e9%ab%98%e5%b1%82%e7%b1%bb%e5%9e%8b%e5%88%86%e5%8c%96%e5%ba%94%e5%af%b9-%e7%89%b9%e6%ae%8a-0-%e9%9c%80%e6%b1%82" class="header-anchor"&gt;&lt;/a&gt;ï¼ˆ3ï¼‰é«˜å±‚ï¼šç±»å‹åˆ†åŒ–åº”å¯¹ â€œç‰¹æ®Š &amp;lsquo;\0&amp;rsquo; éœ€æ±‚â€
&lt;/h4&gt;&lt;p&gt;å¯¹äºéœ€è¦å¤„ç†&lt;code&gt;\0&lt;/code&gt;çš„åœºæ™¯ï¼ˆå¦‚ä¸ C/C++ äº¤äº’ã€å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼‰ï¼ŒRust æä¾›äº†ä¸“é—¨çš„ç±»å‹ï¼Œé¿å… â€œç”¨é€šç”¨å­—ç¬¦ä¸²ç±»å‹å¤„ç†ç‰¹æ®Šæ•°æ®â€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ C äº¤äº’ï¼š&lt;/strong&gt;&lt;code&gt;std::ffi::CString&lt;/code&gt;ï¼šè‹¥éœ€è¦å‘ C å‡½æ•°ä¼ é€’å­—ç¬¦ä¸²ï¼ˆC è¦æ±‚å­—ç¬¦ä¸²ä»¥&lt;code&gt;\0&lt;/code&gt;ç»“å°¾ï¼‰ï¼Œå¯ä½¿ç”¨&lt;code&gt;CString&lt;/code&gt;â€”â€” å®ƒä¼šè‡ªåŠ¨åœ¨å­—ç¬¦ä¸²æœ«å°¾æ·»åŠ &lt;code&gt;\0&lt;/code&gt;ï¼Œå¹¶ç¡®ä¿å†…éƒ¨ä¸å«å…¶ä»–&lt;code&gt;\0&lt;/code&gt;ï¼ˆè‹¥æœ‰åˆ™æŠ¥é”™ï¼‰ï¼Œé¿å… C å‡½æ•°æˆªæ–­ã€‚ä¾‹å¦‚ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;ffi&lt;/span&gt;::&lt;span class="n"&gt;CString&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// åˆ›å»ºCé£æ ¼å­—ç¬¦ä¸²ï¼Œè‡ªåŠ¨æ·»åŠ &amp;#39;\0&amp;#39;ï¼Œä¸”å†…éƒ¨æ— å…¶ä»–&amp;#39;\0&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_str&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CString&lt;/span&gt;::&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;unwrap&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// ä¼ é€’ç»™Cå‡½æ•°ï¼ˆè·å–*const c_charæŒ‡é’ˆï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_ptr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_str&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_ptr&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼š&lt;/strong&gt;&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;&lt;strong&gt;/&lt;/strong&gt;&lt;code&gt;&amp;amp;[u8]&lt;/code&gt;ï¼šè‹¥æ•°æ®ä¸­åŒ…å«å¤§é‡&lt;code&gt;\0&lt;/code&gt;ï¼ˆå¦‚äºŒè¿›åˆ¶æ–‡ä»¶ã€ç½‘ç»œæµï¼‰ï¼Œåº”ç›´æ¥ä½¿ç”¨&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;æˆ–&lt;code&gt;&amp;amp;[u8]&lt;/code&gt;ï¼Œè€Œéå­—ç¬¦ä¸²ç±»å‹ â€”â€” è¿™äº›å­—èŠ‚ç±»å‹ä¸æ¶‰åŠç¼–ç çº¦æŸï¼Œå¯ç›´æ¥å­˜å‚¨å’Œå¤„ç†&lt;code&gt;\0&lt;/code&gt;ï¼Œä¸”é€šè¿‡é•¿åº¦ä¿¡æ¯ç¡®ä¿æ•°æ®å®Œæ•´æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å››æ€»ç»“rust-å­—ç¬¦ä¸²ç±»å‹çš„é€‰æ‹©æŒ‡å—"&gt;&lt;a href="#%e5%9b%9b%e6%80%bb%e7%bb%93rust-%e5%ad%97%e7%ac%a6%e4%b8%b2%e7%b1%bb%e5%9e%8b%e7%9a%84%e9%80%89%e6%8b%a9%e6%8c%87%e5%8d%97" class="header-anchor"&gt;&lt;/a&gt;å››ã€æ€»ç»“ï¼šRust å­—ç¬¦ä¸²ç±»å‹çš„é€‰æ‹©æŒ‡å—
&lt;/h2&gt;&lt;p&gt;ç†è§£ Rust å­—ç¬¦ä¸²ç±»å‹çš„å…³é”®ï¼Œåœ¨äº â€œæ ¹æ®åœºæ™¯åŒ¹é…è®¾è®¡ç›®æ ‡â€ã€‚ä»¥ä¸‹æ˜¯ä¸åŒåœºæ™¯ä¸‹çš„ç±»å‹é€‰æ‹©å»ºè®®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éœ€è¦åŠ¨æ€ä¿®æ”¹æ–‡æœ¬&lt;/strong&gt;ï¼šé€‰æ‹©&lt;code&gt;String&lt;/code&gt;ï¼ˆæ‹¥æœ‰æ‰€æœ‰æƒï¼Œæ”¯æŒ UTF-8 ä¿®æ”¹ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼ é€’æ–‡æœ¬è€Œä¸ä¿®æ”¹&lt;/strong&gt;ï¼šé€‰æ‹©&lt;code&gt;&amp;amp;str&lt;/code&gt;ï¼ˆæ— å¤åˆ¶å¼€é”€ï¼Œé«˜æ€§èƒ½ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†å•ä¸ª Unicode å­—ç¬¦&lt;/strong&gt;ï¼šé€‰æ‹©&lt;code&gt;char&lt;/code&gt;ï¼ˆå›ºå®šå®½åº¦ï¼Œé€‚åˆå­—ç¬¦æ“ä½œï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†äºŒè¿›åˆ¶æ•°æ® / é UTF-8 æ–‡æœ¬&lt;/strong&gt;ï¼šé€‰æ‹©&lt;code&gt;Vec&amp;lt;u8&amp;gt;&lt;/code&gt;æˆ–&lt;code&gt;&amp;amp;[u8]&lt;/code&gt;ï¼ˆæ— ç¼–ç çº¦æŸï¼Œçµæ´»å­˜å‚¨ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸æ“ä½œç³»ç»Ÿ API äº¤äº’&lt;/strong&gt;ï¼šé€‰æ‹©&lt;code&gt;OSString&lt;/code&gt;æˆ–&lt;code&gt;&amp;amp;OsStr&lt;/code&gt;ï¼ˆé€‚é…ç³»ç»ŸåŸç”Ÿç¼–ç ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†æ–‡ä»¶è·¯å¾„&lt;/strong&gt;ï¼šé€‰æ‹©&lt;code&gt;Path&lt;/code&gt;æˆ–&lt;code&gt;PathBuf&lt;/code&gt;ï¼ˆè·¨å¹³å°é€‚é…ï¼Œè·¯å¾„è¯­ä¹‰ä¿éšœï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸ C/C++ äº¤äº’&lt;/strong&gt;ï¼šé€‰æ‹©&lt;code&gt;CString&lt;/code&gt;ï¼ˆç”Ÿæˆ&lt;code&gt;\0&lt;/code&gt;ç»“å°¾çš„ C é£æ ¼å­—ç¬¦ä¸²ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Rust çš„å­—ç¬¦ä¸²ä½“ç³»çœ‹ä¼¼å¤æ‚ï¼Œå®åˆ™æ˜¯ â€œç²¾ç¡®åº”å¯¹ä¸åŒåœºæ™¯â€ çš„è®¾è®¡ä½“ç° â€”â€” å®ƒé€šè¿‡ç±»å‹åˆ†åŒ–è§£å†³äº† â€œé€šç”¨å­—ç¬¦ä¸²ç±»å‹æ— æ³•å…¼é¡¾æ€§èƒ½ã€å®‰å…¨æ€§ä¸å…¼å®¹æ€§â€ çš„é—®é¢˜ï¼ŒåŒæ—¶ä»¥ â€œæ˜¾å¼é•¿åº¦ + ç¼–ç çº¦æŸâ€ å½»åº•æ‘†è„±äº† C/C++ ä¸­ &amp;lsquo;\0&amp;rsquo; æˆªæ–­çš„ç—›ç‚¹ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ›´å®‰å…¨ã€æ›´é«˜æ•ˆçš„å­—ç¬¦ä¸²å¤„ç†æ–¹æ¡ˆã€‚&lt;/p&gt;</description></item><item><title>Rust ä¸­çš„ `for...in` å¾ªç¯ï¼šç®€æ´è¿­ä»£çš„è‰ºæœ¯</title><link>https://techinsight.pages.dev/p/rust-%E4%B8%AD%E7%9A%84-for...in-%E5%BE%AA%E7%8E%AF%E7%AE%80%E6%B4%81%E8%BF%AD%E4%BB%A3%E7%9A%84%E8%89%BA%E6%9C%AF/</link><pubDate>Fri, 31 Oct 2025 21:14:08 +0800</pubDate><guid>https://techinsight.pages.dev/p/rust-%E4%B8%AD%E7%9A%84-for...in-%E5%BE%AA%E7%8E%AF%E7%AE%80%E6%B4%81%E8%BF%AD%E4%BB%A3%E7%9A%84%E8%89%BA%E6%9C%AF/</guid><description>&lt;p&gt;åœ¨ Rust ä¸­ï¼Œ&lt;code&gt;for...in&lt;/code&gt; å¾ªç¯æ˜¯éå†é›†åˆçš„æ ¸å¿ƒå·¥å…·ã€‚å®ƒçœ‹ä¼¼ç®€å•ï¼Œå´æš—è—ç€ Rust å¯¹å†…å­˜å®‰å…¨å’Œæ‰€æœ‰æƒçš„ç²¾å¦™è®¾è®¡ã€‚æœ¬æ–‡å°†èšç„¦ &lt;code&gt;for...in&lt;/code&gt; å¾ªç¯çš„æœ¬è´¨ï¼Œè§£æå®ƒå¦‚ä½•é€šè¿‡è¿­ä»£å™¨å®ç°çµæ´»çš„é›†åˆéå†ï¼Œä»¥åŠä¸åŒè¿­ä»£æ–¹å¼çš„é€‰æ‹©é€»è¾‘ã€‚&lt;/p&gt;
&lt;h2 id="æœ¬è´¨è¿­ä»£å™¨çš„è¯­æ³•ç³–"&gt;&lt;a href="#%e6%9c%ac%e8%b4%a8%e8%bf%ad%e4%bb%a3%e5%99%a8%e7%9a%84%e8%af%ad%e6%b3%95%e7%b3%96" class="header-anchor"&gt;&lt;/a&gt;æœ¬è´¨ï¼šè¿­ä»£å™¨çš„â€œè¯­æ³•ç³–â€
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;for...in&lt;/code&gt; å¾ªç¯çš„æ ¸å¿ƒé€»è¾‘æ˜¯&lt;strong&gt;è¿­ä»£ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆIteratorï¼‰&lt;/strong&gt;ã€‚Rust ä¸­æ‰€æœ‰èƒ½è¢« &lt;code&gt;for...in&lt;/code&gt; éå†çš„ç±»å‹ï¼ˆå¦‚å‘é‡ã€æ•°ç»„ã€èŒƒå›´ç­‰ï¼‰ï¼Œéƒ½å®ç°äº† &lt;code&gt;IntoIterator&lt;/code&gt; ç‰¹æ€§â€”â€”è¿™ä¸ªç‰¹æ€§çš„ä½œç”¨æ˜¯å°†ç±»å‹â€œè½¬æ¢ä¸ºè¿­ä»£å™¨â€ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•è¯´ï¼Œ&lt;code&gt;for item in é›†åˆ&lt;/code&gt; æœ¬è´¨ä¸Šæ˜¯åœ¨åšï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è°ƒç”¨é›†åˆçš„ &lt;code&gt;into_iter()&lt;/code&gt; æ–¹æ³•ï¼Œå°†å…¶è½¬æ¢ä¸ºè¿­ä»£å™¨ï¼›&lt;/li&gt;
&lt;li&gt;ä¾æ¬¡ä»è¿­ä»£å™¨ä¸­å–å‡ºå…ƒç´ ï¼Œèµ‹å€¼ç»™å¾ªç¯å˜é‡ &lt;code&gt;item&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;ç›´åˆ°è¿­ä»£å™¨è€—å°½ï¼Œå¾ªç¯ç»“æŸã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="ä¸‰ç§åŸºç¡€éå†æ–¹å¼ä»å¼•ç”¨åˆ°æ‰€æœ‰æƒ"&gt;&lt;a href="#%e4%b8%89%e7%a7%8d%e5%9f%ba%e7%a1%80%e9%81%8d%e5%8e%86%e6%96%b9%e5%bc%8f%e4%bb%8e%e5%bc%95%e7%94%a8%e5%88%b0%e6%89%80%e6%9c%89%e6%9d%83" class="header-anchor"&gt;&lt;/a&gt;ä¸‰ç§åŸºç¡€éå†æ–¹å¼ï¼šä»å¼•ç”¨åˆ°æ‰€æœ‰æƒ
&lt;/h2&gt;&lt;p&gt;é’ˆå¯¹é›†åˆçš„ä¸åŒä½¿ç”¨åœºæ™¯ï¼ˆåªè¯»ã€ä¿®æ”¹ã€æ¶ˆè€—ï¼‰ï¼Œ&lt;code&gt;for...in&lt;/code&gt; æœ‰ä¸‰ç§å…¸å‹å†™æ³•ï¼Œå¯¹åº”ä¸‰ç§è¿­ä»£å™¨ç±»å‹ï¼š&lt;/p&gt;
&lt;h3 id="1-åªè¯»éå†è¿­ä»£ä¸å¯å˜å¼•ç”¨"&gt;&lt;a href="#1-%e5%8f%aa%e8%af%bb%e9%81%8d%e5%8e%86%e8%bf%ad%e4%bb%a3%e4%b8%8d%e5%8f%af%e5%8f%98%e5%bc%95%e7%94%a8" class="header-anchor"&gt;&lt;/a&gt;1. åªè¯»éå†ï¼šè¿­ä»£ä¸å¯å˜å¼•ç”¨
&lt;/h3&gt;&lt;p&gt;å½“ä½ éœ€è¦è®¿é—®é›†åˆå…ƒç´ ä½†ä¸ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œç”¨ &lt;code&gt;&amp;amp;é›†åˆ&lt;/code&gt; è§¦å‘ä¸å¯å˜å¼•ç”¨è¿­ä»£ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;vec!&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// ç­‰ä»·äº for item in vec.iter()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// item ç±»å‹æ˜¯ &amp;amp;i32ï¼ˆä¸å¯å˜å¼•ç”¨ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// éå†å vec ä»å¯ä½¿ç”¨ï¼ˆæœªè¢«æ¶ˆè€—ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;éå†åï¼š&lt;/span&gt;&lt;span class="si"&gt;{:?}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// [1, 2, 3]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;&amp;amp;vec&lt;/code&gt; ä¼šé€šè¿‡ &lt;code&gt;IntoIterator&lt;/code&gt; è½¬æ¢ä¸º &lt;code&gt;vec.iter()&lt;/code&gt; è¿”å›çš„è¿­ä»£å™¨ï¼Œæ¯æ¬¡è¿­ä»£è·å–çš„æ˜¯å…ƒç´ çš„ä¸å¯å˜å¼•ç”¨ï¼ˆ&lt;code&gt;&amp;amp;T&lt;/code&gt;ï¼‰ã€‚ç”±äºåªå€Ÿç”¨å…ƒç´ ï¼ŒåŸé›†åˆä¸ä¼šè¢«ä¿®æ”¹æˆ–æ¶ˆè€—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆç”¨ &lt;code&gt;iter()&lt;/code&gt; è€Œä¸æ˜¯ &lt;code&gt;iter_mut()&lt;/code&gt;ï¼Ÿ&lt;/strong&gt;&lt;br /&gt;
&lt;code&gt;iter()&lt;/code&gt; äº§ç”Ÿçš„ä¸å¯å˜å¼•ç”¨å¯ä»¥å…±äº«ï¼Œä¸å½±å“å…¶ä»–åœ°æ–¹å¯¹é›†åˆçš„åªè¯»è®¿é—®ã€‚è€Œ &lt;code&gt;iter_mut()&lt;/code&gt; äº§ç”Ÿçš„å¯å˜å¼•ç”¨å…·æœ‰æ’ä»–æ€§â€”â€”è¿­ä»£æœŸé—´æ•´ä¸ªé›†åˆä¼šè¢«ç‹¬å å€Ÿç”¨ï¼Œå…¶ä»–åœ°æ–¹æ— æ³•åŒæ—¶è®¿é—®ï¼ˆåŒ…æ‹¬è¯»å–ï¼‰ã€‚å› æ­¤ï¼Œä»…éœ€è¯»å–æ—¶ç”¨ &lt;code&gt;iter()&lt;/code&gt; æ›´çµæ´»ã€‚&lt;/p&gt;
&lt;h3 id="2-ä¿®æ”¹éå†è¿­ä»£å¯å˜å¼•ç”¨"&gt;&lt;a href="#2-%e4%bf%ae%e6%94%b9%e9%81%8d%e5%8e%86%e8%bf%ad%e4%bb%a3%e5%8f%af%e5%8f%98%e5%bc%95%e7%94%a8" class="header-anchor"&gt;&lt;/a&gt;2. ä¿®æ”¹éå†ï¼šè¿­ä»£å¯å˜å¼•ç”¨
&lt;/h3&gt;&lt;p&gt;è‹¥è¦ä¿®æ”¹é›†åˆå…ƒç´ ï¼Œç”¨ &lt;code&gt;&amp;amp;mut é›†åˆ&lt;/code&gt; è§¦å‘å¯å˜å¼•ç”¨è¿­ä»£ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;vec!&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// ç­‰ä»·äº for item in vec.iter_mut()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// item ç±»å‹æ˜¯ &amp;amp;mut i32ï¼ˆå¯å˜å¼•ç”¨ï¼Œéœ€è§£å¼•ç”¨ä¿®æ”¹ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// éå†å vec å·²è¢«ä¿®æ”¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;ä¿®æ”¹åï¼š&lt;/span&gt;&lt;span class="si"&gt;{:?}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// [2, 3, 4]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;&amp;amp;mut vec&lt;/code&gt; ä¼šè½¬æ¢ä¸º &lt;code&gt;vec.iter_mut()&lt;/code&gt; è¿”å›çš„è¿­ä»£å™¨ï¼Œæ¯æ¬¡è¿­ä»£è·å–å…ƒç´ çš„å¯å˜å¼•ç”¨ï¼ˆ&lt;code&gt;&amp;amp;mut T&lt;/code&gt;ï¼‰ã€‚é€šè¿‡å¯å˜å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹é›†åˆä¸­çš„å…ƒç´ ï¼Œä¸”åŸé›†åˆä»å¯ç»§ç»­ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h3 id="3-æ¶ˆè€—éå†è¿­ä»£æ‰€æœ‰æƒ"&gt;&lt;a href="#3-%e6%b6%88%e8%80%97%e9%81%8d%e5%8e%86%e8%bf%ad%e4%bb%a3%e6%89%80%e6%9c%89%e6%9d%83" class="header-anchor"&gt;&lt;/a&gt;3. æ¶ˆè€—éå†ï¼šè¿­ä»£æ‰€æœ‰æƒ
&lt;/h3&gt;&lt;p&gt;å½“ä½ éœ€è¦è·å–å…ƒç´ çš„æ‰€æœ‰æƒï¼ˆä¾‹å¦‚å°†å…ƒç´ è½¬ç§»åˆ°å…¶ä»–åœ°æ–¹ï¼‰ï¼Œç›´æ¥ç”¨ &lt;code&gt;é›†åˆ&lt;/code&gt; è§¦å‘æ‰€æœ‰æƒè¿­ä»£ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;vec!&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// ç­‰ä»·äº for item in vec.into_iter()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// item ç±»å‹æ˜¯ i32ï¼ˆç›´æ¥æ‹¥æœ‰å…ƒç´ ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// éå†å vec å·²è¢«æ¶ˆè€—ï¼Œæ— æ³•å†ä½¿ç”¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// println!(&amp;#34;{:?}&amp;#34;, vec); // ç¼–è¯‘é”™è¯¯ï¼švec å·²è¢«ç§»åŠ¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç›´æ¥ä½¿ç”¨ &lt;code&gt;vec&lt;/code&gt; æ—¶ï¼Œä¼šè°ƒç”¨ &lt;code&gt;vec.into_iter()&lt;/code&gt; ç”Ÿæˆè¿­ä»£å™¨ï¼Œæ¯æ¬¡è¿­ä»£ä¼šå°†å…ƒç´ çš„æ‰€æœ‰æƒä»é›†åˆä¸­â€œå–å‡ºâ€å¹¶è½¬ç§»ç»™ &lt;code&gt;item&lt;/code&gt;ã€‚éå†ç»“æŸåï¼ŒåŸé›†åˆå› å¤±å»æ‰€æœ‰å…ƒç´ çš„æ‰€æœ‰æƒè€Œè¢«â€œæ¶ˆè€—â€ï¼Œæ— æ³•å†è¢«è®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆâ€œä¸éœ€è¦ä¿®æ”¹æ—¶ï¼Œä¹Ÿå¯èƒ½éœ€è¦æ¶ˆè€—éå†ï¼Ÿ&lt;/strong&gt;&lt;br /&gt;
â€œä¸éœ€è¦ä¿®æ”¹â€ä»…æ„å‘³ç€ä¸éœ€è¦æ”¹å˜å…ƒç´ çš„å€¼ï¼Œä½†å¯èƒ½éœ€è¦&lt;strong&gt;è½¬ç§»å…ƒç´ çš„æ‰€æœ‰æƒ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚å°†å…ƒç´ å­˜å…¥å¦ä¸€ä¸ªé›†åˆï¼ˆéœ€æ‹¥æœ‰æ‰€æœ‰æƒæ‰èƒ½å­˜å…¥ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;å¯¹äºæ•´æ•°ç­‰ &lt;code&gt;Copy&lt;/code&gt; ç±»å‹ï¼Œæ¶ˆè€—éå†å¯é¿å…åå¤è§£å¼•ç”¨ï¼ˆç›´æ¥ä½¿ç”¨å€¼æ›´ç®€æ´ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;å¤„ç†ä¸´æ—¶é›†åˆæ—¶ï¼Œâ€œç”¨å®Œå³å¼ƒâ€å¯èŠ‚çœå†…å­˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;vec!&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new_vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Vec&lt;/span&gt;::&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// æ¶ˆè€—åŸé›†åˆï¼Œå°†å…ƒç´ æ‰€æœ‰æƒè½¬ç§»åˆ°æ–°é›†åˆ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new_vec&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;æ–°é›†åˆï¼š&lt;/span&gt;&lt;span class="si"&gt;{:?}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new_vec&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// [1, 2, 3]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="ç‰¹æ®Šåœºæ™¯èŒƒå›´è¿­ä»£"&gt;&lt;a href="#%e7%89%b9%e6%ae%8a%e5%9c%ba%e6%99%af%e8%8c%83%e5%9b%b4%e8%bf%ad%e4%bb%a3" class="header-anchor"&gt;&lt;/a&gt;ç‰¹æ®Šåœºæ™¯ï¼šèŒƒå›´è¿­ä»£
&lt;/h2&gt;&lt;p&gt;é™¤äº†é›†åˆï¼Œ&lt;code&gt;for...in&lt;/code&gt; è¿˜èƒ½ç›´æ¥éå†â€œèŒƒå›´ï¼ˆRangeï¼‰â€ï¼Œè¿™æ˜¯ä¸€ç§æ— éœ€æå‰åˆ›å»ºé›†åˆçš„è½»é‡è¿­ä»£æ–¹å¼ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// éå† 1 åˆ° 4ï¼ˆä¸åŒ…å« 5ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 1, 2, 3, 4
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// éå† 1 åˆ° 5ï¼ˆåŒ…å« 5ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;..=&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 1, 2, 3, 4, 5
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;èŒƒå›´æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§è¿­ä»£å™¨ï¼Œå®ƒé€šè¿‡è®¡ç®—ç”Ÿæˆåºåˆ—ï¼Œæ— éœ€å ç”¨é¢å¤–å†…å­˜ã€‚&lt;/p&gt;
&lt;h2 id="æ€»ç»“ä¸‰ç§è¿­ä»£æ–¹å¼çš„æ ¸å¿ƒåŒºåˆ«"&gt;&lt;a href="#%e6%80%bb%e7%bb%93%e4%b8%89%e7%a7%8d%e8%bf%ad%e4%bb%a3%e6%96%b9%e5%bc%8f%e7%9a%84%e6%a0%b8%e5%bf%83%e5%8c%ba%e5%88%ab" class="header-anchor"&gt;&lt;/a&gt;æ€»ç»“ï¼šä¸‰ç§è¿­ä»£æ–¹å¼çš„æ ¸å¿ƒåŒºåˆ«
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è¿­ä»£æ–¹å¼&lt;/th&gt;
&lt;th&gt;å…ƒç´ ç±»å‹&lt;/th&gt;
&lt;th&gt;æ˜¯å¦æ¶ˆè€—åŸé›†åˆ&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;iter()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;amp;T&lt;/code&gt;ï¼ˆä¸å¯å˜å¼•ç”¨ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸æ¶ˆè€—&lt;/td&gt;
&lt;td&gt;åªè¯»è®¿é—®ï¼Œéœ€ä¿ç•™åŸé›†åˆï¼Œå…è®¸å…±äº«è®¿é—®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;iter_mut()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;amp;mut T&lt;/code&gt;ï¼ˆå¯å˜å¼•ç”¨ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸æ¶ˆè€—&lt;/td&gt;
&lt;td&gt;éœ€è¦ä¿®æ”¹å…ƒç´ ï¼Œç‹¬å é›†åˆè®¿é—®æƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;into_iter()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;T&lt;/code&gt;ï¼ˆæ‰€æœ‰æƒï¼‰&lt;/td&gt;
&lt;td&gt;æ¶ˆè€—&lt;/td&gt;
&lt;td&gt;éœ€è·å–å…ƒç´ æ‰€æœ‰æƒï¼ˆè½¬ç§»ã€Copy ç±»å‹ç®€åŒ–æ“ä½œç­‰ï¼‰ï¼Œç”¨å®Œå³å¼ƒé›†åˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;é€‰æ‹©çš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šæ˜¯å¦éœ€è¦ä¿®æ”¹å…ƒç´ ï¼Œä»¥åŠæ˜¯å¦éœ€è¦ä¿ç•™åŸé›†åˆã€‚æŒæ¡è¿™ä¸‰ç§æ–¹å¼ï¼Œå°±èƒ½çµæ´»åº”å¯¹ Rust ä¸­ç»å¤§å¤šæ•°é›†åˆéå†åœºæ™¯ã€‚&lt;/p&gt;</description></item><item><title>ä½¿ç”¨ Rust å¼€å‘åŠ¨æ€é“¾æ¥åº“ï¼ˆ.soï¼‰å®Œæ•´æŒ‡å—</title><link>https://techinsight.pages.dev/p/%E4%BD%BF%E7%94%A8-rust-%E5%BC%80%E5%8F%91%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93.so%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/</link><pubDate>Fri, 01 Aug 2025 16:14:03 +0800</pubDate><guid>https://techinsight.pages.dev/p/%E4%BD%BF%E7%94%A8-rust-%E5%BC%80%E5%8F%91%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93.so%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/</guid><description>&lt;h2 id="ç›®å½•"&gt;&lt;a href="#%e7%9b%ae%e5%bd%95" class="header-anchor"&gt;&lt;/a&gt;ç›®å½•
&lt;/h2&gt;&lt;p&gt;&lt;a class="link" href="#1-%e9%a1%b9%e7%9b%ae%e5%88%9b%e5%bb%ba%e4%b8%8e%e9%85%8d%e7%bd%ae" &gt;é¡¹ç›®åˆ›å»ºä¸é…ç½®&lt;/a&gt;&lt;br /&gt;
&lt;a class="link" href="#2-rust-%e4%bb%a3%e7%a0%81%e7%bc%96%e5%86%99%e8%a7%84%e8%8c%83" &gt;Rust ä»£ç ç¼–å†™è§„èŒƒ&lt;/a&gt;&lt;br /&gt;
&lt;a class="link" href="#3-%e5%a4%b4%e6%96%87%e4%bb%b6%e7%94%9f%e6%88%90%e4%b8%8e%e7%ae%a1%e7%90%86" &gt;å¤´æ–‡ä»¶ç”Ÿæˆä¸ç®¡ç†&lt;/a&gt;&lt;br /&gt;
&lt;a class="link" href="#4-%e6%9e%84%e5%bb%ba%e7%b3%bb%e7%bb%9f%e5%ae%9e%e7%8e%b0" &gt;æ„å»ºç³»ç»Ÿå®ç°&lt;/a&gt;&lt;br /&gt;
&lt;a class="link" href="#5-%e5%ae%89%e8%a3%85%e4%b8%8e%e5%88%86%e5%8f%91" &gt;å®‰è£…ä¸åˆ†å‘&lt;/a&gt;&lt;br /&gt;
&lt;a class="link" href="#6-%e8%b0%83%e7%94%a8%e7%a4%ba%e4%be%8b" &gt;è°ƒç”¨ç¤ºä¾‹&lt;/a&gt;&lt;br /&gt;
&lt;a class="link" href="#7-%e8%b7%a8%e5%b9%b3%e5%8f%b0%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" &gt;è·¨å¹³å°æ³¨æ„äº‹é¡¹&lt;/a&gt;&lt;br /&gt;
&lt;a class="link" href="#8-%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5" &gt;æœ€ä½³å®è·µ&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="é¡¹ç›®åˆ›å»ºä¸é…ç½®"&gt;&lt;a href="#%e9%a1%b9%e7%9b%ae%e5%88%9b%e5%bb%ba%e4%b8%8e%e9%85%8d%e7%bd%ae" class="header-anchor"&gt;&lt;/a&gt;é¡¹ç›®åˆ›å»ºä¸é…ç½®
&lt;/h2&gt;&lt;h3 id="åˆå§‹åŒ–é¡¹ç›®"&gt;&lt;a href="#%e5%88%9d%e5%a7%8b%e5%8c%96%e9%a1%b9%e7%9b%ae" class="header-anchor"&gt;&lt;/a&gt;åˆå§‹åŒ–é¡¹ç›®
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cargo new --lib rust_so_lib
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; rust_so_lib
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="cargotoml-é…ç½®"&gt;&lt;a href="#cargotoml-%e9%85%8d%e7%bd%ae" class="header-anchor"&gt;&lt;/a&gt;Cargo.toml é…ç½®
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;package&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;name&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;rust_so_lib&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;version&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;0.1.0&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;edition&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;2021&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;lib&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;name&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;rust_so_lib&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;crate-type&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;cdylib&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="c"&gt;# å…³é”®é…ç½®ï¼šç”ŸæˆåŠ¨æ€é“¾æ¥åº“&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;dependencies&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;libc&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;0.2&amp;#34;&lt;/span&gt;&lt;span class="c"&gt;# ç”¨äºCç±»å‹å…¼å®¹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;é‡è¦æç¤º&lt;/strong&gt;ï¼šç¡®ä¿ä¸è¦åŒæ—¶ä½¿ç”¨ &lt;code&gt;[workspace]&lt;/code&gt; å’Œ &lt;code&gt;[lib]&lt;/code&gt; é…ç½®ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="rust-ä»£ç ç¼–å†™è§„èŒƒ"&gt;&lt;a href="#rust-%e4%bb%a3%e7%a0%81%e7%bc%96%e5%86%99%e8%a7%84%e8%8c%83" class="header-anchor"&gt;&lt;/a&gt;Rust ä»£ç ç¼–å†™è§„èŒƒ
&lt;/h2&gt;&lt;h3 id="åŸºç¡€ç¤ºä¾‹-srclibrs"&gt;&lt;a href="#%e5%9f%ba%e7%a1%80%e7%a4%ba%e4%be%8b-srclibrs" class="header-anchor"&gt;&lt;/a&gt;åŸºç¡€ç¤ºä¾‹ (src/lib.rs)
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;os&lt;/span&gt;::&lt;span class="n"&gt;raw&lt;/span&gt;::&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;c_int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_char&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;ffi&lt;/span&gt;::&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;CString&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CStr&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[unsafe(no_mangle)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;extern&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;C&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;add_numbers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;: &lt;span class="nc"&gt;c_int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;: &lt;span class="nc"&gt;c_int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nc"&gt;c_int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;Â Â Â Â &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[unsafe(no_mangle)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;extern&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;C&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;string_length&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;: &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_char&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nc"&gt;c_int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;Â Â Â Â &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_str&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;unsafe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CStr&lt;/span&gt;::&lt;span class="n"&gt;from_ptr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;Â Â Â Â &lt;/span&gt;&lt;span class="n"&gt;c_str&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_bytes&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_int&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[unsafe(no_mangle)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;extern&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;C&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;create_greeting&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;: &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_char&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;Â Â Â Â &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name_str&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;unsafe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CStr&lt;/span&gt;::&lt;span class="n"&gt;from_ptr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;to_string_lossy&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;Â Â Â Â &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;greeting&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;format!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;Hello, &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;!&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name_str&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;Â Â Â Â &lt;/span&gt;&lt;span class="n"&gt;CString&lt;/span&gt;::&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;greeting&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;unwrap&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;into_raw&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[unsafe(no_mangle)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;extern&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;C&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;free_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;: &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_char&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;Â Â Â Â &lt;/span&gt;&lt;span class="k"&gt;unsafe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CString&lt;/span&gt;::&lt;span class="n"&gt;from_raw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="å…³é”®ç¼–ç¨‹è¦ç‚¹"&gt;&lt;a href="#%e5%85%b3%e9%94%ae%e7%bc%96%e7%a8%8b%e8%a6%81%e7%82%b9" class="header-anchor"&gt;&lt;/a&gt;å…³é”®ç¼–ç¨‹è¦ç‚¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ABI å…¼å®¹æ€§&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;extern &amp;quot;C&amp;quot;&lt;/code&gt; ç¡®ä¿Cå…¼å®¹è°ƒç”¨çº¦å®š&lt;/li&gt;
&lt;li&gt;&lt;code&gt;#[unsafe(no_mangle)]&lt;/code&gt; ç¦æ­¢åç§°ä¿®é¥°&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç±»å‹æ˜ å°„&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Rust ç±»å‹&lt;/th&gt;
&lt;th&gt;C ç±»å‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;c_int&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;*const c_char&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;const char*&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;*mut c_char&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;char*&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…å­˜å®‰å…¨&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Ruståˆ†é…çš„å†…å­˜åº”ç”±Rusté‡Šæ”¾&lt;/li&gt;
&lt;li&gt;æä¾›æ˜ç¡®çš„èµ„æºé‡Šæ”¾å‡½æ•°ï¼ˆå¦‚&lt;code&gt;free_string&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å¤´æ–‡ä»¶ç”Ÿæˆä¸ç®¡ç†"&gt;&lt;a href="#%e5%a4%b4%e6%96%87%e4%bb%b6%e7%94%9f%e6%88%90%e4%b8%8e%e7%ae%a1%e7%90%86" class="header-anchor"&gt;&lt;/a&gt;å¤´æ–‡ä»¶ç”Ÿæˆä¸ç®¡ç†
&lt;/h2&gt;&lt;h3 id="æ‰‹åŠ¨åˆ›å»ºå¤´æ–‡ä»¶"&gt;&lt;a href="#%e6%89%8b%e5%8a%a8%e5%88%9b%e5%bb%ba%e5%a4%b4%e6%96%87%e4%bb%b6" class="header-anchor"&gt;&lt;/a&gt;æ‰‹åŠ¨åˆ›å»ºå¤´æ–‡ä»¶
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// rust_so_lib.h
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#ifndef RUST_SO_LIB_H
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#define RUST_SO_LIB_H
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#ifdef __cplusplus
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;extern&lt;/span&gt; &lt;span class="s"&gt;&amp;#34;C&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#endif
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;add_numbers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;string_length&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nf"&gt;create_greeting&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;free_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#ifdef __cplusplus
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#endif
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#endif &lt;/span&gt;&lt;span class="c1"&gt;// RUST_SO_LIB_H
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="ä½¿ç”¨-cbindgen-è‡ªåŠ¨ç”Ÿæˆ"&gt;&lt;a href="#%e4%bd%bf%e7%94%a8-cbindgen-%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90" class="header-anchor"&gt;&lt;/a&gt;ä½¿ç”¨ cbindgen è‡ªåŠ¨ç”Ÿæˆ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å®‰è£…å·¥å…·ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cargo install cbindgen
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é…ç½®æ–‡ä»¶ (cbindgen.toml)ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;language&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;C&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;include_guard&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;RUST_SO_LIB_H&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;autogen_warning&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;/* AUTO-GENERATED FILE, DO NOT EDIT */&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”Ÿæˆå‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cbindgen --config cbindgen.toml --crate rust_so_lib --output rust_so_lib.h
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="æ„å»ºç³»ç»Ÿå®ç°"&gt;&lt;a href="#%e6%9e%84%e5%bb%ba%e7%b3%bb%e7%bb%9f%e5%ae%9e%e7%8e%b0" class="header-anchor"&gt;&lt;/a&gt;æ„å»ºç³»ç»Ÿå®ç°
&lt;/h2&gt;&lt;h3 id="å®Œæ•´-makefile"&gt;&lt;a href="#%e5%ae%8c%e6%95%b4-makefile" class="header-anchor"&gt;&lt;/a&gt;å®Œæ•´ Makefile
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;span class="lnt"&gt;30
&lt;/span&gt;&lt;span class="lnt"&gt;31
&lt;/span&gt;&lt;span class="lnt"&gt;32
&lt;/span&gt;&lt;span class="lnt"&gt;33
&lt;/span&gt;&lt;span class="lnt"&gt;34
&lt;/span&gt;&lt;span class="lnt"&gt;35
&lt;/span&gt;&lt;span class="lnt"&gt;36
&lt;/span&gt;&lt;span class="lnt"&gt;37
&lt;/span&gt;&lt;span class="lnt"&gt;38
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-makefile" data-lang="makefile"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# é¡¹ç›®é…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;TARGET&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; rust_so_lib
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;VERSION&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; 0.1.0
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;PREFIX&lt;/span&gt; &lt;span class="o"&gt;?=&lt;/span&gt; /usr/local
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;LIBDIR&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;PREFIX&lt;span class="k"&gt;)&lt;/span&gt;/lib
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;INCLUDEDIR&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;PREFIX&lt;span class="k"&gt;)&lt;/span&gt;/include
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# æ„å»ºç›®æ ‡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;RUST_TARGET&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; release
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;RUST_LIB&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; target/&lt;span class="k"&gt;$(&lt;/span&gt;RUST_TARGET&lt;span class="k"&gt;)&lt;/span&gt;/lib&lt;span class="k"&gt;$(&lt;/span&gt;TARGET&lt;span class="k"&gt;)&lt;/span&gt;.so
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;HEADER&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;TARGET&lt;span class="k"&gt;)&lt;/span&gt;.h
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;.PHONY&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;uninstall&lt;/span&gt; &lt;span class="n"&gt;clean&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;all&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;build&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;cargo&lt;/span&gt; &lt;span class="err"&gt;build&lt;/span&gt; &lt;span class="err"&gt;--&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;RUST_TARGET&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;install&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;install&lt;/span&gt; &lt;span class="err"&gt;-d&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;LIBDIR&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;INCLUDEDIR&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;install&lt;/span&gt; &lt;span class="err"&gt;-m&lt;/span&gt; &lt;span class="err"&gt;755&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;RUST_LIB&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;LIBDIR&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="err"&gt;/lib&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;TARGET&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="err"&gt;.so.&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;VERSION&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;ln&lt;/span&gt; &lt;span class="err"&gt;-sf&lt;/span&gt; &lt;span class="err"&gt;lib&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;TARGET&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="err"&gt;.so.&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;VERSION&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;LIBDIR&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="err"&gt;/lib&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;TARGET&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="err"&gt;.so&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;install&lt;/span&gt; &lt;span class="err"&gt;-m&lt;/span&gt; &lt;span class="err"&gt;644&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;HEADER&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;INCLUDEDIR&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;ldconfig&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;uninstall&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;rm&lt;/span&gt; &lt;span class="err"&gt;-f&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;LIBDIR&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="err"&gt;/lib&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;TARGET&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="err"&gt;.so*&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;rm&lt;/span&gt; &lt;span class="err"&gt;-f&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;INCLUDEDIR&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;HEADER&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;ldconfig&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;clean&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;cargo&lt;/span&gt; &lt;span class="err"&gt;clean&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;rm&lt;/span&gt; &lt;span class="err"&gt;-f&lt;/span&gt; &lt;span class="err"&gt;*.o&lt;/span&gt; &lt;span class="err"&gt;*.a&lt;/span&gt; &lt;span class="err"&gt;*.so&lt;/span&gt; &lt;span class="err"&gt;test_&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;TARGET&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nf"&gt;test&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;RUST_LIB&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;CC&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="err"&gt;test.c&lt;/span&gt; &lt;span class="err"&gt;-o&lt;/span&gt; &lt;span class="err"&gt;test_&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;TARGET&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="err"&gt;-l&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;TARGET&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="err"&gt;-Ltarget/&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;RUST_TARGET&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="err"&gt;-I.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;LD_LIBRARY_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;target/&lt;span class="k"&gt;$(&lt;/span&gt;RUST_TARGET&lt;span class="k"&gt;)&lt;/span&gt; ./test_&lt;span class="k"&gt;$(&lt;/span&gt;TARGET&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="makefile-åŠŸèƒ½è¯´æ˜"&gt;&lt;a href="#makefile-%e5%8a%9f%e8%83%bd%e8%af%b4%e6%98%8e" class="header-anchor"&gt;&lt;/a&gt;Makefile åŠŸèƒ½è¯´æ˜
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‘½ä»¤&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;make&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ„å»ºReleaseç‰ˆæœ¬çš„åŠ¨æ€åº“&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;make install&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å®‰è£…åˆ°ç³»ç»Ÿç›®å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;make uninstall&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¸è½½å·²å®‰è£…çš„åº“&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;make clean&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ¸…ç†æ‰€æœ‰ç”Ÿæˆæ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;make test&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘å¹¶è¿è¡Œæµ‹è¯•ç¨‹åº&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="å®‰è£…ä¸åˆ†å‘"&gt;&lt;a href="#%e5%ae%89%e8%a3%85%e4%b8%8e%e5%88%86%e5%8f%91" class="header-anchor"&gt;&lt;/a&gt;å®‰è£…ä¸åˆ†å‘
&lt;/h2&gt;&lt;h3 id="æ ‡å‡†å®‰è£…æµç¨‹"&gt;&lt;a href="#%e6%a0%87%e5%87%86%e5%ae%89%e8%a3%85%e6%b5%81%e7%a8%8b" class="header-anchor"&gt;&lt;/a&gt;æ ‡å‡†å®‰è£…æµç¨‹
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cargo build --release
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo make install
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="è‡ªå®šä¹‰å®‰è£…è·¯å¾„"&gt;&lt;a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%ae%89%e8%a3%85%e8%b7%af%e5%be%84" class="header-anchor"&gt;&lt;/a&gt;è‡ªå®šä¹‰å®‰è£…è·¯å¾„
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;make install &lt;span class="nv"&gt;PREFIX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/custom/install/path
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="åˆ†å‘åŒ…å†…å®¹"&gt;&lt;a href="#%e5%88%86%e5%8f%91%e5%8c%85%e5%86%85%e5%ae%b9" class="header-anchor"&gt;&lt;/a&gt;åˆ†å‘åŒ…å†…å®¹
&lt;/h3&gt;&lt;p&gt;å»ºè®®åŒ…å«ä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;dist/
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”œâ”€â”€ include/
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”‚â””â”€â”€ rust_so_lib.h# å¤´æ–‡ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”œâ”€â”€ lib/
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”‚â””â”€â”€ librust_so_lib.so # åŠ¨æ€åº“
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â””â”€â”€ examples/# è°ƒç”¨ç¤ºä¾‹
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â””â”€â”€ test.c
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="è°ƒç”¨ç¤ºä¾‹"&gt;&lt;a href="#%e8%b0%83%e7%94%a8%e7%a4%ba%e4%be%8b" class="header-anchor"&gt;&lt;/a&gt;è°ƒç”¨ç¤ºä¾‹
&lt;/h2&gt;&lt;h3 id="c-è¯­è¨€ç¤ºä¾‹-testc"&gt;&lt;a href="#c-%e8%af%ad%e8%a8%80%e7%a4%ba%e4%be%8b-testc" class="header-anchor"&gt;&lt;/a&gt;C è¯­è¨€ç¤ºä¾‹ (test.c)
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;#34;rust_so_lib.h&amp;#34;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// æ•°å€¼è®¡ç®—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nf"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;3 + 5 = %d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nf"&gt;add_numbers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// å­—ç¬¦ä¸²å¤„ç†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#34;Rust&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;greeting&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nf"&gt;create_greeting&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nf"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;%s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;greeting&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nf"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;String length: %d&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nf"&gt;string_length&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;greeting&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nf"&gt;free_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;greeting&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="ç¼–è¯‘ä¸è¿è¡Œ"&gt;&lt;a href="#%e7%bc%96%e8%af%91%e4%b8%8e%e8%bf%90%e8%a1%8c" class="header-anchor"&gt;&lt;/a&gt;ç¼–è¯‘ä¸è¿è¡Œ
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# åŠ¨æ€é“¾æ¥æ–¹å¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gcc test.c -o &lt;span class="nb"&gt;test&lt;/span&gt; -lrust_so_lib -Ltarget/release
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;LD_LIBRARY_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;target/release ./test
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# é™æ€é“¾æ¥æ–¹å¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gcc test.c -o &lt;span class="nb"&gt;test&lt;/span&gt; target/release/librust_so_lib.so
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="è·¨å¹³å°æ³¨æ„äº‹é¡¹"&gt;&lt;a href="#%e8%b7%a8%e5%b9%b3%e5%8f%b0%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" class="header-anchor"&gt;&lt;/a&gt;è·¨å¹³å°æ³¨æ„äº‹é¡¹
&lt;/h2&gt;&lt;h3 id="å¹³å°å·®å¼‚å¤„ç†"&gt;&lt;a href="#%e5%b9%b3%e5%8f%b0%e5%b7%ae%e5%bc%82%e5%a4%84%e7%90%86" class="header-anchor"&gt;&lt;/a&gt;å¹³å°å·®å¼‚å¤„ç†
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-makefile" data-lang="makefile"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# åœ¨Makefileä¸­æ·»åŠ å¹³å°æ£€æµ‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;UNAME&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;shell uname&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;ifeq&lt;/span&gt; &lt;span class="err"&gt;(&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;UNAME&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt; &lt;span class="err"&gt;Darwin)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;LIB_EXT&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; dylib
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;LDLIBS&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; -Wl,-rpath,@loader_path
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;else&lt;/span&gt; &lt;span class="err"&gt;ifeq&lt;/span&gt; &lt;span class="err"&gt;(&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;OS&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt; &lt;span class="err"&gt;Windows_NT)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;LIB_EXT&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; dll
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;LDLIBS&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; -Wl,-rpath&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;$$ORIGIN&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;LIB_EXT&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; so
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;LDLIBS&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; -Wl,-rpath&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="se"&gt;\$&lt;/span&gt;&lt;span class="nv"&gt;$ORIGIN&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;endif&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="windows-ç‰¹æ®Šå¤„ç†"&gt;&lt;a href="#windows-%e7%89%b9%e6%ae%8a%e5%a4%84%e7%90%86" class="header-anchor"&gt;&lt;/a&gt;Windows ç‰¹æ®Šå¤„ç†
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ä¿®æ”¹ Cargo.tomlï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;target&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;cfg(windows)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;dependencies&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;winapi&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;version&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;0.3&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;features&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;winbase&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start="2"&gt;
&lt;li&gt;æ·»åŠ  DLL å¯¼å‡ºå±æ€§ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[cfg_attr(target_os = &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;windows&amp;#34;&lt;/span&gt;&lt;span class="cp"&gt;, link(name = &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;rust_so_lib&amp;#34;&lt;/span&gt;&lt;span class="cp"&gt;))]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;extern&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;C&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// å¯¼å‡ºå‡½æ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="æœ€ä½³å®è·µ"&gt;&lt;a href="#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5" class="header-anchor"&gt;&lt;/a&gt;æœ€ä½³å®è·µ
&lt;/h2&gt;&lt;h3 id="æ¥å£è®¾è®¡åŸåˆ™"&gt;&lt;a href="#%e6%8e%a5%e5%8f%a3%e8%ae%be%e8%ae%a1%e5%8e%9f%e5%88%99" class="header-anchor"&gt;&lt;/a&gt;æ¥å£è®¾è®¡åŸåˆ™
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŒæ¥å£ç¨³å®š&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ç‰ˆæœ¬å·æ§åˆ¶ABIå…¼å®¹æ€§&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é¿å…é¢‘ç¹å˜æ›´å‡½æ•°ç­¾å&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ç®¡ç†è§„èŒƒ&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// æ˜ç¡®æ‰€æœ‰æƒè½¬ç§»
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[unsafe(no_mangle)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;extern&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;C&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;create_buffer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;: &lt;span class="kt"&gt;usize&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;u8&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;buf&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Vec&lt;/span&gt;::&lt;span class="n"&gt;with_capacity&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ptr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;buf&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_mut_ptr&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;mem&lt;/span&gt;::&lt;span class="n"&gt;forget&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;buf&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// æ˜ç¡®è½¬ç§»æ‰€æœ‰æƒ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ptr&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[unsafe(no_mangle)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;extern&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;C&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;free_buffer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ptr&lt;/span&gt;: &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;u8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;: &lt;span class="kt"&gt;usize&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;unsafe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Vec&lt;/span&gt;::&lt;span class="n"&gt;from_raw_parts&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ptr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="é”™è¯¯å¤„ç†æ¨¡å¼"&gt;&lt;a href="#%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e6%a8%a1%e5%bc%8f" class="header-anchor"&gt;&lt;/a&gt;é”™è¯¯å¤„ç†æ¨¡å¼
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[repr(C)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;enum&lt;/span&gt; &lt;span class="nc"&gt;ErrorCode&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Success&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;InvalidInput&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MemoryError&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[unsafe(no_mangle)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;extern&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;C&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;safe_operation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;input&lt;/span&gt;: &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_char&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nc"&gt;ErrorCode&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_null&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ErrorCode&lt;/span&gt;::&lt;span class="n"&gt;InvalidInput&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// ...æ“ä½œé€»è¾‘
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;ErrorCode&lt;/span&gt;::&lt;span class="n"&gt;Success&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="æ€§èƒ½ä¼˜åŒ–å»ºè®®"&gt;&lt;a href="#%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96%e5%bb%ba%e8%ae%ae" class="header-anchor"&gt;&lt;/a&gt;æ€§èƒ½ä¼˜åŒ–å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ‰¹é‡æ•°æ®å¤„ç†&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[unsafe(no_mangle)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;extern&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;C&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;process_batch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;inputs&lt;/span&gt;: &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;: &lt;span class="kt"&gt;usize&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;outputs&lt;/span&gt;: &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c_int&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;inputs&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;unsafe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;slice&lt;/span&gt;::&lt;span class="n"&gt;from_raw_parts&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;inputs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;outputs&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;unsafe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;slice&lt;/span&gt;::&lt;span class="n"&gt;from_raw_parts_mut&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;outputs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// æ‰¹é‡å¤„ç†...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;é›¶æ‹·è´æ¥å£&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[unsafe(no_mangle)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;extern&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;C&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;get_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;buffer&lt;/span&gt;: &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;u8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;max_size&lt;/span&gt;: &lt;span class="kt"&gt;usize&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="kt"&gt;usize&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;generate_data&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Rustç«¯ç”Ÿæˆæ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;copy_size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_size&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;unsafe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;ptr&lt;/span&gt;::&lt;span class="n"&gt;copy_nonoverlapping&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_ptr&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;buffer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;copy_size&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;copy_size&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šè¿‡æœ¬æŒ‡å—ï¼Œæ‚¨å¯ä»¥ç³»ç»Ÿæ€§åœ°æŒæ¡ä½¿ç”¨ Rust å¼€å‘ç”Ÿäº§çº§åŠ¨æ€åº“çš„å…¨æµç¨‹ï¼Œä»é¡¹ç›®åˆ›å»ºã€ä»£ç ç¼–å†™ã€æ„å»ºç³»ç»Ÿåˆ°åˆ†å‘éƒ¨ç½²çš„å®Œæ•´çŸ¥è¯†ä½“ç³»ã€‚å®é™…å¼€å‘ä¸­åº”æ ¹æ®å…·ä½“éœ€æ±‚è°ƒæ•´æ¥å£è®¾è®¡å’Œæ„å»ºæµç¨‹ã€‚&lt;/p&gt;</description></item><item><title>WebAssemblyï¼ˆWasmï¼‰å…¥é—¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°å®è·µ</title><link>https://techinsight.pages.dev/p/webassemblywasm%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E5%AE%9E%E8%B7%B5/</link><pubDate>Tue, 29 Apr 2025 15:39:59 +0800</pubDate><guid>https://techinsight.pages.dev/p/webassemblywasm%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E5%AE%9E%E8%B7%B5/</guid><description>&lt;h2 id="ä¸€webassemblyç®€ä»‹"&gt;&lt;a href="#%e4%b8%80webassembly%e7%ae%80%e4%bb%8b" class="header-anchor"&gt;&lt;/a&gt;ä¸€ã€WebAssemblyç®€ä»‹
&lt;/h2&gt;&lt;p&gt;WebAssemblyï¼ˆç®€ç§°Wasmï¼‰æ˜¯ä¸€ç§&lt;strong&gt;äºŒè¿›åˆ¶æŒ‡ä»¤æ ¼å¼&lt;/strong&gt;ï¼Œè®¾è®¡ç”¨äºåœ¨ç°ä»£Webæµè§ˆå™¨ä¸­ä»¥æ¥è¿‘åŸç”Ÿé€Ÿåº¦è¿è¡Œã€‚å®ƒä½œä¸ºJavaScriptçš„è¡¥å……ï¼Œä¸ºWebåº”ç”¨æä¾›é«˜æ€§èƒ½è®¡ç®—èƒ½åŠ›ï¼ŒåŒæ—¶ä¿æŒäº†Webå¹³å°çš„è·¨å¹³å°å’Œå®‰å…¨ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;h3 id="æ ¸å¿ƒç‰¹ç‚¹"&gt;&lt;a href="#%e6%a0%b8%e5%bf%83%e7%89%b9%e7%82%b9" class="header-anchor"&gt;&lt;/a&gt;æ ¸å¿ƒç‰¹ç‚¹ï¼š
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ€§èƒ½&lt;/strong&gt;ï¼šæ‰§è¡Œæ•ˆç‡æ¥è¿‘åŸç”Ÿä»£ç ï¼Œæ¯”JavaScriptå¿«30%-50%&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šè¯­è¨€æ”¯æŒ&lt;/strong&gt;ï¼šæ”¯æŒC/C++ã€Rustã€Goç­‰è¯­è¨€ç¼–è¯‘&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ²™ç®±&lt;/strong&gt;ï¼šè¿è¡Œåœ¨ä¸¥æ ¼éš”ç¦»çš„ç¯å¢ƒä¸­&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨å¹³å°&lt;/strong&gt;ï¼šä¸ä»…é™äºæµè§ˆå™¨ï¼Œä¹Ÿå¯ç”¨äºæœåŠ¡å™¨å’Œè¾¹ç¼˜è®¡ç®—&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="äºŒwasmå¼€å‘ç¯å¢ƒæ­å»º"&gt;&lt;a href="#%e4%ba%8cwasm%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba" class="header-anchor"&gt;&lt;/a&gt;äºŒã€Wasmå¼€å‘ç¯å¢ƒæ­å»º
&lt;/h2&gt;&lt;h3 id="1-rustç¯å¢ƒé…ç½®ä»¥rustä¸ºä¾‹"&gt;&lt;a href="#1-rust%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae%e4%bb%a5rust%e4%b8%ba%e4%be%8b" class="header-anchor"&gt;&lt;/a&gt;1. Rustç¯å¢ƒé…ç½®ï¼ˆä»¥Rustä¸ºä¾‹ï¼‰
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# å®‰è£…Rustå·¥å…·é“¾&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;curl --proto &lt;span class="s1"&gt;&amp;#39;=https&amp;#39;&lt;/span&gt; --tlsv1.2 -sSf https://sh.rustup.rs &lt;span class="p"&gt;|&lt;/span&gt; sh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# æ·»åŠ Wasmç¼–è¯‘ç›®æ ‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;rustup target add wasm32-unknown-unknown
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# å®‰è£…wasm-packå·¥å…·&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cargo install wasm-pack
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="2-é¡¹ç›®ç»“æ„"&gt;&lt;a href="#2-%e9%a1%b9%e7%9b%ae%e7%bb%93%e6%9e%84" class="header-anchor"&gt;&lt;/a&gt;2. é¡¹ç›®ç»“æ„
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;wasm-demo/
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”œâ”€â”€ Cargo.toml
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”œâ”€â”€ src/
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”‚ â””â”€â”€ lib.rs
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â””â”€â”€ index.html
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="ä¸‰å¼€å‘ç¬¬ä¸€ä¸ªwasmåº”ç”¨"&gt;&lt;a href="#%e4%b8%89%e5%bc%80%e5%8f%91%e7%ac%ac%e4%b8%80%e4%b8%aawasm%e5%ba%94%e7%94%a8" class="header-anchor"&gt;&lt;/a&gt;ä¸‰ã€å¼€å‘ç¬¬ä¸€ä¸ªWasmåº”ç”¨
&lt;/h2&gt;&lt;h3 id="1-é…ç½®cargotoml"&gt;&lt;a href="#1-%e9%85%8d%e7%bd%aecargotoml" class="header-anchor"&gt;&lt;/a&gt;1. é…ç½®Cargo.toml
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;package&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;name&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;wasm-demo&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;version&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;0.1.0&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;edition&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;2021&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;lib&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;crate-type&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;cdylib&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;dependencies&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;wasm-bindgen&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;0.2&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="2-ç¼–å†™rustä»£ç srclibrs"&gt;&lt;a href="#2-%e7%bc%96%e5%86%99rust%e4%bb%a3%e7%a0%81srclibrs" class="header-anchor"&gt;&lt;/a&gt;2. ç¼–å†™Rustä»£ç ï¼ˆsrc/lib.rsï¼‰
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wasm_bindgen&lt;/span&gt;::&lt;span class="n"&gt;prelude&lt;/span&gt;::&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[wasm_bindgen]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;: &lt;span class="kt"&gt;i32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;: &lt;span class="kt"&gt;i32&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="kt"&gt;i32&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[wasm_bindgen]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;greet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="kt"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nb"&gt;String&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;format!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;Hello, &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;!&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="3-ç¼–è¯‘wasmæ¨¡å—"&gt;&lt;a href="#3-%e7%bc%96%e8%af%91wasm%e6%a8%a1%e5%9d%97" class="header-anchor"&gt;&lt;/a&gt;3. ç¼–è¯‘Wasmæ¨¡å—
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;wasm-pack build --target web
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="4-æµè§ˆå™¨è°ƒç”¨indexhtml"&gt;&lt;a href="#4-%e6%b5%8f%e8%a7%88%e5%99%a8%e8%b0%83%e7%94%a8indexhtml" class="header-anchor"&gt;&lt;/a&gt;4. æµè§ˆå™¨è°ƒç”¨ï¼ˆindex.htmlï¼‰
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-html" data-lang="html"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;script&lt;/span&gt; &lt;span class="na"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;module&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;import&lt;/span&gt; &lt;span class="nx"&gt;init&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;add&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;greet&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="nx"&gt;from&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;./pkg/wasm_demo.js&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;async&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt; &lt;span class="c1"&gt;// è¾“å‡º8
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;greet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;World&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt; &lt;span class="c1"&gt;// è¾“å‡º&amp;#34;Hello, World!&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;run&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;script&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="å››wasmçš„æ‰©å±•åº”ç”¨é¢†åŸŸ"&gt;&lt;a href="#%e5%9b%9bwasm%e7%9a%84%e6%89%a9%e5%b1%95%e5%ba%94%e7%94%a8%e9%a2%86%e5%9f%9f" class="header-anchor"&gt;&lt;/a&gt;å››ã€Wasmçš„æ‰©å±•åº”ç”¨é¢†åŸŸ
&lt;/h2&gt;&lt;h3 id="1-é«˜æ€§èƒ½webåº”ç”¨"&gt;&lt;a href="#1-%e9%ab%98%e6%80%a7%e8%83%bdweb%e5%ba%94%e7%94%a8" class="header-anchor"&gt;&lt;/a&gt;1. é«˜æ€§èƒ½Webåº”ç”¨
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¸¸æˆå¼€å‘&lt;/strong&gt;ï¼šUnityå’ŒUnreal Engineæ”¯æŒå¯¼å‡ºä¸ºWasm&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éŸ³è§†é¢‘å¤„ç†&lt;/strong&gt;ï¼šFFmpegç¼–è¯‘ä¸ºWasmå®ç°æµè§ˆå™¨ç«¯è§†é¢‘è½¬ç &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç§‘å­¦è®¡ç®—&lt;/strong&gt;ï¼šTensorFlow.jsä½¿ç”¨WasmåŠ é€Ÿæœºå™¨å­¦ä¹ æ¨ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-è·¨å¹³å°å¼€å‘"&gt;&lt;a href="#2-%e8%b7%a8%e5%b9%b3%e5%8f%b0%e5%bc%80%e5%8f%91" class="header-anchor"&gt;&lt;/a&gt;2. è·¨å¹³å°å¼€å‘
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¡Œé¢åº”ç”¨&lt;/strong&gt;ï¼šé€šè¿‡Tauriæ¡†æ¶æ„å»ºè·¨å¹³å°æ¡Œé¢åº”ç”¨&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç§»åŠ¨ç«¯&lt;/strong&gt;ï¼šReact Nativeç»“åˆWasmæå‡æ€§èƒ½&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒºå—é“¾&lt;/strong&gt;ï¼šä»¥å¤ªåŠæ™ºèƒ½åˆçº¦çš„Wasmå®ç°ï¼ˆeWASMï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-æœåŠ¡å™¨ç«¯åº”ç”¨"&gt;&lt;a href="#3-%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%ab%af%e5%ba%94%e7%94%a8" class="header-anchor"&gt;&lt;/a&gt;3. æœåŠ¡å™¨ç«¯åº”ç”¨
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¾¹ç¼˜è®¡ç®—&lt;/strong&gt;ï¼šCloudflare Workersæ”¯æŒWasmå®ç°æ— æœåŠ¡å™¨å‡½æ•°&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’ä»¶ç³»ç»Ÿ&lt;/strong&gt;ï¼šEnvoyä»£ç†çš„Wasmè¿‡æ»¤å™¨&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ€§èƒ½æœåŠ¡&lt;/strong&gt;ï¼šæ•°æ®åº“å¼•æ“ï¼ˆå¦‚SQLiteï¼‰çš„Wasmç‰ˆæœ¬&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="äº”è¿›é˜¶å¼€å‘æŠ€å·§"&gt;&lt;a href="#%e4%ba%94%e8%bf%9b%e9%98%b6%e5%bc%80%e5%8f%91%e6%8a%80%e5%b7%a7" class="header-anchor"&gt;&lt;/a&gt;äº”ã€è¿›é˜¶å¼€å‘æŠ€å·§
&lt;/h2&gt;&lt;h3 id="1-æ€§èƒ½ä¼˜åŒ–"&gt;&lt;a href="#1-%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96" class="header-anchor"&gt;&lt;/a&gt;1. æ€§èƒ½ä¼˜åŒ–
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[wasm_bindgen]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;process_image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;u8&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nb"&gt;Vec&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;u8&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// ä½¿ç”¨SIMDæŒ‡ä»¤ä¼˜åŒ–å›¾åƒå¤„ç†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;unsafe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;simd_processing&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="2-ä¸javascriptäº’æ“ä½œ"&gt;&lt;a href="#2-%e4%b8%8ejavascript%e4%ba%92%e6%93%8d%e4%bd%9c" class="header-anchor"&gt;&lt;/a&gt;2. ä¸JavaScriptäº’æ“ä½œ
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[wasm_bindgen(module = &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;/js/utils.js&amp;#34;&lt;/span&gt;&lt;span class="cp"&gt;)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;extern&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;C&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;js_log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="kt"&gt;str&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[wasm_bindgen]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;log_hello&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;js_log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;Hello from Wasm!&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="3-å¤šçº¿ç¨‹æ”¯æŒ"&gt;&lt;a href="#3-%e5%a4%9a%e7%ba%bf%e7%a8%8b%e6%94%af%e6%8c%81" class="header-anchor"&gt;&lt;/a&gt;3. å¤šçº¿ç¨‹æ”¯æŒ
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wasm_bindgen&lt;/span&gt;::&lt;span class="n"&gt;prelude&lt;/span&gt;::&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;rayon&lt;/span&gt;::&lt;span class="n"&gt;prelude&lt;/span&gt;::&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[wasm_bindgen]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;parallel_compute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;input&lt;/span&gt;: &lt;span class="nb"&gt;Vec&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;f64&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nb"&gt;Vec&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;f64&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;par_iter&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;2.0&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;collect&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="å…­wasmç”Ÿæ€ç³»ç»Ÿå·¥å…·"&gt;&lt;a href="#%e5%85%adwasm%e7%94%9f%e6%80%81%e7%b3%bb%e7%bb%9f%e5%b7%a5%e5%85%b7" class="header-anchor"&gt;&lt;/a&gt;å…­ã€Wasmç”Ÿæ€ç³»ç»Ÿå·¥å…·
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼–è¯‘å·¥å…·é“¾&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Emscriptenï¼ˆC/C++ï¼‰&lt;/li&gt;
&lt;li&gt;wasm-packï¼ˆRustï¼‰&lt;/li&gt;
&lt;li&gt;GoåŸç”ŸWasmæ”¯æŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿è¡Œæ—¶ç¯å¢ƒ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Wasmtimeï¼ˆç‹¬ç«‹è¿è¡Œæ—¶ï¼‰&lt;/li&gt;
&lt;li&gt;Wasmerï¼ˆè·¨å¹³å°è¿è¡Œæ—¶ï¼‰&lt;/li&gt;
&lt;li&gt;Node.js Wasmæ”¯æŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è°ƒè¯•å·¥å…·&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chrome DevTools Wasmè°ƒè¯•&lt;/li&gt;
&lt;li&gt;wasm-bindgen-testæµ‹è¯•æ¡†æ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="ä¸ƒæœªæ¥å‘å±•è¶‹åŠ¿"&gt;&lt;a href="#%e4%b8%83%e6%9c%aa%e6%9d%a5%e5%8f%91%e5%b1%95%e8%b6%8b%e5%8a%bf" class="header-anchor"&gt;&lt;/a&gt;ä¸ƒã€æœªæ¥å‘å±•è¶‹åŠ¿
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;WASIï¼ˆWebAssembly System Interfaceï¼‰&lt;/strong&gt;ï¼šæ ‡å‡†åŒ–ç³»ç»Ÿæ¥å£ï¼Œæ‰©å±•Wasmåœ¨æœåŠ¡ç«¯çš„åº”ç”¨&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»„ä»¶æ¨¡å‹&lt;/strong&gt;ï¼šå®ç°Wasmæ¨¡å—é—´çš„å®‰å…¨ç»„åˆ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹å’ŒSIMD&lt;/strong&gt;ï¼šå¢å¼ºå¹¶è¡Œè®¡ç®—èƒ½åŠ›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GCæ”¯æŒ&lt;/strong&gt;ï¼šç®€åŒ–é«˜çº§è¯­è¨€é›†æˆ&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="ç»“è¯­"&gt;&lt;a href="#%e7%bb%93%e8%af%ad" class="header-anchor"&gt;&lt;/a&gt;ç»“è¯­
&lt;/h2&gt;&lt;p&gt;WebAssemblyæ­£åœ¨é‡å¡‘Webå’Œäº‘è®¡ç®—çš„åŸºç¡€æ¶æ„ã€‚ä»ç®€å•çš„æ€§èƒ½ä¼˜åŒ–åˆ°å¤æ‚çš„è·¨å¹³å°åº”ç”¨ï¼ŒWasmä¸ºå¼€å‘è€…æä¾›äº†å‰æ‰€æœªæœ‰çš„å¯èƒ½æ€§ã€‚é€šè¿‡æœ¬æ–‡çš„å…¥é—¨æŒ‡å—ï¼Œæ‚¨å·²ç»æŒæ¡äº†Wasmå¼€å‘çš„åŸºç¡€çŸ¥è¯†ï¼Œå¯ä»¥å¼€å§‹æ¢ç´¢æ›´å¹¿é˜”çš„åº”ç”¨åœºæ™¯ã€‚&lt;/p&gt;</description></item><item><title>ä»C++å’ŒRustèŠèŠRAII</title><link>https://techinsight.pages.dev/p/%E4%BB%8Ec-%E5%92%8Crust%E8%81%8A%E8%81%8Araii/</link><pubDate>Thu, 23 Jan 2025 09:21:25 +0800</pubDate><guid>https://techinsight.pages.dev/p/%E4%BB%8Ec-%E5%92%8Crust%E8%81%8A%E8%81%8Araii/</guid><description>&lt;p&gt;åœ¨ä¸€äº›ä»‹ç»Rustçš„æ–‡ç« ä¸­ç»å¸¸ä¼šè¯´Rustå…·æœ‰RAIIçš„æœºåˆ¶ï¼Œæ‰€è°“çš„Resource Acquisition Is Initializationï¼Œä¹Ÿå³&amp;quot;èµ„æºè·å–å³åˆå§‹åŒ–&amp;quot;ï¼Œé‚£åˆ°åº•ä»€ä¹ˆæ˜¯RAIIå‘¢ï¼Ÿæˆ‘ä»¬ä»&lt;strong&gt;èµ„æºç®¡ç†&lt;/strong&gt;æœ€åˆçš„é—®é¢˜å¼€å§‹è¯´èµ·ã€‚&lt;/p&gt;
&lt;h2 id="æ²¡æœ‰raiiæ—¶cæ˜¯å¦‚ä½•ç®¡ç†èµ„æºçš„"&gt;&lt;a href="#%e6%b2%a1%e6%9c%89raii%e6%97%b6c%e6%98%af%e5%a6%82%e4%bd%95%e7%ae%a1%e7%90%86%e8%b5%84%e6%ba%90%e7%9a%84" class="header-anchor"&gt;&lt;/a&gt;æ²¡æœ‰RAIIæ—¶C++æ˜¯å¦‚ä½•ç®¡ç†èµ„æºçš„
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-cpp" data-lang="cpp"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;fstream&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æµå¯¹è±¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;ifstream&lt;/span&gt; &lt;span class="n"&gt;inputFile&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// æ‰“å¼€æ–‡ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;inputFile&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;example.txt&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æˆåŠŸæ‰“å¼€
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;inputFile&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;cerr&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="s"&gt;&amp;#34;æ— æ³•æ‰“å¼€æ–‡ä»¶!&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;endl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// è¿”å›é”™è¯¯ä»£ç 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// å¤„ç†æ–‡ä»¶å†…å®¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// å…³é—­æ–‡ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;inputFile&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// å…³é—­æ–‡ä»¶æµ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// æ­£å¸¸ç»“æŸç¨‹åº
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œæ‰“å¼€èµ„æºä¹‹åè¿˜è¦æ‰‹åŠ¨è¿›è¡Œå…³é—­ï¼Œå¦åˆ™å°±ä¼šäº§ç”Ÿèµ„æºæ³„æ¼ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;h3 id="ä»€ä¹ˆæ˜¯èµ„æº"&gt;&lt;a href="#%e4%bb%80%e4%b9%88%e6%98%af%e8%b5%84%e6%ba%90" class="header-anchor"&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯èµ„æºï¼Ÿ
&lt;/h3&gt;&lt;p&gt;èµ„æºå¯ä»¥ç†è§£ä¸ºç¨‹åºåœ¨è¿è¡Œæ—¶é”ä½¿ç”¨çš„ä»»ä½•å¤–éƒ¨æˆ–å†…éƒ¨çš„å®ä½“ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å†…å­˜ï¼šåŠ¨æ€åˆ†é…çš„å†…å­˜å—ï¼ˆä¾‹å¦‚é€šè¿‡newæˆ–è€…mallocåˆ†é…çš„å†…å­˜ï¼‰&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶å¥æŸ„ï¼šæ‰“å¼€çš„æ–‡ä»¶ï¼Œæ¶‰åŠè¯»å†™æ“ä½œ&lt;/li&gt;
&lt;li&gt;ç½‘ç»œè¿æ¥ï¼šä¸å¤–éƒ¨æœåŠ¡æˆ–è®¾å¤‡çš„è¿æ¥&lt;/li&gt;
&lt;li&gt;æ•°æ®åº“è¿æ¥ï¼šä¸æ•°æ®åº“çš„é“¾æ¥ï¼Œæ‰§è¡ŒæŸ¥è¯¢å’Œäº‹åŠ¡&lt;/li&gt;
&lt;li&gt;é”ï¼šåœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œç”¨äºä¿æŠ¤å…±äº«èµ„æºçš„æœºåˆ¶&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;èµ„æºé€šè¿‡æ˜¯æœ‰é™çš„ï¼Œç¨‹åºéœ€è¦åˆç†åœ°ç®¡ç†è¿™äº›èµ„æºï¼Œä»¥é¿å…èµ„æºæ³„æ¼æˆ–è€…è§¦å‘ç³»ç»Ÿé™åˆ¶ã€‚&lt;/p&gt;
&lt;h3 id="å®ç°raiiæœ€ç®€å•çš„å½¢å¼"&gt;&lt;a href="#%e5%ae%9e%e7%8e%b0raii%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e5%bd%a2%e5%bc%8f" class="header-anchor"&gt;&lt;/a&gt;å®ç°RAIIæœ€ç®€å•çš„å½¢å¼
&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“å¾ˆå¤šé¢å‘å¯¹è±¡çš„è¯­è¨€éƒ½æœ‰&lt;strong&gt;æ„é€ å‡½æ•°&lt;/strong&gt;å’Œ&lt;strong&gt;ææ„å‡½æ•°&lt;/strong&gt;ï¼Œè¿™ä¸å°±æ˜¯å¤©ç„¶çš„åˆ›å»ºå’Œé‡Šæ”¾&lt;strong&gt;èµ„æº&lt;/strong&gt;çš„æ–¹æ³•å—ï¼Ÿå¦‚æœæŠŠèµ„æºçš„åˆ›å»ºæ”¾åœ¨æ„é€ å‡½æ•°é‡Œï¼Œåœ¨ææ„å‡½æ•°é‡Œé‡Šæ”¾å®ƒï¼Œå°±å¯ä»¥é€šè¿‡è¿™ä¸ª&lt;strong&gt;åŒ…è£…å¯¹è±¡&lt;/strong&gt;æ¥è‡ªåŠ¨ç®¡ç†èµ„æºäº†ã€‚&lt;/p&gt;
&lt;h3 id="è‡ªå®šä¹‰ä¸€ä¸ªå¯¹è±¡æ¥åŒ…è£…èµ„æº"&gt;&lt;a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e4%b8%80%e4%b8%aa%e5%af%b9%e8%b1%a1%e6%9d%a5%e5%8c%85%e8%a3%85%e8%b5%84%e6%ba%90" class="header-anchor"&gt;&lt;/a&gt;è‡ªå®šä¹‰ä¸€ä¸ªå¯¹è±¡æ¥åŒ…è£…èµ„æº
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-cpp" data-lang="cpp"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Resource&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;Resource&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;inputFile&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;example.txt&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;Resource&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;inputFile&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;private&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;ifstream&lt;/span&gt; &lt;span class="n"&gt;inputFile&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™å°±æ˜¯RAIIæœ€åŸºæœ¬çš„å½¢å¼äº†ã€‚&lt;/p&gt;
&lt;h3 id="ä½¿ç”¨cå†…ç½®çš„æ™ºèƒ½æŒ‡é’ˆæ¥åŒ…è£…èµ„æº"&gt;&lt;a href="#%e4%bd%bf%e7%94%a8c%e5%86%85%e7%bd%ae%e7%9a%84%e6%99%ba%e8%83%bd%e6%8c%87%e9%92%88%e6%9d%a5%e5%8c%85%e8%a3%85%e8%b5%84%e6%ba%90" class="header-anchor"&gt;&lt;/a&gt;ä½¿ç”¨C++å†…ç½®çš„æ™ºèƒ½æŒ‡é’ˆæ¥åŒ…è£…èµ„æº
&lt;/h3&gt;&lt;p&gt;ä½†å¦‚æœè¿™æ ·æ˜¯ä¸æ˜¯å°±å¤ªéº»çƒ¦äº†ï¼Œè¦ç»™æ¯ä¸ªå¯¹è±¡å®šä¹‰ä¸€ä¸ªåŒ…è£…ç±»ï¼Œå†å»å†™å®ƒçš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ï¼Œæœ‰æ²¡æœ‰æ›´ç®€å•çš„ç”¨æ³•å‘¢ï¼Ÿ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-cpp" data-lang="cpp"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;fstream&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;memory&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç†æ–‡ä»¶æµ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;unique_ptr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;ifstream&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;inputFile&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;make_unique&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;ifstream&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;example.txt&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æˆåŠŸæ‰“å¼€
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;inputFile&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;cerr&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="s"&gt;&amp;#34;æ— æ³•æ‰“å¼€æ–‡ä»¶!&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;endl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// è¿”å›é”™è¯¯ä»£ç 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// å¤„ç†æ–‡ä»¶å†…å®¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// inputFile ä¼šåœ¨è¶…å‡ºä½œç”¨åŸŸæ—¶è‡ªåŠ¨å…³é—­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// æ­£å¸¸ç»“æŸç¨‹åº
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ ·å°±ä¸ç”¨å†å»æ‰‹åŠ¨&lt;code&gt;close&lt;/code&gt;äº†ã€‚&lt;/p&gt;
&lt;h2 id="ä¸ºä»€ä¹ˆèµ„æºéœ€è¦æ‰‹åŠ¨å›æ”¶"&gt;&lt;a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%b5%84%e6%ba%90%e9%9c%80%e8%a6%81%e6%89%8b%e5%8a%a8%e5%9b%9e%e6%94%b6" class="header-anchor"&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆèµ„æºéœ€è¦æ‰‹åŠ¨å›æ”¶?
&lt;/h2&gt;&lt;p&gt;ä½†ä¸ºä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆèµ„æºéœ€è¦æ‰‹åŠ¨å›æ”¶å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;é¦–å…ˆè¦æ˜ç¡®çš„æ˜¯ï¼Œè¿™é‡Œè¯´çš„èµ„æºé€šå¸¸æ˜¯å’Œå¤–éƒ¨ç³»ç»Ÿæœ‰äº¤äº’çš„ï¼Œæ‰€ä»¥å¯¹èµ„æºçš„ä½¿ç”¨å¾ˆå¤šéƒ½æ˜¯æœ‰é™åˆ¶çš„ï¼Œæ¯”å¦‚ç³»ç»Ÿä¼šé™åˆ¶ä¸€ä¸ªæ–‡ä»¶è¢«å¤šä¸ªè¿›ç¨‹åŒæ—¶æ‰“å¼€ï¼Œå¦‚æœä¸&lt;strong&gt;åŠæ—¶é‡Šæ”¾&lt;/strong&gt;ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¶ä»–è¿›ç¨‹æ— æ³•ä½¿ç”¨è¿™ä¸ªèµ„æºã€‚&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡Œåˆè¦åˆ†ä¸¤å—è¯´ï¼šæ— GCçš„è¯­è¨€å’Œæœ‰GCçš„è¯­è¨€ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæ— GCçš„è¯­è¨€ï¼Œä¹Ÿå°±åªèƒ½æ‰‹åŠ¨å›æ”¶äº†ï¼Œé‚£æœ‰GCçš„è¯­è¨€æ¯”å¦‚PHPã€Javaä¸ºä»€ä¹ˆä¹Ÿéœ€è¦å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºåƒåœ¾å›æ”¶ä¹Ÿä¸æ˜¯æ—¶åˆ»åœ¨è¿›è¡Œçš„ï¼Œæ‰‹åŠ¨å›æ”¶æ˜¯ä¸ºäº†&lt;strong&gt;åŠæ—¶é‡Šæ”¾&lt;/strong&gt;ï¼Œé¿å…å¯¹æœ‰é™èµ„æºçš„é•¿æœŸå ç”¨ã€‚&lt;/p&gt;
&lt;h3 id="æ™®é€šçš„èµ„æºå›æ”¶è‡ªå·±æŒ‡å®šåœ¨ä½•æ—¶close"&gt;&lt;a href="#%e6%99%ae%e9%80%9a%e7%9a%84%e8%b5%84%e6%ba%90%e5%9b%9e%e6%94%b6%e8%87%aa%e5%b7%b1%e6%8c%87%e5%ae%9a%e5%9c%a8%e4%bd%95%e6%97%b6close" class="header-anchor"&gt;&lt;/a&gt;æ™®é€šçš„èµ„æºå›æ”¶(è‡ªå·±æŒ‡å®šåœ¨ä½•æ—¶close)
&lt;/h3&gt;&lt;p&gt;ä¸Šé¢è®²çš„éƒ½æ˜¯è¦æ‰‹åŠ¨é‡Šæ”¾èµ„æºï¼Œå³é€šè¿‡ä¸€ä¸ªæŒ‡ä»¤å‘ŠçŸ¥ç¨‹åºä½•æ—¶è¦é‡Šæ”¾èµ„æºï¼Œä½†å¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯åœ¨æ–¹æ³•ç»“æŸæ—¶é‡Šæ”¾ï¼Œè€Œä¸”æœ‰æ—¶æ‰“å¼€èµ„æºçš„è¿‡ç¨‹å¯èƒ½ä¼šæœ‰å¼‚å¸¸ï¼Œè¿™æ—¶æœ€ä¸‹é¢çš„èµ„æºå›æ”¶çš„è¯­å¥è¿˜æ²¡æ¥å¾—åŠæ‰§è¡Œå°±å·²ç»é€€å‡ºäº†ï¼Œèµ„æºå°±æ³„æ¼äº†ã€‚&lt;/p&gt;
&lt;h3 id="æ”¹è¿›åçš„èµ„æºå›æ”¶golangçš„-defer-close"&gt;&lt;a href="#%e6%94%b9%e8%bf%9b%e5%90%8e%e7%9a%84%e8%b5%84%e6%ba%90%e5%9b%9e%e6%94%b6golang%e7%9a%84-defer-close" class="header-anchor"&gt;&lt;/a&gt;æ”¹è¿›åçš„èµ„æºå›æ”¶(Golangçš„ defer Close)
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†è§£å†³ä¸Šé¢æåˆ°çš„å¼‚å¸¸é€€å‡ºæ—¶èµ„æºæ— æ³•æˆåŠŸå›æ”¶çš„é—®é¢˜ï¼ŒJavaåšäº†ä¸€ä¸ª&lt;code&gt;try-with-resource&lt;/code&gt;ï¼Œå¯ä»¥è‡ªåŠ¨å…³é—­&lt;code&gt;Closable&lt;/code&gt;ç±»å‹çš„èµ„æºã€‚è€ŒGolangçš„æ–¹æ¡ˆè¦æ›´çµæ´»ï¼Œåªéœ€è¦åœ¨æ‰“å¼€èµ„æºä¹‹åç«‹å³å†™ä¸€æ¡&lt;code&gt;defer&lt;/code&gt;å°±å¯ä»¥äº†ï¼Œå½“èµ„æºä½¿ç”¨å®Œæ¯•åå°±ä¼šè‡ªåŠ¨è§¦å‘deferä¸­çš„è¯­å¥ï¼Œè€Œä¸”å’Œæ‰“å¼€è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºç°å¼‚å¸¸æ— å…³ã€‚ç›¸æ¯”Javaï¼Œè¿™ä¸ªé€šç”¨å‹å¼ºäº†å¾ˆå¤šï¼Œè€Œä¸”deferçš„è¯­å¥ä¹Ÿä¸é™äºèµ„æºï¼Œå…¶ä»–çš„ä¹Ÿéƒ½å¯ä»¥ï¼Œæ¯”å¦‚é€€å‡ºå‰è®°å½•ä¸€æ¡æ—¥å¿—ä¹‹ç±»ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å³ä¾¿è¿™æ ·ï¼Œè¿˜æ˜¯è¦æ‰‹åŠ¨ç®¡ç†ï¼Œè¿™é¡¶å¤šç®—ä¸ªåŠè‡ªåŠ¨æŒ¡ã€‚&lt;/p&gt;
&lt;h2 id="raiiçš„èµ„æºå›æ”¶"&gt;&lt;a href="#raii%e7%9a%84%e8%b5%84%e6%ba%90%e5%9b%9e%e6%94%b6" class="header-anchor"&gt;&lt;/a&gt;RAIIçš„èµ„æºå›æ”¶
&lt;/h2&gt;&lt;p&gt;å›åˆ°æœ€åˆçš„é—®é¢˜ï¼Œ&lt;strong&gt;å¹&lt;/strong&gt;Rustçš„äººæ€»è¯´å®ƒæœ‰RAIIï¼Œç„¶åC++è¿™è¾¹å°±è¯´â€œä¸å°±æ˜¯RAIIå—ï¼Ÿæå¾—å¥½åƒè°æ²¡æœ‰ä¼¼çš„â€ï¼Œåˆ°è¿™é‡Œå°±è¦ä½“ç°å‡ºåŒºåˆ«äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä»ä¸Šé¢çš„ä¾‹å­æ¥çœ‹ï¼ŒC++è¿˜éœ€è¦&lt;strong&gt;æ˜¾å¼&lt;/strong&gt;ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ¥åˆ©ç”¨RAIIè‡ªåŠ¨å›æ”¶èµ„æºï¼Œä½†Rustçš„RAIIæœºåˆ¶æ˜¯æ ¹æ¤åœ¨è¯­æ³•ä¸­çš„ã€‚Rustçš„æ‰€æœ‰æƒç³»ç»Ÿæ˜¯å®ç°RAIIçš„åŸºç¡€ï¼Œ&lt;strong&gt;æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ï¼Œå¹¶ä¸”åªèƒ½è¢«ä¸€ä¸ªæ‰€æœ‰è€…ç®¡ç†&lt;/strong&gt;ï¼Œå½“è¶…å‡ºæ‰€æœ‰è€…çš„ä½œç”¨åŸŸæ—¶ï¼ŒRustå°±ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œé‡Šæ”¾èµ„æºã€‚è€Œææ„å‡½æ•°æ˜¯é€šè¿‡å®ç°&lt;code&gt;Drop&lt;/code&gt;traitæ¥å®šä¹‰çš„ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¶…å‡ºå…¶ä½œç”¨åŸŸæ—¶ï¼ŒRustä¼šè‡ªåŠ¨è°ƒç”¨å®ƒçš„&lt;code&gt;drop&lt;/code&gt;æ–¹æ³•ï¼Œä»è€Œé‡Šæ”¾å…³è”çš„èµ„æºã€‚å¯¹äºæ–‡ä»¶ã€ç½‘ç»œè¿æ¥ç­‰èµ„æºï¼ŒRustä¼šåœ¨å¯¹è±¡ææ„æ—¶è‡ªåŠ¨å…³é—­å®ƒä»¬ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="nc"&gt;MyFile&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;: &lt;span class="nc"&gt;File&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;impl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Drop&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MyFile&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;drop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// åœ¨æ­¤å¤„é‡Šæ”¾èµ„æºï¼Œä¾‹å¦‚å…³é—­æ–‡ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="æœ€ç®€å•çš„ä¾‹å­"&gt;&lt;a href="#%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e4%be%8b%e5%ad%90" class="header-anchor"&gt;&lt;/a&gt;æœ€ç®€å•çš„ä¾‹å­
&lt;/h3&gt;&lt;p&gt;çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œæ‰“å¼€æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶ï¼Œå‰©ä¸‹çš„äº‹äº¤ç»™Rustå°±å¥½äº†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;fs&lt;/span&gt;::&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;io&lt;/span&gt;::&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nc"&gt;io&lt;/span&gt;::&lt;span class="nb"&gt;Result&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;::&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;file.txt&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// æ‰“å¼€æ–‡ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;String&lt;/span&gt;::&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_to_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è¯»å–æ–‡ä»¶å†…å®¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// æ‰“å°æ–‡ä»¶å†…å®¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å½“ `file` è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œæ–‡ä»¶ä¼šè‡ªåŠ¨å…³é—­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Ok&lt;/span&gt;&lt;span class="p"&gt;(())&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// `file` å˜é‡åœ¨è¿™é‡Œè¶…å‡ºä½œç”¨åŸŸï¼Œèµ„æºä¼šè¢«è‡ªåŠ¨é‡Šæ”¾
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="ç¨ç¨å¤æ‚ä¸€ç‚¹çš„ä¾‹å­"&gt;&lt;a href="#%e7%a8%8d%e7%a8%8d%e5%a4%8d%e6%9d%82%e4%b8%80%e7%82%b9%e7%9a%84%e4%be%8b%e5%ad%90" class="header-anchor"&gt;&lt;/a&gt;ç¨ç¨å¤æ‚ä¸€ç‚¹çš„ä¾‹å­
&lt;/h3&gt;&lt;p&gt;ä¸Šé¢è¿™ä¸ªå’ŒGolangçš„&lt;code&gt;defer&lt;/code&gt;ç›¸æ¯”çœ‹ä¸å‡ºæ˜æ˜¾çš„ä¼˜åŠ¿ï¼Œä½†å¦‚æœå†åŠ ä¸€ä¸ªé¢å¤–çš„&lt;strong&gt;ä½¿ç”¨&lt;/strong&gt;è¿™ä¸ª&lt;code&gt;file&lt;/code&gt;çš„æ–¹æ³•å‘¢ï¼Ÿ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;fs&lt;/span&gt;::&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;::&lt;span class="n"&gt;io&lt;/span&gt;::&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;process_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;: &lt;span class="nc"&gt;File&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// åœ¨è¿™é‡Œå¤„ç†æ–‡ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nc"&gt;io&lt;/span&gt;::&lt;span class="nb"&gt;Result&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;::&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;file.txt&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// æ‰“å¼€æ–‡ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;String&lt;/span&gt;::&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_to_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="k"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// è¯»å–æ–‡ä»¶å†…å®¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// æ‰“å°æ–‡ä»¶å†…å®¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;process_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å½“ `file` è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œæ–‡ä»¶ä¼šè‡ªåŠ¨å…³é—­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Ok&lt;/span&gt;&lt;span class="p"&gt;(())&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// `file` å˜é‡åœ¨è¿™é‡Œè¶…å‡ºä½œç”¨åŸŸï¼Œèµ„æºä¼šè¢«è‡ªåŠ¨é‡Šæ”¾
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æŠŠ&lt;code&gt;file&lt;/code&gt;å¥æŸ„ä¼ é€’åˆ°åˆ«çš„æ–¹æ³•é‡Œå»äº†ï¼Œè¿˜æ€ä¹ˆåœ¨&lt;code&gt;main&lt;/code&gt;é‡Œ&lt;code&gt;defer&lt;/code&gt;å‘¢ï¼Ÿè¿™å°±æ˜¯Golangçš„åŠè‡ªåŠ¨åŒ–å¤„ç†ç•™ä¸‹çš„é—®é¢˜ï¼Œè€ŒRustç”±äºå­˜åœ¨æ‰€æœ‰æƒç³»ç»Ÿï¼Œå½“æŠŠ&lt;code&gt;file&lt;/code&gt;ä½œä¸ºå‚æ•°ä¼ é€’ç»™&lt;code&gt;process_file&lt;/code&gt;æ–¹æ³•ä¹‹åï¼Œå®ƒçš„æ‰€æœ‰æƒå°±å‘ç”Ÿäº†è½¬ç§»ï¼Œå°±åªèƒ½åœ¨&lt;code&gt;process_file&lt;/code&gt;æ–¹æ³•é‡Œå»é‡Šæ”¾å®ƒäº†ã€‚&lt;/p&gt;
&lt;h2 id="æ€»ç»“"&gt;&lt;a href="#%e6%80%bb%e7%bb%93" class="header-anchor"&gt;&lt;/a&gt;æ€»ç»“
&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡é€šè¿‡ä¸€ä¸ªå…¸å‹çš„ä¾‹å­è§£é‡Šäº†ä»€ä¹ˆæ˜¯RAIIï¼Œä»¥åŠåœ¨ä¸åŒè¯­è¨€ä¸­å®ç°RAIIçš„åŒºåˆ«ï¼Œæ€»çš„æ¥è¯´Rustçš„RAIIæœºåˆ¶æ›´åŠ &lt;strong&gt;åŸç”Ÿ&lt;/strong&gt;ï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯æœ‰ä»£ä»·çš„ï¼Œæ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œ&lt;code&gt;file&lt;/code&gt;çš„æ‰€æœ‰æƒè½¬ç§»ç»™&lt;code&gt;process_file&lt;/code&gt;ä¹‹åï¼Œ&lt;code&gt;main&lt;/code&gt;æ–¹æ³•çš„ä¸‹åŠéƒ¨åˆ†å°±æ— æ³•ä½¿ç”¨&lt;code&gt;file&lt;/code&gt;å˜é‡äº†ï¼Œè¿™åˆæ¶‰åŠ&lt;code&gt;Clone&lt;/code&gt;ã€&lt;code&gt;Copy&lt;/code&gt;ç­‰ä¸€å †æ¦‚å¿µäº†ã€‚æ‰€ä»¥ç»™æˆ‘çš„æ„Ÿè§‰æ˜¯ä¸ºäº†é¿å…æ‰€æœ‰æƒç³»ç»Ÿå¸¦æ¥çš„éº»çƒ¦ï¼Œç”¨Rustå¯èƒ½ä¼šå†™å‡ºæ›´åŠ é•¿çš„æ–¹æ³•â€”â€”æ—¢ç„¶æ‰€æœ‰æƒä¼šè¢«æ–¹æ³•è°ƒç”¨è½¬ç§»ï¼Œé‚£ä¹ˆå°±ä¸è°ƒç”¨å…¶ä»–æ–¹æ³•äº†ã€‚&lt;/p&gt;</description></item><item><title>ä½¿ç”¨ Rust Criterion è¿›è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•</title><link>https://techinsight.pages.dev/p/%E4%BD%BF%E7%94%A8-rust-criterion-%E8%BF%9B%E8%A1%8C%E6%80%A7%E8%83%BD%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/</link><pubDate>Fri, 15 Nov 2024 09:56:01 +0800</pubDate><guid>https://techinsight.pages.dev/p/%E4%BD%BF%E7%94%A8-rust-criterion-%E8%BF%9B%E8%A1%8C%E6%80%A7%E8%83%BD%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/</guid><description>&lt;p&gt;åœ¨ Rust å¼€å‘ä¸­ï¼Œæ€§èƒ½åŸºå‡†æµ‹è¯•æ˜¯éå¸¸é‡è¦çš„ä¸€ç¯ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…è¯„ä¼°ä»£ç çš„æ€§èƒ½å¹¶è¿›è¡Œä¼˜åŒ–ã€‚&lt;code&gt;Criterion.rs&lt;/code&gt; æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Rust åŸºå‡†æµ‹è¯•æ¡†æ¶ï¼Œå®ƒæä¾›äº†ç®€å•æ˜“ç”¨çš„æ¥å£å’Œä¸°å¯Œçš„åŠŸèƒ½ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ &lt;code&gt;Criterion&lt;/code&gt; è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="1-ä»€ä¹ˆæ˜¯-criterionrs"&gt;&lt;a href="#1-%e4%bb%80%e4%b9%88%e6%98%af-criterionrs" class="header-anchor"&gt;&lt;/a&gt;1. ä»€ä¹ˆæ˜¯ Criterion.rsï¼Ÿ
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Criterion.rs&lt;/code&gt; æ˜¯ä¸€ä¸ªç”¨äº Rust çš„åŸºå‡†æµ‹è¯•åº“ï¼Œæ—¨åœ¨å–ä»£ Rust æ ‡å‡†åº“ä¸­çš„åŸºå‡†æµ‹è¯•åŠŸèƒ½ã€‚å®ƒæä¾›æ›´ç²¾ç¡®çš„æµ‹é‡æ‰‹æ®µå’Œæ›´å¥½çš„æŠ¥å‘ŠåŠŸèƒ½ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…æ·±å…¥äº†è§£ä»£ç çš„æ€§èƒ½è¡¨ç°ã€‚&lt;/p&gt;
&lt;h3 id="2-å®‰è£…-criterionrs"&gt;&lt;a href="#2-%e5%ae%89%e8%a3%85-criterionrs" class="header-anchor"&gt;&lt;/a&gt;2. å®‰è£… Criterion.rs
&lt;/h3&gt;&lt;p&gt;è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ &lt;code&gt;Criterion.rs&lt;/code&gt;ï¼Œé¦–å…ˆéœ€è¦åœ¨ &lt;code&gt;Cargo.toml&lt;/code&gt; æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;dev-dependencies&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;criterion&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;0.5.1&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ³¨æ„ï¼šè¿™ä¸ªä¾èµ–æ˜¯æ·»åŠ åœ¨&lt;code&gt;dev-dependencies&lt;/code&gt;ä¸­çš„ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ç”¨&lt;code&gt;cargo add criterion&lt;/code&gt;æ¥å®‰è£…ã€‚é‚£ä¹ˆå®ƒæœ‰ä¸¤ç§æ–¹å¼å®ç°&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç¼–è¾‘&lt;code&gt;Cargo.toml&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ˜¯åºŸè¯&lt;/p&gt;
&lt;ol start="2"&gt;
&lt;li&gt;é€šè¿‡&lt;code&gt;cargo-edit&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cargo install cargo-edit
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cargo add --dev criterion
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å®‰è£…&lt;code&gt;cargo-edit&lt;/code&gt;å°±æ˜¯ä¸ºäº†èƒ½è®©&lt;code&gt;cargo add&lt;/code&gt;æ”¯æŒä¸€ä¸ª&lt;code&gt;--dev&lt;/code&gt;çš„é€‰é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="3-åˆ›å»ºåŸºå‡†æµ‹è¯•"&gt;&lt;a href="#3-%e5%88%9b%e5%bb%ba%e5%9f%ba%e5%87%86%e6%b5%8b%e8%af%95" class="header-anchor"&gt;&lt;/a&gt;3. åˆ›å»ºåŸºå‡†æµ‹è¯•
&lt;/h3&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ªåŸºå‡†æµ‹è¯•éå¸¸ç®€å•ã€‚é¦–å…ˆï¼Œåœ¨é¡¹ç›®çš„ &lt;code&gt;benches&lt;/code&gt; ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„åŸºå‡†æµ‹è¯•æ–‡ä»¶ï¼Œä¾‹å¦‚ &lt;code&gt;benches/bench_hash.rs&lt;/code&gt;ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// benches/bench_hash.rs
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;criterion&lt;/span&gt;::&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;criterion_group&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;criterion_main&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Criterion&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;deduplicate&lt;/span&gt;::&lt;span class="n"&gt;file_info&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;bench_hash&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;/path/to/a/file&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file_info&lt;/span&gt;::&lt;span class="n"&gt;sha256_hash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;benchmark_hash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nc"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Criterion&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bench_function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;benchmark_sha256&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;||&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bench_hash&lt;/span&gt;&lt;span class="p"&gt;()));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;criterion_group!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;benches&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;benchmark_hash&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;criterion_main!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;benches&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª &lt;code&gt;bench_hash()&lt;/code&gt; æ–¹æ³•ï¼Œç”¨æ¥è°ƒç”¨ä½ çš„&lt;code&gt;lib.rs&lt;/code&gt;ä¸­å·²ç»å®šä¹‰è¿‡çš„&lt;code&gt;file_info::sha256_hash()&lt;/code&gt;æ–¹æ³•ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†ç»™å®ƒä¸€ä¸ªè¾“å…¥å‚æ•°ï¼Œå¹¶åˆ›å»ºäº†ä¸€ä¸ªåŸºå‡†æµ‹è¯•æ¥æµ‹é‡å…¶æ€§èƒ½ã€‚&lt;code&gt;c.bench_function&lt;/code&gt; å‡½æ•°æ¥æ”¶ä¸€ä¸ªåç§°å’Œä¸€ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°ï¼Œé—­åŒ…ä¸­æ˜¯æˆ‘ä»¬å¸Œæœ›åŸºå‡†æµ‹è¯•æ‰§è¡Œçš„ä»£ç ã€‚&lt;/p&gt;
&lt;h3 id="4-è¿è¡ŒåŸºå‡†æµ‹è¯•"&gt;&lt;a href="#4-%e8%bf%90%e8%a1%8c%e5%9f%ba%e5%87%86%e6%b5%8b%e8%af%95" class="header-anchor"&gt;&lt;/a&gt;4. è¿è¡ŒåŸºå‡†æµ‹è¯•
&lt;/h3&gt;&lt;p&gt;è¦è¿è¡ŒåŸºå‡†æµ‹è¯•ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cargo bench
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ—¶ä½ ä¼šå‘ç°åŸºå‡†æµ‹è¯•å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸ºè¿˜éœ€è¦åœ¨&lt;code&gt;Cargo.toml&lt;/code&gt;ä¸­æ·»åŠ ä¸‹åˆ—çš„å†…å®¹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="nx"&gt;bench&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;name&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;bench_hash&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;harness&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™é‡Œè§£é‡Šä¸€ä¸‹è¿™å‡ è¡Œçš„å«ä¹‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;name = &amp;quot;bench_hash&amp;quot;&lt;/code&gt; å‘Šè¯‰criterionå»&lt;code&gt;benches&lt;/code&gt;ç›®å½•ä¸­æ‰¾&lt;code&gt;bench_hash.rs&lt;/code&gt;æˆ–&lt;code&gt;bench_hash/main.rs&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;harness = false&lt;/code&gt; cargoè‡ªå¸¦çš„benchæ˜¯ä½¿ç”¨harnessï¼Œè¿™ä¹Ÿæ˜¯ä¸ªåŸºå‡†æµ‹è¯•æ¡†æ¶ï¼Œä½†æˆ‘ä»¬ç°åœ¨è¦ç”¨çš„æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„æ¡†æ¶ï¼Œæ‰€ä»¥å°±è¦æŠŠå†…ç½®çš„æ¡†æ¶ç»™ç¦ç”¨æ‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»¥æ­¤ç±»æ¨ï¼Œè¿˜å¯ä»¥å®šä¹‰æ›´å¤šçš„&lt;code&gt;[[bench]]&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="5-è¾“å‡ºç»“æœ"&gt;&lt;a href="#5-%e8%be%93%e5%87%ba%e7%bb%93%e6%9e%9c" class="header-anchor"&gt;&lt;/a&gt;5. è¾“å‡ºç»“æœ
&lt;/h3&gt;&lt;p&gt;è¿è¡ŒåŸºå‡†æµ‹è¯•åï¼Œ&lt;code&gt;Criterion.rs&lt;/code&gt; å°†ä¼šç”Ÿæˆè¯¦ç»†çš„è¾“å‡ºï¼Œæ˜¾ç¤ºæ¯ä¸ªåŸºå‡†æµ‹è¯•çš„å¹³å‡æ—¶é—´ã€æ ‡å‡†å·®ã€æ ·æœ¬æ•°é‡ç­‰ä¿¡æ¯ã€‚è¿™äº›ç»“æœå¯ä»¥å¸®åŠ©ä½ äº†è§£ä»£ç åœ¨ä¸åŒæ¡ä»¶ä¸‹çš„è¡¨ç°ã€‚&lt;/p&gt;
&lt;h3 id="6-è‡ªå®šä¹‰"&gt;&lt;a href="#6-%e8%87%aa%e5%ae%9a%e4%b9%89" class="header-anchor"&gt;&lt;/a&gt;6. è‡ªå®šä¹‰
&lt;/h3&gt;&lt;h4 id="è¿­ä»£æ¬¡æ•°"&gt;&lt;a href="#%e8%bf%ad%e4%bb%a3%e6%ac%a1%e6%95%b0" class="header-anchor"&gt;&lt;/a&gt;è¿­ä»£æ¬¡æ•°
&lt;/h4&gt;&lt;p&gt;å¯¹äºæ¯”è¾ƒæ…¢çš„æ–¹æ³•ï¼Œé»˜è®¤ä¼šè¿è¡Œ100ä¸ªè¿­ä»£ï¼Œå¦‚æœä½ çš„æ–¹æ³•éå¸¸æ…¢ï¼Œå°±ä¼šæ¶ˆè€—å¤§é‡æ—¶é—´ï¼Œæ¯”å¦‚åƒä¸Šé¢çš„ç»™æ–‡ä»¶è®¡ç®—SHA256æ•£åˆ—å€¼çš„ï¼Œå¯¹äºå¤§æ–‡ä»¶æ¥è¯´å°±ä¼šå¾ˆæ…¢ï¼Œè¿™æ—¶å¯èƒ½ä¼šå¸Œæœ›å‡å°‘æ‰§è¡Œæ¬¡æ•°æ¥å‡å°‘ç­‰å¾…æ—¶é—´ã€‚é€šè¿‡è‡ªå®šä¹‰&lt;code&gt;criterion_group!(benches, benchmark_hash);&lt;/code&gt;è¿™è¡Œæ¥è§£å†³&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;criterion_group!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;benches&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Criterion&lt;/span&gt;::&lt;span class="n"&gt;default&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;sample_size&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;warm_up_time&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Duration&lt;/span&gt;::&lt;span class="n"&gt;from_secs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;targets&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;benchmark_hash&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å…¶ä¸­&lt;code&gt;sample_size&lt;/code&gt;å°±æ˜¯è¿­ä»£æ¬¡æ•°ï¼Œä¸èƒ½ä½äº10ï¼Œ&lt;code&gt;warm_up_time&lt;/code&gt;æ˜¯é¢„çƒ­ç”¨çš„æ—¶é—´ï¼Œæœ‰å…´è¶£å¯ä»¥å†ç ”ç©¶å…¶ä»–çš„é€‰é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;code&gt;criterion_group!&lt;/code&gt;æ˜¯ä¸€ä¸ªå®ï¼Œé‡Œé¢çš„ä¸‰è¡Œç»“å°¾å°±æ˜¯&lt;code&gt;;&lt;/code&gt;ï¼Œè€Œä¸æ˜¯&lt;code&gt;,&lt;/code&gt;ï¼Œæˆ‘æ²¡æœ‰å†™é”™ï¼Œ&lt;code&gt;targets&lt;/code&gt;å¯ä»¥æœ‰å¤šä¸ªï¼Œå¯ä»¥è‡ªå·±å°è¯•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h4 id="æ—¥å¿—"&gt;&lt;a href="#%e6%97%a5%e5%bf%97" class="header-anchor"&gt;&lt;/a&gt;æ—¥å¿—
&lt;/h4&gt;&lt;p&gt;ä¸€èˆ¬æœ€ç®€å•çš„æ—¥å¿—å¯ä»¥é€šè¿‡&lt;code&gt;log&lt;/code&gt;æ¥å£å’Œ&lt;code&gt;env_logger&lt;/code&gt;æ¥å®ç°ï¼Œè€Œ&lt;code&gt;env_logger&lt;/code&gt;åœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦æ‰§è¡Œä¸€æ¬¡&lt;code&gt;env_logger::init()&lt;/code&gt;ï¼Œå¯ä»¥æ”¾åœ¨è¿™é‡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;benchmark_hash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nc"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Criterion&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;env_logger&lt;/span&gt;::&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bench_function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;benchmark_sha256&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;||&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bench_hash&lt;/span&gt;&lt;span class="p"&gt;()));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å½“ç„¶å¦‚æœè¦å®šä¹‰å¤šä¸ªç±»ä¼¼&lt;code&gt;benchmark_hash&lt;/code&gt;çš„å‡½æ•°ï¼Œè¿™ä¹Ÿä¼šæœ‰ä¸€äº›å†²çªï¼Œå°±éœ€è¦&lt;code&gt;once_cell&lt;/code&gt;æˆ–&lt;code&gt;lazy_static&lt;/code&gt;ç­‰å…¶ä»–æ–¹æ¡ˆäº†ã€‚&lt;/p&gt;
&lt;h4 id="è¾“å‡ºç»“æœ"&gt;&lt;a href="#%e8%be%93%e5%87%ba%e7%bb%93%e6%9e%9c" class="header-anchor"&gt;&lt;/a&gt;è¾“å‡ºç»“æœ
&lt;/h4&gt;&lt;p&gt;å®‰è£…&lt;code&gt;criterion&lt;/code&gt;æ—¶æœ‰ä¸€ä¸ªé€‰é¡¹æ˜¯ä½¿ç”¨&lt;code&gt;html_report&lt;/code&gt;ï¼Œé»˜è®¤ä¼šä½¿ç”¨gnuplotæ¥ç”»å›¾ï¼Œä½†rusté‡Œæœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å®ç°æ˜¯plottersï¼Œæ‰€ä»¥å¦‚æœæ²¡æœ‰å®‰è£…gnuplotå°±ä¼šé»˜è®¤ä½¿ç”¨plottersã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Gnuplot not found, using plotters backend
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;dev-dependencies&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;criterion&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;version&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;0.5.1&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;features&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;html_reports&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ ·æ‰§è¡Œå®Œä¹‹åä¼šç”Ÿæˆ&lt;code&gt;target/criterion&lt;/code&gt;ç›®å½•ï¼Œå…¶ä¸­æœ‰&lt;code&gt;/report/index.html&lt;/code&gt;æ–‡ä»¶ï¼Œç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ç»“æœ&lt;/p&gt;
&lt;p&gt;&lt;img src="https://techinsight.pages.dev/images/rust/criterion_plotters_report.png"
loading="lazy"
&gt;&lt;/p&gt;
&lt;p&gt;éå¸¸ç¾è§‚äº†ï¼Œä»ç›´çº¿çš„æƒ…å†µæ¥çœ‹ï¼Œè¯´æ˜å¹¶æ²¡æœ‰éšç€è¿è¡Œæ¬¡æ•°çš„å¢åŠ æ€§èƒ½å˜å·®ã€‚&lt;/p&gt;
&lt;h4 id="è°ƒä¼˜"&gt;&lt;a href="#%e8%b0%83%e4%bc%98" class="header-anchor"&gt;&lt;/a&gt;è°ƒä¼˜
&lt;/h4&gt;&lt;p&gt;è¿è¡Œæ€§èƒ½æµ‹è¯•è‚¯å®šæ˜¯ä¸ºäº†è°ƒä¼˜ï¼Œå½“ä½ è°ƒæ•´äº†ä»£ç ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„æŠ¥å‘Š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;benchmark_sha256 time: [40.128 Âµs 40.160 Âµs 40.191 Âµs]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; change: [-0.5928% -0.3165% -0.0596%] (p = 0.04 &amp;lt; 0.05)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Change within noise threshold.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Found 1 outliers among 10 measurements (10.00%)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 1 (10.00%) high mild
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿˜æ˜¯ç”¨æˆªå›¾ä¼šæ›´ç›´è§‚ä¸€äº›ï¼Œå› ä¸ºå®ƒå¸¦é¢œè‰²&lt;/p&gt;
&lt;p&gt;&lt;img src="https://techinsight.pages.dev/images/rust/comparison.png"
loading="lazy"
&gt;&lt;/p&gt;
&lt;p&gt;å°±èƒ½çœ‹åˆ°æ¯æ¬¡çš„æ”¹åŠ¨ä¼˜åŒ–äº†å¤šå°‘ï¼Œå½“ç„¶æˆ‘è¿™é‡Œæ²¡æœ‰æ”¹ä»£ç ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæµ‹è¯•ç»“æœä¹Ÿæ²¡å˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;è€Œè¿è¡Œç¬¬äºŒæ¬¡æµ‹è¯•ä¹‹ååˆšæ‰çš„reportä¹Ÿä¼šæ›´æ–°ï¼Œæ–°å¢äº†ä¸€éƒ¨åˆ†å˜æˆè¿™æ ·&lt;/p&gt;
&lt;p&gt;&lt;img src="https://techinsight.pages.dev/images/rust/bench_comparison.png"
loading="lazy"
&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥è¯´æ˜¯éå¸¸è´´å¿ƒäº†ã€‚&lt;/p&gt;
&lt;h3 id="7-æ³¨æ„äº‹é¡¹"&gt;&lt;a href="#7-%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" class="header-anchor"&gt;&lt;/a&gt;7. æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤šæ¬¡è¿è¡Œ&lt;/strong&gt;ï¼š&lt;code&gt;Criterion.rs&lt;/code&gt; ä¼šè‡ªåŠ¨è¿›è¡Œå¤šæ¬¡è¿è¡Œä»¥æé«˜ç»“æœçš„å‡†ç¡®æ€§ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šè¿è¡Œ 100 æ¬¡å¹¶æ ¹æ®ç»“æœè¿›è¡Œç»Ÿè®¡åˆ†æã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ‹é‡å½±å“&lt;/strong&gt;ï¼šåŸºå‡†æµ‹è¯•å¯èƒ½ä¼šå—åˆ°å¤šç§å› ç´ çš„å½±å“ï¼Œå¦‚ CPU æ¸©åº¦ã€èƒŒæ™¯è¿›ç¨‹ç­‰ã€‚åœ¨è¿›è¡ŒåŸºå‡†æµ‹è¯•æ—¶ï¼Œå»ºè®®å°½é‡å‡å°‘å¤–éƒ¨å¹²æ‰°ï¼Œæœ€å¥½åœ¨ç©ºé—²çš„æœºå™¨ä¸Šè¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…ä¼˜åŒ–&lt;/strong&gt;ï¼šåœ¨åŸºå‡†æµ‹è¯•ä¸­ï¼ŒRust ç¼–è¯‘å™¨å¯èƒ½ä¼šå¯¹æœªä½¿ç”¨çš„ç»“æœè¿›è¡Œä¼˜åŒ–ã€‚ç¡®ä¿ä½ çš„åŸºå‡†æµ‹è¯•ä»£ç ä¸­ä½¿ç”¨äº†ç»“æœï¼Œå¯ä»¥é€šè¿‡å°†ç»“æœèµ‹å€¼ç»™ &lt;code&gt;_&lt;/code&gt; å˜é‡æ¥é¿å…è¿™ç§æƒ…å†µã€‚ä¾‹å¦‚ï¼š&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸…ç†æ•°æ®&lt;/strong&gt;ï¼š&lt;code&gt;Criterion.rs&lt;/code&gt; ä¼šåœ¨æ¯æ¬¡è¿è¡Œåç”Ÿæˆè¾“å‡ºæ•°æ®ã€‚å¯ä»¥é€šè¿‡åˆ é™¤ &lt;code&gt;target/criterion&lt;/code&gt; ç›®å½•æ¥æ¸…ç†æ—§çš„æ•°æ®å’ŒåŸºå‡†æµ‹è¯•ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨åŸºå‡†èšåˆ&lt;/strong&gt;ï¼šä½ å¯ä»¥å°†å¤šä¸ªåŸºå‡†æµ‹è¯•ç»„åˆåœ¨ä¸€èµ·ä»¥è·å¾—æ›´å…¨é¢çš„æ€§èƒ½è¯„ä¼°ã€‚ä½¿ç”¨ &lt;code&gt;criterion_group!&lt;/code&gt; å’Œ &lt;code&gt;criterion_main!&lt;/code&gt; å®æ¥ç»„ç»‡ä½ çš„åŸºå‡†æµ‹è¯•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="8-ç»“è®º"&gt;&lt;a href="#8-%e7%bb%93%e8%ae%ba" class="header-anchor"&gt;&lt;/a&gt;8. ç»“è®º
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Criterion.rs&lt;/code&gt; æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”çµæ´»çš„åŸºå‡†æµ‹è¯•å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ© Rust å¼€å‘è€…è·å–è¯¦ç»†çš„æ€§èƒ½æ•°æ®ã€‚é€šè¿‡éµå¾ªæœ¬æ–‡çš„æ­¥éª¤å’Œæ³¨æ„äº‹é¡¹ï¼Œä½ å¯ä»¥æœ‰æ•ˆåœ°ä½¿ç”¨ Criterion è¿›è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•ï¼Œä»è€Œæ‰¾åˆ°ä»£ç ä¸­çš„ç“¶é¢ˆå¹¶è¿›è¡Œä¼˜åŒ–ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Criterion.rsï¼Œæå‡ä½ çš„ Rust ç¼–ç¨‹èƒ½åŠ›ï¼&lt;/p&gt;</description></item></channel></rss>