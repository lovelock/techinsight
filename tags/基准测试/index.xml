<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>åŸºå‡†æµ‹è¯• on Tech In Sight</title><link>https://techinsight.pages.dev/tags/%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/</link><description>Recent content in åŸºå‡†æµ‹è¯• on Tech In Sight</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Tue, 25 Feb 2025 19:00:09 +0800</lastBuildDate><atom:link href="https://techinsight.pages.dev/tags/%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/index.xml" rel="self" type="application/rss+xml"/><item><title>ä¸º Grafana k6 ç¼–å†™ YAR åè®®æ‰©å±•ï¼šä» Go åˆ° JavaScript çš„æ— ç¼é›†æˆ</title><link>https://techinsight.pages.dev/p/%E4%B8%BA-grafana-k6-%E7%BC%96%E5%86%99-yar-%E5%8D%8F%E8%AE%AE%E6%89%A9%E5%B1%95%E4%BB%8E-go-%E5%88%B0-javascript-%E7%9A%84%E6%97%A0%E7%BC%9D%E9%9B%86%E6%88%90/</link><pubDate>Tue, 25 Feb 2025 19:00:09 +0800</pubDate><guid>https://techinsight.pages.dev/p/%E4%B8%BA-grafana-k6-%E7%BC%96%E5%86%99-yar-%E5%8D%8F%E8%AE%AE%E6%89%A9%E5%B1%95%E4%BB%8E-go-%E5%88%B0-javascript-%E7%9A%84%E6%97%A0%E7%BC%9D%E9%9B%86%E6%88%90/</guid><description>&lt;p&gt;æœ€è¿‘ï¼Œæˆ‘ä¸º Grafana k6 ç¼–å†™äº†ä¸€ä¸ªæ”¯æŒ YAR åè®®çš„æ‰©å±•ï¼Œæ•´ä¸ªè¿‡ç¨‹éå¸¸æœ‰è¶£ä¸”å……æ»¡æŒ‘æˆ˜ã€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†åˆ†äº«å¦‚ä½•ä»é›¶å¼€å§‹å®ç°è¿™ä¸ªæ‰©å±•ï¼Œå¹¶è§£é‡Šå…¶ä¸­çš„ä¸€äº›å…³é”®ç»†èŠ‚ã€‚ç‰¹åˆ«åœ°ï¼Œæˆ‘ä¼šè¯¦ç»†è¯´æ˜ä¸ºä»€ä¹ˆåœ¨ Go ä¸­å®šä¹‰çš„æ˜¯ &lt;code&gt;NewClient&lt;/code&gt; æ–¹æ³•ï¼Œä½†åœ¨ JavaScript ä¸­è°ƒç”¨çš„æ˜¯ &lt;code&gt;newClient&lt;/code&gt;ï¼Œä»¥åŠè¿™èƒŒåçš„æœºåˆ¶ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id="1-èƒŒæ™¯"&gt;&lt;a href="#1-%e8%83%8c%e6%99%af" class="header-anchor"&gt;&lt;/a&gt;1. èƒŒæ™¯
&lt;/h2&gt;&lt;h3 id="ä»€ä¹ˆæ˜¯-grafana-k6"&gt;&lt;a href="#%e4%bb%80%e4%b9%88%e6%98%af-grafana-k6" class="header-anchor"&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ Grafana k6ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;Grafana k6 æ˜¯ä¸€ä¸ªå¼€æºè´Ÿè½½æµ‹è¯•å·¥å…·ï¼Œä¸“æ³¨äºæ€§èƒ½å’Œå¯é æ€§æµ‹è¯•ã€‚å®ƒå…è®¸ç”¨æˆ·ä½¿ç”¨ JavaScript ç¼–å†™æµ‹è¯•è„šæœ¬ï¼Œå¹¶é€šè¿‡è™šæ‹Ÿç”¨æˆ·ï¼ˆVUï¼‰æ¨¡æ‹Ÿé«˜å¹¶å‘åœºæ™¯ã€‚&lt;/p&gt;
&lt;h3 id="ä»€ä¹ˆæ˜¯-yar-åè®®"&gt;&lt;a href="#%e4%bb%80%e4%b9%88%e6%98%af-yar-%e5%8d%8f%e8%ae%ae" class="header-anchor"&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ YAR åè®®ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;YARï¼ˆYet Another RPCï¼‰æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ RPC åè®®ï¼Œå¸¸ç”¨äºé«˜æ€§èƒ½çš„è¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚ä¸ºäº†æ›´å¥½åœ°æµ‹è¯• YAR æœåŠ¡ï¼Œæˆ‘å†³å®šä¸º k6 ç¼–å†™ä¸€ä¸ªæ‰©å±•ï¼Œä½¿å…¶èƒ½å¤Ÿç›´æ¥è°ƒç”¨ YAR åè®®ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id="2-å®ç°è¿‡ç¨‹"&gt;&lt;a href="#2-%e5%ae%9e%e7%8e%b0%e8%bf%87%e7%a8%8b" class="header-anchor"&gt;&lt;/a&gt;2. å®ç°è¿‡ç¨‹
&lt;/h2&gt;&lt;h3 id="21-ç¼–å†™-yar-å®¢æˆ·ç«¯"&gt;&lt;a href="#21-%e7%bc%96%e5%86%99-yar-%e5%ae%a2%e6%88%b7%e7%ab%af" class="header-anchor"&gt;&lt;/a&gt;2.1 ç¼–å†™ YAR å®¢æˆ·ç«¯
&lt;/h3&gt;&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ç”¨ Go ç¼–å†™äº†ä¸€ä¸ª YAR å®¢æˆ·ç«¯ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;package&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;client&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;git.happyhacker.fun/frost/yargo/protocol&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;YarClient&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;hostname&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;port&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;persistent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;bool&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;timeout&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;func&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;YarClient&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;Call&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;request&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;protocol&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;params&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="kt"&gt;any&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;protocol&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Response&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// å®ç° YAR è°ƒç”¨é€»è¾‘&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="22-åˆ›å»º-k6-æ‰©å±•"&gt;&lt;a href="#22-%e5%88%9b%e5%bb%ba-k6-%e6%89%a9%e5%b1%95" class="header-anchor"&gt;&lt;/a&gt;2.2 åˆ›å»º k6 æ‰©å±•
&lt;/h3&gt;&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘å°†è¿™ä¸ª YAR å®¢æˆ·ç«¯å°è£…ä¸º k6 æ‰©å±•ã€‚k6 å…è®¸é€šè¿‡ Go ç¼–å†™æ‰©å±•ï¼Œå¹¶å°†å…¶æš´éœ²ç»™ JavaScript è¿è¡Œæ—¶ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;go install go.k6.io/xk6/cmd/xk6@latest
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ä¼šå®‰è£…&lt;code&gt;xk6&lt;/code&gt;åˆ°&lt;code&gt;$GOAPTH&lt;/code&gt;ä¸­ï¼Œå…·ä½“çš„ç›®å½•æ˜¯&lt;code&gt;$GOPATH/bin/xk6&lt;/code&gt;ï¼Œå¦‚æœå®ƒä¸åœ¨ä½ çš„&lt;code&gt;$PATH&lt;/code&gt;ä¸­ï¼Œå¯ä»¥æŒ‡å®šç»å¯¹è·¯å¾„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;package&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;yar&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;go.k6.io/k6/js/modules&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;git.happyhacker.fun/frost/yargo/protocol&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;YarClient&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;client&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;client&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;YarClient&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;func&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;init&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;modules&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;Register&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;k6/x/yar&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;YarClient&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;func&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;YarClient&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;NewClient&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;hostname&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;port&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;persistent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;bool&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;timeout&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;YarClient&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;client&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nx"&gt;client&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;YarClient&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Hostname&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;hostname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Port&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;port&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Persistent&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;persistent&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Timeout&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;timeout&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;func&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;YarClient&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;Call&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;request&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;protocol&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;params&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="kt"&gt;any&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;protocol&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Response&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;client&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;Call&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;params&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="23-ç¼–è¯‘-k6-æ‰©å±•"&gt;&lt;a href="#23-%e7%bc%96%e8%af%91-k6-%e6%89%a9%e5%b1%95" class="header-anchor"&gt;&lt;/a&gt;2.3 ç¼–è¯‘ k6 æ‰©å±•
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;xk6&lt;/code&gt; å·¥å…·å°†æ‰©å±•ç¼–è¯‘åˆ° k6 äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;xk6 build --with k6-yar&lt;span class="o"&gt;=&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="24-ç¼–å†™-k6-æµ‹è¯•è„šæœ¬"&gt;&lt;a href="#24-%e7%bc%96%e5%86%99-k6-%e6%b5%8b%e8%af%95%e8%84%9a%e6%9c%ac" class="header-anchor"&gt;&lt;/a&gt;2.4 ç¼–å†™ k6 æµ‹è¯•è„šæœ¬
&lt;/h3&gt;&lt;p&gt;æœ€åï¼Œæˆ‘ç¼–å†™äº†ä¸€ä¸ª k6 æµ‹è¯•è„šæœ¬æ¥ä½¿ç”¨è¿™ä¸ªæ‰©å±•ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;import&lt;/span&gt; &lt;span class="nx"&gt;yar&lt;/span&gt; &lt;span class="nx"&gt;from&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;k6/x/yar&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;let&lt;/span&gt; &lt;span class="nx"&gt;client&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;yar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;newClient&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;127.0.0.1&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8009&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;export&lt;/span&gt; &lt;span class="k"&gt;default&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kd"&gt;let&lt;/span&gt; &lt;span class="nx"&gt;request&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;yar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;newRequest&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;default&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kd"&gt;let&lt;/span&gt; &lt;span class="nx"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;client&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;call&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;request&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;JSON&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;stringify&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;response&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr /&gt;
&lt;h2 id="3-å…³é”®ç»†èŠ‚ä¸ºä»€ä¹ˆ-newclient-å˜æˆäº†-newclient"&gt;&lt;a href="#3-%e5%85%b3%e9%94%ae%e7%bb%86%e8%8a%82%e4%b8%ba%e4%bb%80%e4%b9%88-newclient-%e5%8f%98%e6%88%90%e4%ba%86-newclient" class="header-anchor"&gt;&lt;/a&gt;3. å…³é”®ç»†èŠ‚ï¼šä¸ºä»€ä¹ˆ &lt;code&gt;NewClient&lt;/code&gt; å˜æˆäº† &lt;code&gt;newClient&lt;/code&gt;ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;åœ¨å®ç°è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸€åº¦å›°æƒ‘ï¼šä¸ºä»€ä¹ˆåœ¨ Go ä¸­å®šä¹‰çš„æ˜¯ &lt;code&gt;NewClient&lt;/code&gt; æ–¹æ³•ï¼Œä½†åœ¨ JavaScript ä¸­è°ƒç”¨çš„æ˜¯ &lt;code&gt;newClient&lt;/code&gt;ï¼Ÿè¿™æ˜¯å¦æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Ÿ&lt;/p&gt;
&lt;h3 id="31-go-çš„æ–¹æ³•å‘½å"&gt;&lt;a href="#31-go-%e7%9a%84%e6%96%b9%e6%b3%95%e5%91%bd%e5%90%8d" class="header-anchor"&gt;&lt;/a&gt;3.1 Go çš„æ–¹æ³•å‘½å
&lt;/h3&gt;&lt;p&gt;åœ¨ Go ä¸­ï¼Œæ–¹æ³•åé€šå¸¸é‡‡ç”¨ &lt;strong&gt;PascalCase&lt;/strong&gt;ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰ï¼Œä»¥è¡¨ç¤ºå…¶å…¬å¼€æ€§ã€‚å› æ­¤ï¼Œæˆ‘å®šä¹‰äº† &lt;code&gt;NewClient&lt;/code&gt; æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;func&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;YarClient&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;NewClient&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;hostname&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;port&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;persistent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;bool&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;timeout&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;YarClient&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// åˆå§‹åŒ– YAR å®¢æˆ·ç«¯&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="32-javascript-çš„å‘½åè§„åˆ™"&gt;&lt;a href="#32-javascript-%e7%9a%84%e5%91%bd%e5%90%8d%e8%a7%84%e5%88%99" class="header-anchor"&gt;&lt;/a&gt;3.2 JavaScript çš„å‘½åè§„åˆ™
&lt;/h3&gt;&lt;p&gt;åœ¨ JavaScript ä¸­ï¼Œå‡½æ•°åé€šå¸¸é‡‡ç”¨ &lt;strong&gt;camelCase&lt;/strong&gt;ï¼ˆé¦–å­—æ¯å°å†™ï¼‰ï¼Œä»¥ç¬¦åˆè¯­è¨€çš„ä¹ æƒ¯ç”¨æ³•ã€‚k6 çš„æ¨¡å—ç³»ç»Ÿä¼šè‡ªåŠ¨å°† Go æ–¹æ³•åè½¬æ¢ä¸º JavaScript é£æ ¼çš„å‘½åã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œ&lt;code&gt;NewClient&lt;/code&gt; åœ¨ JavaScript ä¸­å˜æˆäº† &lt;code&gt;newClient&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="33-k6-çš„æ¨¡å—æ³¨å†Œæœºåˆ¶"&gt;&lt;a href="#33-k6-%e7%9a%84%e6%a8%a1%e5%9d%97%e6%b3%a8%e5%86%8c%e6%9c%ba%e5%88%b6" class="header-anchor"&gt;&lt;/a&gt;3.3 k6 çš„æ¨¡å—æ³¨å†Œæœºåˆ¶
&lt;/h3&gt;&lt;p&gt;k6 çš„ &lt;code&gt;modules.Register&lt;/code&gt; æ–¹æ³•ä¼šå°† Go ç»“æ„ä½“çš„æ–¹æ³•æš´éœ²ç»™ JavaScript è¿è¡Œæ—¶ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œå‘½åè½¬æ¢ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NewClient&lt;/code&gt; â†’ &lt;code&gt;newClient&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Call&lt;/code&gt; â†’ &lt;code&gt;call&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§è½¬æ¢æ˜¯ k6 è®¾è®¡çš„ä¸€éƒ¨åˆ†ï¼Œæ—¨åœ¨è®© JavaScript ä»£ç æ›´åŠ ç¬¦åˆè¯­è¨€ä¹ æƒ¯ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id="4-é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"&gt;&lt;a href="#4-%e9%81%87%e5%88%b0%e7%9a%84%e9%97%ae%e9%a2%98%e4%b8%8e%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88" class="header-anchor"&gt;&lt;/a&gt;4. é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ
&lt;/h2&gt;&lt;h3 id="41-replace-æŒ‡ä»¤æœªç”Ÿæ•ˆ"&gt;&lt;a href="#41-replace-%e6%8c%87%e4%bb%a4%e6%9c%aa%e7%94%9f%e6%95%88" class="header-anchor"&gt;&lt;/a&gt;4.1 &lt;code&gt;replace&lt;/code&gt; æŒ‡ä»¤æœªç”Ÿæ•ˆ
&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;code&gt;xk6 build&lt;/code&gt; è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç° &lt;code&gt;go mod replace&lt;/code&gt; æŒ‡ä»¤æœªç”Ÿæ•ˆï¼Œå¯¼è‡´æ„å»ºå·¥å…·ä»ç„¶å°è¯•ä»åŸå§‹è·¯å¾„ä¸‹è½½ä¾èµ–ã€‚é€šè¿‡æ˜¾å¼æŒ‡å®š &lt;code&gt;replace&lt;/code&gt; æ ‡å¿—è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;xk6 build --with k6-yar&lt;span class="o"&gt;=&lt;/span&gt;. --replace git.happyhacker.fun/frost/yargo&lt;span class="o"&gt;=&lt;/span&gt;../path/to/your/yar/client
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="42-vu-é…ç½®"&gt;&lt;a href="#42-vu-%e9%85%8d%e7%bd%ae" class="header-anchor"&gt;&lt;/a&gt;4.2 VU é…ç½®
&lt;/h3&gt;&lt;p&gt;åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘é€šè¿‡ &lt;code&gt;options&lt;/code&gt; çµæ´»é…ç½®äº†è™šæ‹Ÿç”¨æˆ·ï¼ˆVUï¼‰çš„æ•°é‡å’Œè¡Œä¸ºã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;export&lt;/span&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;options&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;vus&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;duration&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;30s&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr /&gt;
&lt;h2 id="5-æ€»ç»“"&gt;&lt;a href="#5-%e6%80%bb%e7%bb%93" class="header-anchor"&gt;&lt;/a&gt;5. æ€»ç»“
&lt;/h2&gt;&lt;p&gt;é€šè¿‡ä¸º Grafana k6 ç¼–å†™ YAR åè®®æ‰©å±•ï¼Œæˆ‘ä¸ä»…åŠ æ·±äº†å¯¹ k6 å’Œ Go çš„ç†è§£ï¼Œè¿˜ä½“ä¼šåˆ°äº†è·¨è¯­è¨€å¼€å‘çš„ä¹è¶£ã€‚ç‰¹åˆ«åœ°ï¼Œ&lt;code&gt;NewClient&lt;/code&gt; åˆ° &lt;code&gt;newClient&lt;/code&gt; çš„å‘½åè½¬æ¢è®©æˆ‘æ„è¯†åˆ°ï¼Œæ¡†æ¶è®¾è®¡ä¸­çš„ç»†èŠ‚å¾€å¾€æ˜¯ä¸ºäº†è®©å¼€å‘è€…æ›´åŠ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯è¢«è¯­è¨€å·®å¼‚æ‰€å›°æ‰°ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä¹Ÿæœ‰å…´è¶£ä¸º k6 ç¼–å†™æ‰©å±•ï¼Œä¸å¦¨ä»ä¸€ä¸ªå°åŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥æ¢ç´¢å…¶å¼ºå¤§çš„èƒ½åŠ›ã€‚å¸Œæœ›è¿™ç¯‡åšå®¢èƒ½ä¸ºä½ çš„å¼€å‘ä¹‹æ—…æä¾›ä¸€äº›å¸®åŠ©ï¼&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id="å‚è€ƒé“¾æ¥"&gt;&lt;a href="#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5" class="header-anchor"&gt;&lt;/a&gt;å‚è€ƒé“¾æ¥
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://k6.io/docs/" target="_blank" rel="noopener"
&gt;Grafana k6 å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://github.com/grafana/xk6" target="_blank" rel="noopener"
&gt;xk6 é¡¹ç›®&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://en.wikipedia.org/wiki/YAR" target="_blank" rel="noopener"
&gt;YAR åè®®ä»‹ç»&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Happy coding! ğŸš€&lt;/p&gt;</description></item><item><title>ä½¿ç”¨ Rust Criterion è¿›è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•</title><link>https://techinsight.pages.dev/p/%E4%BD%BF%E7%94%A8-rust-criterion-%E8%BF%9B%E8%A1%8C%E6%80%A7%E8%83%BD%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/</link><pubDate>Fri, 15 Nov 2024 09:56:01 +0800</pubDate><guid>https://techinsight.pages.dev/p/%E4%BD%BF%E7%94%A8-rust-criterion-%E8%BF%9B%E8%A1%8C%E6%80%A7%E8%83%BD%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/</guid><description>&lt;p&gt;åœ¨ Rust å¼€å‘ä¸­ï¼Œæ€§èƒ½åŸºå‡†æµ‹è¯•æ˜¯éå¸¸é‡è¦çš„ä¸€ç¯ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…è¯„ä¼°ä»£ç çš„æ€§èƒ½å¹¶è¿›è¡Œä¼˜åŒ–ã€‚&lt;code&gt;Criterion.rs&lt;/code&gt; æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Rust åŸºå‡†æµ‹è¯•æ¡†æ¶ï¼Œå®ƒæä¾›äº†ç®€å•æ˜“ç”¨çš„æ¥å£å’Œä¸°å¯Œçš„åŠŸèƒ½ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ &lt;code&gt;Criterion&lt;/code&gt; è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼Œä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="1-ä»€ä¹ˆæ˜¯-criterionrs"&gt;&lt;a href="#1-%e4%bb%80%e4%b9%88%e6%98%af-criterionrs" class="header-anchor"&gt;&lt;/a&gt;1. ä»€ä¹ˆæ˜¯ Criterion.rsï¼Ÿ
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Criterion.rs&lt;/code&gt; æ˜¯ä¸€ä¸ªç”¨äº Rust çš„åŸºå‡†æµ‹è¯•åº“ï¼Œæ—¨åœ¨å–ä»£ Rust æ ‡å‡†åº“ä¸­çš„åŸºå‡†æµ‹è¯•åŠŸèƒ½ã€‚å®ƒæä¾›æ›´ç²¾ç¡®çš„æµ‹é‡æ‰‹æ®µå’Œæ›´å¥½çš„æŠ¥å‘ŠåŠŸèƒ½ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…æ·±å…¥äº†è§£ä»£ç çš„æ€§èƒ½è¡¨ç°ã€‚&lt;/p&gt;
&lt;h3 id="2-å®‰è£…-criterionrs"&gt;&lt;a href="#2-%e5%ae%89%e8%a3%85-criterionrs" class="header-anchor"&gt;&lt;/a&gt;2. å®‰è£… Criterion.rs
&lt;/h3&gt;&lt;p&gt;è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ &lt;code&gt;Criterion.rs&lt;/code&gt;ï¼Œé¦–å…ˆéœ€è¦åœ¨ &lt;code&gt;Cargo.toml&lt;/code&gt; æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;dev-dependencies&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;criterion&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;0.5.1&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ³¨æ„ï¼šè¿™ä¸ªä¾èµ–æ˜¯æ·»åŠ åœ¨&lt;code&gt;dev-dependencies&lt;/code&gt;ä¸­çš„ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ç”¨&lt;code&gt;cargo add criterion&lt;/code&gt;æ¥å®‰è£…ã€‚é‚£ä¹ˆå®ƒæœ‰ä¸¤ç§æ–¹å¼å®ç°&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç¼–è¾‘&lt;code&gt;Cargo.toml&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ˜¯åºŸè¯&lt;/p&gt;
&lt;ol start="2"&gt;
&lt;li&gt;é€šè¿‡&lt;code&gt;cargo-edit&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cargo install cargo-edit
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cargo add --dev criterion
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å®‰è£…&lt;code&gt;cargo-edit&lt;/code&gt;å°±æ˜¯ä¸ºäº†èƒ½è®©&lt;code&gt;cargo add&lt;/code&gt;æ”¯æŒä¸€ä¸ª&lt;code&gt;--dev&lt;/code&gt;çš„é€‰é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="3-åˆ›å»ºåŸºå‡†æµ‹è¯•"&gt;&lt;a href="#3-%e5%88%9b%e5%bb%ba%e5%9f%ba%e5%87%86%e6%b5%8b%e8%af%95" class="header-anchor"&gt;&lt;/a&gt;3. åˆ›å»ºåŸºå‡†æµ‹è¯•
&lt;/h3&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ªåŸºå‡†æµ‹è¯•éå¸¸ç®€å•ã€‚é¦–å…ˆï¼Œåœ¨é¡¹ç›®çš„ &lt;code&gt;benches&lt;/code&gt; ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„åŸºå‡†æµ‹è¯•æ–‡ä»¶ï¼Œä¾‹å¦‚ &lt;code&gt;benches/bench_hash.rs&lt;/code&gt;ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// benches/bench_hash.rs
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;criterion&lt;/span&gt;::&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;criterion_group&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;criterion_main&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Criterion&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;deduplicate&lt;/span&gt;::&lt;span class="n"&gt;file_info&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;bench_hash&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;/path/to/a/file&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file_info&lt;/span&gt;::&lt;span class="n"&gt;sha256_hash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;benchmark_hash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nc"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Criterion&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bench_function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;benchmark_sha256&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;||&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bench_hash&lt;/span&gt;&lt;span class="p"&gt;()));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;criterion_group!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;benches&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;benchmark_hash&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;criterion_main!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;benches&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª &lt;code&gt;bench_hash()&lt;/code&gt; æ–¹æ³•ï¼Œç”¨æ¥è°ƒç”¨ä½ çš„&lt;code&gt;lib.rs&lt;/code&gt;ä¸­å·²ç»å®šä¹‰è¿‡çš„&lt;code&gt;file_info::sha256_hash()&lt;/code&gt;æ–¹æ³•ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†ç»™å®ƒä¸€ä¸ªè¾“å…¥å‚æ•°ï¼Œå¹¶åˆ›å»ºäº†ä¸€ä¸ªåŸºå‡†æµ‹è¯•æ¥æµ‹é‡å…¶æ€§èƒ½ã€‚&lt;code&gt;c.bench_function&lt;/code&gt; å‡½æ•°æ¥æ”¶ä¸€ä¸ªåç§°å’Œä¸€ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°ï¼Œé—­åŒ…ä¸­æ˜¯æˆ‘ä»¬å¸Œæœ›åŸºå‡†æµ‹è¯•æ‰§è¡Œçš„ä»£ç ã€‚&lt;/p&gt;
&lt;h3 id="4-è¿è¡ŒåŸºå‡†æµ‹è¯•"&gt;&lt;a href="#4-%e8%bf%90%e8%a1%8c%e5%9f%ba%e5%87%86%e6%b5%8b%e8%af%95" class="header-anchor"&gt;&lt;/a&gt;4. è¿è¡ŒåŸºå‡†æµ‹è¯•
&lt;/h3&gt;&lt;p&gt;è¦è¿è¡ŒåŸºå‡†æµ‹è¯•ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cargo bench
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ—¶ä½ ä¼šå‘ç°åŸºå‡†æµ‹è¯•å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸ºè¿˜éœ€è¦åœ¨&lt;code&gt;Cargo.toml&lt;/code&gt;ä¸­æ·»åŠ ä¸‹åˆ—çš„å†…å®¹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="nx"&gt;bench&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;name&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;bench_hash&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;harness&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™é‡Œè§£é‡Šä¸€ä¸‹è¿™å‡ è¡Œçš„å«ä¹‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;name = &amp;quot;bench_hash&amp;quot;&lt;/code&gt; å‘Šè¯‰criterionå»&lt;code&gt;benches&lt;/code&gt;ç›®å½•ä¸­æ‰¾&lt;code&gt;bench_hash.rs&lt;/code&gt;æˆ–&lt;code&gt;bench_hash/main.rs&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;harness = false&lt;/code&gt; cargoè‡ªå¸¦çš„benchæ˜¯ä½¿ç”¨harnessï¼Œè¿™ä¹Ÿæ˜¯ä¸ªåŸºå‡†æµ‹è¯•æ¡†æ¶ï¼Œä½†æˆ‘ä»¬ç°åœ¨è¦ç”¨çš„æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„æ¡†æ¶ï¼Œæ‰€ä»¥å°±è¦æŠŠå†…ç½®çš„æ¡†æ¶ç»™ç¦ç”¨æ‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»¥æ­¤ç±»æ¨ï¼Œè¿˜å¯ä»¥å®šä¹‰æ›´å¤šçš„&lt;code&gt;[[bench]]&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="5-è¾“å‡ºç»“æœ"&gt;&lt;a href="#5-%e8%be%93%e5%87%ba%e7%bb%93%e6%9e%9c" class="header-anchor"&gt;&lt;/a&gt;5. è¾“å‡ºç»“æœ
&lt;/h3&gt;&lt;p&gt;è¿è¡ŒåŸºå‡†æµ‹è¯•åï¼Œ&lt;code&gt;Criterion.rs&lt;/code&gt; å°†ä¼šç”Ÿæˆè¯¦ç»†çš„è¾“å‡ºï¼Œæ˜¾ç¤ºæ¯ä¸ªåŸºå‡†æµ‹è¯•çš„å¹³å‡æ—¶é—´ã€æ ‡å‡†å·®ã€æ ·æœ¬æ•°é‡ç­‰ä¿¡æ¯ã€‚è¿™äº›ç»“æœå¯ä»¥å¸®åŠ©ä½ äº†è§£ä»£ç åœ¨ä¸åŒæ¡ä»¶ä¸‹çš„è¡¨ç°ã€‚&lt;/p&gt;
&lt;h3 id="6-è‡ªå®šä¹‰"&gt;&lt;a href="#6-%e8%87%aa%e5%ae%9a%e4%b9%89" class="header-anchor"&gt;&lt;/a&gt;6. è‡ªå®šä¹‰
&lt;/h3&gt;&lt;h4 id="è¿­ä»£æ¬¡æ•°"&gt;&lt;a href="#%e8%bf%ad%e4%bb%a3%e6%ac%a1%e6%95%b0" class="header-anchor"&gt;&lt;/a&gt;è¿­ä»£æ¬¡æ•°
&lt;/h4&gt;&lt;p&gt;å¯¹äºæ¯”è¾ƒæ…¢çš„æ–¹æ³•ï¼Œé»˜è®¤ä¼šè¿è¡Œ100ä¸ªè¿­ä»£ï¼Œå¦‚æœä½ çš„æ–¹æ³•éå¸¸æ…¢ï¼Œå°±ä¼šæ¶ˆè€—å¤§é‡æ—¶é—´ï¼Œæ¯”å¦‚åƒä¸Šé¢çš„ç»™æ–‡ä»¶è®¡ç®—SHA256æ•£åˆ—å€¼çš„ï¼Œå¯¹äºå¤§æ–‡ä»¶æ¥è¯´å°±ä¼šå¾ˆæ…¢ï¼Œè¿™æ—¶å¯èƒ½ä¼šå¸Œæœ›å‡å°‘æ‰§è¡Œæ¬¡æ•°æ¥å‡å°‘ç­‰å¾…æ—¶é—´ã€‚é€šè¿‡è‡ªå®šä¹‰&lt;code&gt;criterion_group!(benches, benchmark_hash);&lt;/code&gt;è¿™è¡Œæ¥è§£å†³&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="fm"&gt;criterion_group!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;benches&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Criterion&lt;/span&gt;::&lt;span class="n"&gt;default&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;sample_size&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;warm_up_time&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Duration&lt;/span&gt;::&lt;span class="n"&gt;from_secs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;targets&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;benchmark_hash&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å…¶ä¸­&lt;code&gt;sample_size&lt;/code&gt;å°±æ˜¯è¿­ä»£æ¬¡æ•°ï¼Œä¸èƒ½ä½äº10ï¼Œ&lt;code&gt;warm_up_time&lt;/code&gt;æ˜¯é¢„çƒ­ç”¨çš„æ—¶é—´ï¼Œæœ‰å…´è¶£å¯ä»¥å†ç ”ç©¶å…¶ä»–çš„é€‰é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;code&gt;criterion_group!&lt;/code&gt;æ˜¯ä¸€ä¸ªå®ï¼Œé‡Œé¢çš„ä¸‰è¡Œç»“å°¾å°±æ˜¯&lt;code&gt;;&lt;/code&gt;ï¼Œè€Œä¸æ˜¯&lt;code&gt;,&lt;/code&gt;ï¼Œæˆ‘æ²¡æœ‰å†™é”™ï¼Œ&lt;code&gt;targets&lt;/code&gt;å¯ä»¥æœ‰å¤šä¸ªï¼Œå¯ä»¥è‡ªå·±å°è¯•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h4 id="æ—¥å¿—"&gt;&lt;a href="#%e6%97%a5%e5%bf%97" class="header-anchor"&gt;&lt;/a&gt;æ—¥å¿—
&lt;/h4&gt;&lt;p&gt;ä¸€èˆ¬æœ€ç®€å•çš„æ—¥å¿—å¯ä»¥é€šè¿‡&lt;code&gt;log&lt;/code&gt;æ¥å£å’Œ&lt;code&gt;env_logger&lt;/code&gt;æ¥å®ç°ï¼Œè€Œ&lt;code&gt;env_logger&lt;/code&gt;åœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦æ‰§è¡Œä¸€æ¬¡&lt;code&gt;env_logger::init()&lt;/code&gt;ï¼Œå¯ä»¥æ”¾åœ¨è¿™é‡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;benchmark_hash&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nc"&gt;mut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Criterion&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;env_logger&lt;/span&gt;::&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bench_function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;benchmark_sha256&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;||&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bench_hash&lt;/span&gt;&lt;span class="p"&gt;()));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å½“ç„¶å¦‚æœè¦å®šä¹‰å¤šä¸ªç±»ä¼¼&lt;code&gt;benchmark_hash&lt;/code&gt;çš„å‡½æ•°ï¼Œè¿™ä¹Ÿä¼šæœ‰ä¸€äº›å†²çªï¼Œå°±éœ€è¦&lt;code&gt;once_cell&lt;/code&gt;æˆ–&lt;code&gt;lazy_static&lt;/code&gt;ç­‰å…¶ä»–æ–¹æ¡ˆäº†ã€‚&lt;/p&gt;
&lt;h4 id="è¾“å‡ºç»“æœ"&gt;&lt;a href="#%e8%be%93%e5%87%ba%e7%bb%93%e6%9e%9c" class="header-anchor"&gt;&lt;/a&gt;è¾“å‡ºç»“æœ
&lt;/h4&gt;&lt;p&gt;å®‰è£…&lt;code&gt;criterion&lt;/code&gt;æ—¶æœ‰ä¸€ä¸ªé€‰é¡¹æ˜¯ä½¿ç”¨&lt;code&gt;html_report&lt;/code&gt;ï¼Œé»˜è®¤ä¼šä½¿ç”¨gnuplotæ¥ç”»å›¾ï¼Œä½†rusté‡Œæœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å®ç°æ˜¯plottersï¼Œæ‰€ä»¥å¦‚æœæ²¡æœ‰å®‰è£…gnuplotå°±ä¼šé»˜è®¤ä½¿ç”¨plottersã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Gnuplot not found, using plotters backend
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;dev-dependencies&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;criterion&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;version&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;0.5.1&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;features&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;html_reports&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ ·æ‰§è¡Œå®Œä¹‹åä¼šç”Ÿæˆ&lt;code&gt;target/criterion&lt;/code&gt;ç›®å½•ï¼Œå…¶ä¸­æœ‰&lt;code&gt;/report/index.html&lt;/code&gt;æ–‡ä»¶ï¼Œç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ç»“æœ&lt;/p&gt;
&lt;p&gt;&lt;img src="https://techinsight.pages.dev/images/rust/criterion_plotters_report.png"
loading="lazy"
&gt;&lt;/p&gt;
&lt;p&gt;éå¸¸ç¾è§‚äº†ï¼Œä»ç›´çº¿çš„æƒ…å†µæ¥çœ‹ï¼Œè¯´æ˜å¹¶æ²¡æœ‰éšç€è¿è¡Œæ¬¡æ•°çš„å¢åŠ æ€§èƒ½å˜å·®ã€‚&lt;/p&gt;
&lt;h4 id="è°ƒä¼˜"&gt;&lt;a href="#%e8%b0%83%e4%bc%98" class="header-anchor"&gt;&lt;/a&gt;è°ƒä¼˜
&lt;/h4&gt;&lt;p&gt;è¿è¡Œæ€§èƒ½æµ‹è¯•è‚¯å®šæ˜¯ä¸ºäº†è°ƒä¼˜ï¼Œå½“ä½ è°ƒæ•´äº†ä»£ç ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„æŠ¥å‘Š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;benchmark_sha256 time: [40.128 Âµs 40.160 Âµs 40.191 Âµs]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; change: [-0.5928% -0.3165% -0.0596%] (p = 0.04 &amp;lt; 0.05)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Change within noise threshold.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Found 1 outliers among 10 measurements (10.00%)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 1 (10.00%) high mild
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿˜æ˜¯ç”¨æˆªå›¾ä¼šæ›´ç›´è§‚ä¸€äº›ï¼Œå› ä¸ºå®ƒå¸¦é¢œè‰²&lt;/p&gt;
&lt;p&gt;&lt;img src="https://techinsight.pages.dev/images/rust/comparison.png"
loading="lazy"
&gt;&lt;/p&gt;
&lt;p&gt;å°±èƒ½çœ‹åˆ°æ¯æ¬¡çš„æ”¹åŠ¨ä¼˜åŒ–äº†å¤šå°‘ï¼Œå½“ç„¶æˆ‘è¿™é‡Œæ²¡æœ‰æ”¹ä»£ç ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæµ‹è¯•ç»“æœä¹Ÿæ²¡å˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;è€Œè¿è¡Œç¬¬äºŒæ¬¡æµ‹è¯•ä¹‹ååˆšæ‰çš„reportä¹Ÿä¼šæ›´æ–°ï¼Œæ–°å¢äº†ä¸€éƒ¨åˆ†å˜æˆè¿™æ ·&lt;/p&gt;
&lt;p&gt;&lt;img src="https://techinsight.pages.dev/images/rust/bench_comparison.png"
loading="lazy"
&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥è¯´æ˜¯éå¸¸è´´å¿ƒäº†ã€‚&lt;/p&gt;
&lt;h3 id="7-æ³¨æ„äº‹é¡¹"&gt;&lt;a href="#7-%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" class="header-anchor"&gt;&lt;/a&gt;7. æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤šæ¬¡è¿è¡Œ&lt;/strong&gt;ï¼š&lt;code&gt;Criterion.rs&lt;/code&gt; ä¼šè‡ªåŠ¨è¿›è¡Œå¤šæ¬¡è¿è¡Œä»¥æé«˜ç»“æœçš„å‡†ç¡®æ€§ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šè¿è¡Œ 100 æ¬¡å¹¶æ ¹æ®ç»“æœè¿›è¡Œç»Ÿè®¡åˆ†æã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ‹é‡å½±å“&lt;/strong&gt;ï¼šåŸºå‡†æµ‹è¯•å¯èƒ½ä¼šå—åˆ°å¤šç§å› ç´ çš„å½±å“ï¼Œå¦‚ CPU æ¸©åº¦ã€èƒŒæ™¯è¿›ç¨‹ç­‰ã€‚åœ¨è¿›è¡ŒåŸºå‡†æµ‹è¯•æ—¶ï¼Œå»ºè®®å°½é‡å‡å°‘å¤–éƒ¨å¹²æ‰°ï¼Œæœ€å¥½åœ¨ç©ºé—²çš„æœºå™¨ä¸Šè¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…ä¼˜åŒ–&lt;/strong&gt;ï¼šåœ¨åŸºå‡†æµ‹è¯•ä¸­ï¼ŒRust ç¼–è¯‘å™¨å¯èƒ½ä¼šå¯¹æœªä½¿ç”¨çš„ç»“æœè¿›è¡Œä¼˜åŒ–ã€‚ç¡®ä¿ä½ çš„åŸºå‡†æµ‹è¯•ä»£ç ä¸­ä½¿ç”¨äº†ç»“æœï¼Œå¯ä»¥é€šè¿‡å°†ç»“æœèµ‹å€¼ç»™ &lt;code&gt;_&lt;/code&gt; å˜é‡æ¥é¿å…è¿™ç§æƒ…å†µã€‚ä¾‹å¦‚ï¼š&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸…ç†æ•°æ®&lt;/strong&gt;ï¼š&lt;code&gt;Criterion.rs&lt;/code&gt; ä¼šåœ¨æ¯æ¬¡è¿è¡Œåç”Ÿæˆè¾“å‡ºæ•°æ®ã€‚å¯ä»¥é€šè¿‡åˆ é™¤ &lt;code&gt;target/criterion&lt;/code&gt; ç›®å½•æ¥æ¸…ç†æ—§çš„æ•°æ®å’ŒåŸºå‡†æµ‹è¯•ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨åŸºå‡†èšåˆ&lt;/strong&gt;ï¼šä½ å¯ä»¥å°†å¤šä¸ªåŸºå‡†æµ‹è¯•ç»„åˆåœ¨ä¸€èµ·ä»¥è·å¾—æ›´å…¨é¢çš„æ€§èƒ½è¯„ä¼°ã€‚ä½¿ç”¨ &lt;code&gt;criterion_group!&lt;/code&gt; å’Œ &lt;code&gt;criterion_main!&lt;/code&gt; å®æ¥ç»„ç»‡ä½ çš„åŸºå‡†æµ‹è¯•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="8-ç»“è®º"&gt;&lt;a href="#8-%e7%bb%93%e8%ae%ba" class="header-anchor"&gt;&lt;/a&gt;8. ç»“è®º
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Criterion.rs&lt;/code&gt; æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”çµæ´»çš„åŸºå‡†æµ‹è¯•å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ© Rust å¼€å‘è€…è·å–è¯¦ç»†çš„æ€§èƒ½æ•°æ®ã€‚é€šè¿‡éµå¾ªæœ¬æ–‡çš„æ­¥éª¤å’Œæ³¨æ„äº‹é¡¹ï¼Œä½ å¯ä»¥æœ‰æ•ˆåœ°ä½¿ç”¨ Criterion è¿›è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•ï¼Œä»è€Œæ‰¾åˆ°ä»£ç ä¸­çš„ç“¶é¢ˆå¹¶è¿›è¡Œä¼˜åŒ–ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Criterion.rsï¼Œæå‡ä½ çš„ Rust ç¼–ç¨‹èƒ½åŠ›ï¼&lt;/p&gt;</description></item></channel></rss>