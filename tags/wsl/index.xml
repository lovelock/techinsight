<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>WSL on Tech In Sight</title><link>https://techinsight.pages.dev/tags/wsl/</link><description>Recent content in WSL on Tech In Sight</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 03 Oct 2025 12:59:02 +0800</lastBuildDate><atom:link href="https://techinsight.pages.dev/tags/wsl/index.xml" rel="self" type="application/rss+xml"/><item><title>把在Win11中生成的WSL导入到新安装的Win10中</title><link>https://techinsight.pages.dev/p/%E6%8A%8A%E5%9C%A8win11%E4%B8%AD%E7%94%9F%E6%88%90%E7%9A%84wsl%E5%AF%BC%E5%85%A5%E5%88%B0%E6%96%B0%E5%AE%89%E8%A3%85%E7%9A%84win10%E4%B8%AD/</link><pubDate>Fri, 03 Oct 2025 12:59:02 +0800</pubDate><guid>https://techinsight.pages.dev/p/%E6%8A%8A%E5%9C%A8win11%E4%B8%AD%E7%94%9F%E6%88%90%E7%9A%84wsl%E5%AF%BC%E5%85%A5%E5%88%B0%E6%96%B0%E5%AE%89%E8%A3%85%E7%9A%84win10%E4%B8%AD/</guid><description>&lt;p&gt;最近实在是受不了Windows 11 的卡顿和延迟，先在台式机上安装了Windows 10验证了一番，确实是指哪打哪、干脆利落，于是就把笔记本上预装的Win11给抹掉安装Win10了，安装之后也遇到了一些问题，最主要的是WSL。&lt;/p&gt;
&lt;p&gt;因为之前在Win11上部署的一个Debian WSL里面安装了非常多的开发工具，已经50多G了，如果重新配置就太麻烦了，所以肯定还是要想办法保留，重装完之后我有一个ext4.vhdx文件等待导入。&lt;/p&gt;
&lt;p&gt;说起来Windows这系统开发得也真是草率，遇到的各种问题都不能简单明了地解释清楚，到处都是“未知问题”、“发现了一个错误”这种，看了也不知道怎么解决。&lt;/p&gt;
&lt;p&gt;首先就是要打开Hyper-V虚拟机的选项和Windows Subsystem Linux的功能，但谁能知道打开这功能之后还有一大堆问题等着呢。&lt;/p&gt;
&lt;h2 id="报有一个进程正在使用"&gt;&lt;a href="#%e6%8a%a5%e6%9c%89%e4%b8%80%e4%b8%aa%e8%bf%9b%e7%a8%8b%e6%ad%a3%e5%9c%a8%e4%bd%bf%e7%94%a8" class="header-anchor"&gt;&lt;/a&gt;报有一个进程正在使用
&lt;/h2&gt;&lt;p&gt;执行&lt;code&gt;wsl --import Debian D:\WSL\Debian D:\WSL\Deiban\ext4.vhdx&lt;/code&gt;，立即就会报一个有其他进程正在使用文件还是什么的类似的报错，查了很多解决方案，有的说把这个文件复制到别处啥的，都没用。最后才发现是因为用了两个相同的目录，可能本质是因为要写入的目标文件也是ext4.vhdx，而这个文件正在被读取进程使用，但这个报错信息真的是没有任何价值。&lt;/p&gt;
&lt;h2 id="换了一个命令之后变成了未知错误"&gt;&lt;a href="#%e6%8d%a2%e4%ba%86%e4%b8%80%e4%b8%aa%e5%91%bd%e4%bb%a4%e4%b9%8b%e5%90%8e%e5%8f%98%e6%88%90%e4%ba%86%e6%9c%aa%e7%9f%a5%e9%94%99%e8%af%af" class="header-anchor"&gt;&lt;/a&gt;换了一个命令之后变成了未知错误
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;wsl --import Debian D:\WSL\Debian13 D:\WSL\Deiban\ext4.vhdx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这样终于不再报上面那个错了，但仍然不行，报未知错误，比上面那个还离谱，而且是执行几分钟之后才报出来。都让我一度想放弃了。后来发现还可以执行一下&lt;code&gt;wsl --update&lt;/code&gt;，执行了之后再执行上面这个命令，终于来了不一样的报错了。&lt;/p&gt;
&lt;h2 id="接近成功"&gt;&lt;a href="#%e6%8e%a5%e8%bf%91%e6%88%90%e5%8a%9f" class="header-anchor"&gt;&lt;/a&gt;接近成功
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;wsl --import Debian D:\WSL\Debian13 D:\WSL\Deiban\ext4.vhdx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这时候报的是vhdx文件需要用``&amp;ndash;vhd&lt;code&gt;选项执行，因为默认要导入的是tar包。这时候我就理解了，因为正常的备份方式是先导出tar包，再导入，我这里使用的是vhdx，所以要指定不用tar包，所以在上面的命令上加上&lt;/code&gt;&amp;ndash;vhd`就可以了。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;wsl --import Debian D:\WSL\Debian13 D:\WSL\Deiban\ext4.vhdx --vhd
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;前面可能遗漏了一个重要的点，因为我在此之前已经执行了&lt;code&gt;wsl --set-default-version 2&lt;/code&gt;，让WSL默认使用WSL2了，而Windows 10 默认用的应该是版本1，所以在导入过程中没有遇到这个WSL版本的问题。&lt;/p&gt;
&lt;p&gt;这时候就出现了可爱的进度条，这时候我的眼泪都要下来了，太难了。狗日的Windows这报错信息比我自己写的还要烂，完全不能体现出具体是什么问题，没有任何价值。&lt;/p&gt;</description></item></channel></rss>